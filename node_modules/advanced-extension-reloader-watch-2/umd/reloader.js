/**
 * Copyright 2024
 */

!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("path"),require("fs"),require("constants"),require("stream"),require("util"),require("assert"),require("events"),require("os"),require("http"),require("zlib"),require("querystring"),require("url"),require("crypto"),require("tty"),require("timers"),require("https"),require("net"),require("tls"),require("buffer"),require("child_process")):"function"==typeof define&&define.amd?define(["path","fs","constants","stream","util","assert","events","os","http","zlib","querystring","url","crypto","tty","timers","https","net","tls","buffer","child_process"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Reloader=factory(global.require$$1,global.require$$0$5,global.require$$0$3,global.require$$0$4,global.require$$2,global.require$$5,global.require$$0$6,global.require$$2$1,global.require$$0$9,global.require$$1$1,global.require$$1$2,global.require$$7,global.require$$0$7,global.tty,global.require$$2$2,global.require$$1$3,global.require$$3,global.require$$4,global.require$$0$8,global.require$$0$a)}(this,(function(require$$1,require$$0$5,require$$0$3,require$$0$4,require$$2,require$$5,require$$0$6,require$$2$1,require$$0$9,require$$1$1,require$$1$2,require$$7,require$$0$7,tty,require$$2$2,require$$1$3,require$$3,require$$4,require$$0$8,require$$0$a){"use strict";function _interopNamespaceDefault(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}})),n.default=e,Object.freeze(n)}var tty__namespace=_interopNamespaceDefault(tty),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if("function"==typeof f){var a=function a(){return this instanceof a?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)};a.prototype=f.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach((function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:!0,get:function(){return n[k]}})})),a}var isNil$1=getDefaultExportFromCjs((function(value){return null==value})),objectProto$6=Object.prototype;var _isPrototype=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto$6)};var _overArg=function(func,transform){return function(arg){return func(transform(arg))}},nativeKeys$1=_overArg(Object.keys,Object),isPrototype$1=_isPrototype,nativeKeys=nativeKeys$1,hasOwnProperty$5=Object.prototype.hasOwnProperty;var _baseKeys=function(object){if(!isPrototype$1(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty$5.call(object,key)&&"constructor"!=key&&result.push(key);return result},_freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeGlobal=_freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,_root=freeGlobal||freeSelf||Function("return this")(),_Symbol=_root.Symbol,Symbol$2=_Symbol,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty,nativeObjectToString$1=objectProto$4.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;var _getRawTag=function(value){var isOwn=hasOwnProperty$4.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString$1.call(value);return unmasked&&(isOwn?value[symToStringTag$1]=tag:delete value[symToStringTag$1]),result},nativeObjectToString=Object.prototype.toString;var getRawTag=_getRawTag,objectToString=function(value){return nativeObjectToString.call(value)},symToStringTag=_Symbol?_Symbol.toStringTag:void 0;var _baseGetTag=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)};var isObject_1=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)},baseGetTag$3=_baseGetTag,isObject$3=isObject_1;var uid,isFunction_1=function(value){if(!isObject$3(value))return!1;var tag=baseGetTag$3(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag},coreJsData=_root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";var _isMasked=function(func){return!!maskSrcKey&&maskSrcKey in func},funcToString$1=Function.prototype.toString;var _toSource=function(func){if(null!=func){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""},isFunction$1=isFunction_1,isMasked=_isMasked,isObject$2=isObject_1,toSource$1=_toSource,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$3).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var baseIsNative=function(value){return!(!isObject$2(value)||isMasked(value))&&(isFunction$1(value)?reIsNative:reIsHostCtor).test(toSource$1(value))},getValue=function(object,key){return null==object?void 0:object[key]};var _getNative=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0},DataView$1=_getNative(_root,"DataView"),Map$1=_getNative(_root,"Map"),Promise$1=_getNative(_root,"Promise"),Set$1=_getNative(_root,"Set"),WeakMap=_getNative(_root,"WeakMap"),baseGetTag$2=_baseGetTag,toSource=_toSource,dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap),getTag$1=baseGetTag$2;(DataView$1&&"[object DataView]"!=getTag$1(new DataView$1(new ArrayBuffer(1)))||Map$1&&"[object Map]"!=getTag$1(new Map$1)||Promise$1&&"[object Promise]"!=getTag$1(Promise$1.resolve())||Set$1&&"[object Set]"!=getTag$1(new Set$1)||WeakMap&&"[object WeakMap]"!=getTag$1(new WeakMap))&&(getTag$1=function(value){var result=baseGetTag$2(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result});var _getTag=getTag$1;var isObjectLike_1=function(value){return null!=value&&"object"==typeof value},baseGetTag$1=_baseGetTag,isObjectLike$2=isObjectLike_1;var baseIsArguments=function(value){return isObjectLike$2(value)&&"[object Arguments]"==baseGetTag$1(value)},isObjectLike$1=isObjectLike_1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike$1(value)&&hasOwnProperty$2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArguments_1=isArguments$1,isArray_1=Array.isArray;var isLength_1=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991},isFunction=isFunction_1,isLength$1=isLength_1;var isArrayLike_1=function(value){return null!=value&&isLength$1(value.length)&&!isFunction(value)},isBuffer$1={exports:{}};var stubFalse_1=function(){return!1};!function(module,exports){var root=_root,stubFalse=stubFalse_1,freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}(isBuffer$1,isBuffer$1.exports);var isBufferExports=isBuffer$1.exports,baseGetTag=_baseGetTag,isLength=isLength_1,isObjectLike=isObjectLike_1,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var _baseIsTypedArray=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var _baseUnary=function(func){return function(value){return func(value)}},_nodeUtil={exports:{}};!function(module,exports){var freeGlobal=_freeGlobal,freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeIsTypedArray=_nodeUtilExports&&_nodeUtilExports.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,baseKeys=_baseKeys,getTag=_getTag,isArguments=isArguments_1,isArray=isArray_1,isArrayLike=isArrayLike_1,isBuffer=isBufferExports,isPrototype=_isPrototype,isTypedArray=isTypedArray$1,hasOwnProperty$1=Object.prototype.hasOwnProperty;var isEmpty$1=getDefaultExportFromCjs((function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if("[object Map]"==tag||"[object Set]"==tag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty$1.call(value,key))return!1;return!0})),fs$m={},universalify$1={fromCallback:function(fn){return Object.defineProperty((function(...args){if("function"!=typeof args[args.length-1])return new Promise(((resolve,reject)=>{args.push(((err,res)=>null!=err?reject(err):resolve(res))),fn.apply(this,args)}));fn.apply(this,args)}),"name",{value:fn.name})},fromPromise:function(fn){return Object.defineProperty((function(...args){const cb=args[args.length-1];if("function"!=typeof cb)return fn.apply(this,args);args.pop(),fn.apply(this,args).then((r=>cb(null,r)),cb)}),"name",{value:fn.name})}},constants$6=require$$0$3,origCwd=process.cwd,cwd=null,platform$1=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return cwd||(cwd=origCwd.call(process)),cwd};try{process.cwd()}catch(er){}if("function"==typeof process.chdir){var chdir=process.chdir;process.chdir=function(d){cwd=null,chdir.call(process,d)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,chdir)}var polyfills$1=function(fs){constants$6.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(fs){fs.lchmod=function(path,mode,callback){fs.open(path,constants$6.O_WRONLY|constants$6.O_SYMLINK,mode,(function(err,fd){err?callback&&callback(err):fs.fchmod(fd,mode,(function(err){fs.close(fd,(function(err2){callback&&callback(err||err2)}))}))}))},fs.lchmodSync=function(path,mode){var ret,fd=fs.openSync(path,constants$6.O_WRONLY|constants$6.O_SYMLINK,mode),threw=!0;try{ret=fs.fchmodSync(fd,mode),threw=!1}finally{if(threw)try{fs.closeSync(fd)}catch(er){}else fs.closeSync(fd)}return ret}}(fs);fs.lutimes||function(fs){constants$6.hasOwnProperty("O_SYMLINK")&&fs.futimes?(fs.lutimes=function(path,at,mt,cb){fs.open(path,constants$6.O_SYMLINK,(function(er,fd){er?cb&&cb(er):fs.futimes(fd,at,mt,(function(er){fs.close(fd,(function(er2){cb&&cb(er||er2)}))}))}))},fs.lutimesSync=function(path,at,mt){var ret,fd=fs.openSync(path,constants$6.O_SYMLINK),threw=!0;try{ret=fs.futimesSync(fd,at,mt),threw=!1}finally{if(threw)try{fs.closeSync(fd)}catch(er){}else fs.closeSync(fd)}return ret}):fs.futimes&&(fs.lutimes=function(_a,_b,_c,cb){cb&&process.nextTick(cb)},fs.lutimesSync=function(){})}(fs);fs.chown=chownFix(fs.chown),fs.fchown=chownFix(fs.fchown),fs.lchown=chownFix(fs.lchown),fs.chmod=chmodFix(fs.chmod),fs.fchmod=chmodFix(fs.fchmod),fs.lchmod=chmodFix(fs.lchmod),fs.chownSync=chownFixSync(fs.chownSync),fs.fchownSync=chownFixSync(fs.fchownSync),fs.lchownSync=chownFixSync(fs.lchownSync),fs.chmodSync=chmodFixSync(fs.chmodSync),fs.fchmodSync=chmodFixSync(fs.fchmodSync),fs.lchmodSync=chmodFixSync(fs.lchmodSync),fs.stat=statFix(fs.stat),fs.fstat=statFix(fs.fstat),fs.lstat=statFix(fs.lstat),fs.statSync=statFixSync(fs.statSync),fs.fstatSync=statFixSync(fs.fstatSync),fs.lstatSync=statFixSync(fs.lstatSync),fs.chmod&&!fs.lchmod&&(fs.lchmod=function(path,mode,cb){cb&&process.nextTick(cb)},fs.lchmodSync=function(){});fs.chown&&!fs.lchown&&(fs.lchown=function(path,uid,gid,cb){cb&&process.nextTick(cb)},fs.lchownSync=function(){});"win32"===platform$1&&(fs.rename="function"!=typeof fs.rename?fs.rename:function(fs$rename){function rename(from,to,cb){var start=Date.now(),backoff=0;fs$rename(from,to,(function CB(er){if(er&&("EACCES"===er.code||"EPERM"===er.code||"EBUSY"===er.code)&&Date.now()-start<6e4)return setTimeout((function(){fs.stat(to,(function(stater,st){stater&&"ENOENT"===stater.code?fs$rename(from,to,CB):cb(er)}))}),backoff),void(backoff<100&&(backoff+=10));cb&&cb(er)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(rename,fs$rename),rename}(fs.rename));function chmodFix(orig){return orig?function(target,mode,cb){return orig.call(fs,target,mode,(function(er){chownErOk(er)&&(er=null),cb&&cb.apply(this,arguments)}))}:orig}function chmodFixSync(orig){return orig?function(target,mode){try{return orig.call(fs,target,mode)}catch(er){if(!chownErOk(er))throw er}}:orig}function chownFix(orig){return orig?function(target,uid,gid,cb){return orig.call(fs,target,uid,gid,(function(er){chownErOk(er)&&(er=null),cb&&cb.apply(this,arguments)}))}:orig}function chownFixSync(orig){return orig?function(target,uid,gid){try{return orig.call(fs,target,uid,gid)}catch(er){if(!chownErOk(er))throw er}}:orig}function statFix(orig){return orig?function(target,options,cb){function callback(er,stats){stats&&(stats.uid<0&&(stats.uid+=4294967296),stats.gid<0&&(stats.gid+=4294967296)),cb&&cb.apply(this,arguments)}return"function"==typeof options&&(cb=options,options=null),options?orig.call(fs,target,options,callback):orig.call(fs,target,callback)}:orig}function statFixSync(orig){return orig?function(target,options){var stats=options?orig.call(fs,target,options):orig.call(fs,target);return stats&&(stats.uid<0&&(stats.uid+=4294967296),stats.gid<0&&(stats.gid+=4294967296)),stats}:orig}function chownErOk(er){return!er||("ENOSYS"===er.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==er.code&&"EPERM"!==er.code))}fs.read="function"!=typeof fs.read?fs.read:function(fs$read){function read(fd,buffer,offset,length,position,callback_){var callback;if(callback_&&"function"==typeof callback_){var eagCounter=0;callback=function(er,_,__){if(er&&"EAGAIN"===er.code&&eagCounter<10)return eagCounter++,fs$read.call(fs,fd,buffer,offset,length,position,callback);callback_.apply(this,arguments)}}return fs$read.call(fs,fd,buffer,offset,length,position,callback)}return Object.setPrototypeOf&&Object.setPrototypeOf(read,fs$read),read}(fs.read),fs.readSync="function"!=typeof fs.readSync?fs.readSync:(fs$readSync=fs.readSync,function(fd,buffer,offset,length,position){for(var eagCounter=0;;)try{return fs$readSync.call(fs,fd,buffer,offset,length,position)}catch(er){if("EAGAIN"===er.code&&eagCounter<10){eagCounter++;continue}throw er}});var fs$readSync};var Stream=require$$0$4.Stream,legacyStreams=function(fs){return{ReadStream:function ReadStream(path,options){if(!(this instanceof ReadStream))return new ReadStream(path,options);Stream.call(this);var self=this;this.path=path,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,options=options||{};for(var keys=Object.keys(options),index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){self._read()}));fs.open(this.path,this.flags,this.mode,(function(err,fd){if(err)return self.emit("error",err),void(self.readable=!1);self.fd=fd,self.emit("open",fd),self._read()}))},WriteStream:function WriteStream(path,options){if(!(this instanceof WriteStream))return new WriteStream(path,options);Stream.call(this),this.path=path,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,options=options||{};for(var keys=Object.keys(options),index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=fs.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var clone_1=function(obj){if(null===obj||"object"!=typeof obj)return obj;if(obj instanceof Object)var copy={__proto__:getPrototypeOf(obj)};else copy=Object.create(null);return Object.getOwnPropertyNames(obj).forEach((function(key){Object.defineProperty(copy,key,Object.getOwnPropertyDescriptor(obj,key))})),copy},getPrototypeOf=Object.getPrototypeOf||function(obj){return obj.__proto__};var gracefulQueue,previousSymbol,fs$l=require$$0$5,polyfills=polyfills$1,legacy=legacyStreams,clone=clone_1,util$1=require$$2;function publishQueue(context,queue){Object.defineProperty(context,gracefulQueue,{get:function(){return queue}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(gracefulQueue=Symbol.for("graceful-fs.queue"),previousSymbol=Symbol.for("graceful-fs.previous")):(gracefulQueue="___graceful-fs.queue",previousSymbol="___graceful-fs.previous");var debug$c=function(){};if(util$1.debuglog?debug$c=util$1.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(debug$c=function(){var m=util$1.format.apply(util$1,arguments);m="GFS4: "+m.split(/\n/).join("\nGFS4: "),console.error(m)}),!fs$l[gracefulQueue]){var queue=commonjsGlobal[gracefulQueue]||[];publishQueue(fs$l,queue),fs$l.close=function(fs$close){function close(fd,cb){return fs$close.call(fs$l,fd,(function(err){err||resetQueue(),"function"==typeof cb&&cb.apply(this,arguments)}))}return Object.defineProperty(close,previousSymbol,{value:fs$close}),close}(fs$l.close),fs$l.closeSync=function(fs$closeSync){function closeSync(fd){fs$closeSync.apply(fs$l,arguments),resetQueue()}return Object.defineProperty(closeSync,previousSymbol,{value:fs$closeSync}),closeSync}(fs$l.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){debug$c(fs$l[gracefulQueue]),require$$5.equal(fs$l[gracefulQueue].length,0)}))}commonjsGlobal[gracefulQueue]||publishQueue(commonjsGlobal,fs$l[gracefulQueue]);var retryTimer,gracefulFs=patch(clone(fs$l));function patch(fs){polyfills(fs),fs.gracefulify=patch,fs.createReadStream=function(path,options){return new fs.ReadStream(path,options)},fs.createWriteStream=function(path,options){return new fs.WriteStream(path,options)};var fs$readFile=fs.readFile;fs.readFile=function(path,options,cb){"function"==typeof options&&(cb=options,options=null);return function go$readFile(path,options,cb,startTime){return fs$readFile(path,options,(function(err){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?"function"==typeof cb&&cb.apply(this,arguments):enqueue([go$readFile,[path,options,cb],err,startTime||Date.now(),Date.now()])}))}(path,options,cb)};var fs$writeFile=fs.writeFile;fs.writeFile=function(path,data,options,cb){"function"==typeof options&&(cb=options,options=null);return function go$writeFile(path,data,options,cb,startTime){return fs$writeFile(path,data,options,(function(err){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?"function"==typeof cb&&cb.apply(this,arguments):enqueue([go$writeFile,[path,data,options,cb],err,startTime||Date.now(),Date.now()])}))}(path,data,options,cb)};var fs$appendFile=fs.appendFile;fs$appendFile&&(fs.appendFile=function(path,data,options,cb){"function"==typeof options&&(cb=options,options=null);return function go$appendFile(path,data,options,cb,startTime){return fs$appendFile(path,data,options,(function(err){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?"function"==typeof cb&&cb.apply(this,arguments):enqueue([go$appendFile,[path,data,options,cb],err,startTime||Date.now(),Date.now()])}))}(path,data,options,cb)});var fs$copyFile=fs.copyFile;fs$copyFile&&(fs.copyFile=function(src,dest,flags,cb){"function"==typeof flags&&(cb=flags,flags=0);return function go$copyFile(src,dest,flags,cb,startTime){return fs$copyFile(src,dest,flags,(function(err){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?"function"==typeof cb&&cb.apply(this,arguments):enqueue([go$copyFile,[src,dest,flags,cb],err,startTime||Date.now(),Date.now()])}))}(src,dest,flags,cb)});var fs$readdir=fs.readdir;fs.readdir=function(path,options,cb){"function"==typeof options&&(cb=options,options=null);var go$readdir=noReaddirOptionVersions.test(process.version)?function(path,options,cb,startTime){return fs$readdir(path,fs$readdirCallback(path,options,cb,startTime))}:function(path,options,cb,startTime){return fs$readdir(path,options,fs$readdirCallback(path,options,cb,startTime))};return go$readdir(path,options,cb);function fs$readdirCallback(path,options,cb,startTime){return function(err,files){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?(files&&files.sort&&files.sort(),"function"==typeof cb&&cb.call(this,err,files)):enqueue([go$readdir,[path,options,cb],err,startTime||Date.now(),Date.now()])}}};var noReaddirOptionVersions=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var legStreams=legacy(fs);ReadStream=legStreams.ReadStream,WriteStream=legStreams.WriteStream}var fs$ReadStream=fs.ReadStream;fs$ReadStream&&(ReadStream.prototype=Object.create(fs$ReadStream.prototype),ReadStream.prototype.open=function(){var that=this;open(that.path,that.flags,that.mode,(function(err,fd){err?(that.autoClose&&that.destroy(),that.emit("error",err)):(that.fd=fd,that.emit("open",fd),that.read())}))});var fs$WriteStream=fs.WriteStream;fs$WriteStream&&(WriteStream.prototype=Object.create(fs$WriteStream.prototype),WriteStream.prototype.open=function(){var that=this;open(that.path,that.flags,that.mode,(function(err,fd){err?(that.destroy(),that.emit("error",err)):(that.fd=fd,that.emit("open",fd))}))}),Object.defineProperty(fs,"ReadStream",{get:function(){return ReadStream},set:function(val){ReadStream=val},enumerable:!0,configurable:!0}),Object.defineProperty(fs,"WriteStream",{get:function(){return WriteStream},set:function(val){WriteStream=val},enumerable:!0,configurable:!0});var FileReadStream=ReadStream;Object.defineProperty(fs,"FileReadStream",{get:function(){return FileReadStream},set:function(val){FileReadStream=val},enumerable:!0,configurable:!0});var FileWriteStream=WriteStream;function ReadStream(path,options){return this instanceof ReadStream?(fs$ReadStream.apply(this,arguments),this):ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function WriteStream(path,options){return this instanceof WriteStream?(fs$WriteStream.apply(this,arguments),this):WriteStream.apply(Object.create(WriteStream.prototype),arguments)}Object.defineProperty(fs,"FileWriteStream",{get:function(){return FileWriteStream},set:function(val){FileWriteStream=val},enumerable:!0,configurable:!0});var fs$open=fs.open;function open(path,flags,mode,cb){return"function"==typeof mode&&(cb=mode,mode=null),function go$open(path,flags,mode,cb,startTime){return fs$open(path,flags,mode,(function(err,fd){!err||"EMFILE"!==err.code&&"ENFILE"!==err.code?"function"==typeof cb&&cb.apply(this,arguments):enqueue([go$open,[path,flags,mode,cb],err,startTime||Date.now(),Date.now()])}))}(path,flags,mode,cb)}return fs.open=open,fs}function enqueue(elem){debug$c("ENQUEUE",elem[0].name,elem[1]),fs$l[gracefulQueue].push(elem),retry()}function resetQueue(){for(var now=Date.now(),i=0;i<fs$l[gracefulQueue].length;++i)fs$l[gracefulQueue][i].length>2&&(fs$l[gracefulQueue][i][3]=now,fs$l[gracefulQueue][i][4]=now);retry()}function retry(){if(clearTimeout(retryTimer),retryTimer=void 0,0!==fs$l[gracefulQueue].length){var elem=fs$l[gracefulQueue].shift(),fn=elem[0],args=elem[1],err=elem[2],startTime=elem[3],lastTime=elem[4];if(void 0===startTime)debug$c("RETRY",fn.name,args),fn.apply(null,args);else if(Date.now()-startTime>=6e4){debug$c("TIMEOUT",fn.name,args);var cb=args.pop();"function"==typeof cb&&cb.call(null,err)}else{var sinceAttempt=Date.now()-lastTime,sinceStart=Math.max(lastTime-startTime,1);sinceAttempt>=Math.min(1.2*sinceStart,100)?(debug$c("RETRY",fn.name,args),fn.apply(null,args.concat([startTime]))):fs$l[gracefulQueue].push(elem)}void 0===retryTimer&&(retryTimer=setTimeout(retry,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!fs$l.__patched&&(gracefulFs=patch(fs$l),fs$l.__patched=!0),function(exports){const u=universalify$1.fromCallback,fs=gracefulFs,api=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((key=>"function"==typeof fs[key]));Object.assign(exports,fs),api.forEach((method=>{exports[method]=u(fs[method])})),exports.exists=function(filename,callback){return"function"==typeof callback?fs.exists(filename,callback):new Promise((resolve=>fs.exists(filename,resolve)))},exports.read=function(fd,buffer,offset,length,position,callback){return"function"==typeof callback?fs.read(fd,buffer,offset,length,position,callback):new Promise(((resolve,reject)=>{fs.read(fd,buffer,offset,length,position,((err,bytesRead,buffer)=>{if(err)return reject(err);resolve({bytesRead:bytesRead,buffer:buffer})}))}))},exports.write=function(fd,buffer,...args){return"function"==typeof args[args.length-1]?fs.write(fd,buffer,...args):new Promise(((resolve,reject)=>{fs.write(fd,buffer,...args,((err,bytesWritten,buffer)=>{if(err)return reject(err);resolve({bytesWritten:bytesWritten,buffer:buffer})}))}))},exports.readv=function(fd,buffers,...args){return"function"==typeof args[args.length-1]?fs.readv(fd,buffers,...args):new Promise(((resolve,reject)=>{fs.readv(fd,buffers,...args,((err,bytesRead,buffers)=>{if(err)return reject(err);resolve({bytesRead:bytesRead,buffers:buffers})}))}))},exports.writev=function(fd,buffers,...args){return"function"==typeof args[args.length-1]?fs.writev(fd,buffers,...args):new Promise(((resolve,reject)=>{fs.writev(fd,buffers,...args,((err,bytesWritten,buffers)=>{if(err)return reject(err);resolve({bytesWritten:bytesWritten,buffers:buffers})}))}))},"function"==typeof fs.realpath.native?exports.realpath.native=u(fs.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(fs$m);var makeDir$1={},utils$9={};const path$e=require$$1;utils$9.checkPath=function(pth){if("win32"===process.platform){if(/[<>:"|?*]/.test(pth.replace(path$e.parse(pth).root,""))){const error=new Error(`Path contains invalid characters: ${pth}`);throw error.code="EINVAL",error}}};const fs$k=fs$m,{checkPath:checkPath}=utils$9,getMode=options=>"number"==typeof options?options:{mode:511,...options}.mode;makeDir$1.makeDir=async(dir,options)=>(checkPath(dir),fs$k.mkdir(dir,{mode:getMode(options),recursive:!0})),makeDir$1.makeDirSync=(dir,options)=>(checkPath(dir),fs$k.mkdirSync(dir,{mode:getMode(options),recursive:!0}));const u$e=universalify$1.fromPromise,{makeDir:_makeDir,makeDirSync:makeDirSync}=makeDir$1,makeDir=u$e(_makeDir);var mkdirs$2={mkdirs:makeDir,mkdirsSync:makeDirSync,mkdirp:makeDir,mkdirpSync:makeDirSync,ensureDir:makeDir,ensureDirSync:makeDirSync};const u$d=universalify$1.fromPromise,fs$j=fs$m;var pathExists_1={pathExists:u$d((function(path){return fs$j.access(path).then((()=>!0)).catch((()=>!1))})),pathExistsSync:fs$j.existsSync};const fs$i=fs$m;var utimes={utimesMillis:(0,universalify$1.fromPromise)((async function(path,atime,mtime){const fd=await fs$i.open(path,"r+");let closeErr=null;try{await fs$i.futimes(fd,atime,mtime)}finally{try{await fs$i.close(fd)}catch(e){closeErr=e}}if(closeErr)throw closeErr})),utimesMillisSync:function(path,atime,mtime){const fd=fs$i.openSync(path,"r+");return fs$i.futimesSync(fd,atime,mtime),fs$i.closeSync(fd)}};const fs$h=fs$m,path$d=require$$1,u$b=universalify$1.fromPromise;function areIdentical$2(srcStat,destStat){return destStat.ino&&destStat.dev&&destStat.ino===srcStat.ino&&destStat.dev===srcStat.dev}function isSrcSubdir(src,dest){const srcArr=path$d.resolve(src).split(path$d.sep).filter((i=>i)),destArr=path$d.resolve(dest).split(path$d.sep).filter((i=>i));return srcArr.every(((cur,i)=>destArr[i]===cur))}function errMsg(src,dest,funcName){return`Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`}var stat$8={checkPaths:u$b((async function(src,dest,funcName,opts){const{srcStat:srcStat,destStat:destStat}=await function(src,dest,opts){const statFunc=opts.dereference?file=>fs$h.stat(file,{bigint:!0}):file=>fs$h.lstat(file,{bigint:!0});return Promise.all([statFunc(src),statFunc(dest).catch((err=>{if("ENOENT"===err.code)return null;throw err}))]).then((([srcStat,destStat])=>({srcStat:srcStat,destStat:destStat})))}(src,dest,opts);if(destStat){if(areIdentical$2(srcStat,destStat)){const srcBaseName=path$d.basename(src),destBaseName=path$d.basename(dest);if("move"===funcName&&srcBaseName!==destBaseName&&srcBaseName.toLowerCase()===destBaseName.toLowerCase())return{srcStat:srcStat,destStat:destStat,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(srcStat.isDirectory()&&!destStat.isDirectory())throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`);if(!srcStat.isDirectory()&&destStat.isDirectory())throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)}if(srcStat.isDirectory()&&isSrcSubdir(src,dest))throw new Error(errMsg(src,dest,funcName));return{srcStat:srcStat,destStat:destStat}})),checkPathsSync:function(src,dest,funcName,opts){const{srcStat:srcStat,destStat:destStat}=function(src,dest,opts){let destStat;const statFunc=opts.dereference?file=>fs$h.statSync(file,{bigint:!0}):file=>fs$h.lstatSync(file,{bigint:!0}),srcStat=statFunc(src);try{destStat=statFunc(dest)}catch(err){if("ENOENT"===err.code)return{srcStat:srcStat,destStat:null};throw err}return{srcStat:srcStat,destStat:destStat}}(src,dest,opts);if(destStat){if(areIdentical$2(srcStat,destStat)){const srcBaseName=path$d.basename(src),destBaseName=path$d.basename(dest);if("move"===funcName&&srcBaseName!==destBaseName&&srcBaseName.toLowerCase()===destBaseName.toLowerCase())return{srcStat:srcStat,destStat:destStat,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(srcStat.isDirectory()&&!destStat.isDirectory())throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`);if(!srcStat.isDirectory()&&destStat.isDirectory())throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)}if(srcStat.isDirectory()&&isSrcSubdir(src,dest))throw new Error(errMsg(src,dest,funcName));return{srcStat:srcStat,destStat:destStat}},checkParentPaths:u$b((async function checkParentPaths(src,srcStat,dest,funcName){const srcParent=path$d.resolve(path$d.dirname(src)),destParent=path$d.resolve(path$d.dirname(dest));if(destParent===srcParent||destParent===path$d.parse(destParent).root)return;let destStat;try{destStat=await fs$h.stat(destParent,{bigint:!0})}catch(err){if("ENOENT"===err.code)return;throw err}if(areIdentical$2(srcStat,destStat))throw new Error(errMsg(src,dest,funcName));return checkParentPaths(src,srcStat,destParent,funcName)})),checkParentPathsSync:function checkParentPathsSync(src,srcStat,dest,funcName){const srcParent=path$d.resolve(path$d.dirname(src)),destParent=path$d.resolve(path$d.dirname(dest));if(destParent===srcParent||destParent===path$d.parse(destParent).root)return;let destStat;try{destStat=fs$h.statSync(destParent,{bigint:!0})}catch(err){if("ENOENT"===err.code)return;throw err}if(areIdentical$2(srcStat,destStat))throw new Error(errMsg(src,dest,funcName));return checkParentPathsSync(src,srcStat,destParent,funcName)},isSrcSubdir:isSrcSubdir,areIdentical:areIdentical$2};const fs$g=fs$m,path$c=require$$1,{mkdirs:mkdirs$1}=mkdirs$2,{pathExists:pathExists$5}=pathExists_1,{utimesMillis:utimesMillis}=utimes,stat$7=stat$8;async function runFilter(src,dest,opts){return!opts.filter||opts.filter(src,dest)}async function getStatsAndPerformCopy(destStat,src,dest,opts){const statFn=opts.dereference?fs$g.stat:fs$g.lstat,srcStat=await statFn(src);if(srcStat.isDirectory())return async function(srcStat,destStat,src,dest,opts){destStat||await fs$g.mkdir(dest);const items=await fs$g.readdir(src);await Promise.all(items.map((async item=>{const srcItem=path$c.join(src,item),destItem=path$c.join(dest,item);if(!await runFilter(srcItem,destItem,opts))return;const{destStat:destStat}=await stat$7.checkPaths(srcItem,destItem,"copy",opts);return getStatsAndPerformCopy(destStat,srcItem,destItem,opts)}))),destStat||await fs$g.chmod(dest,srcStat.mode)}(srcStat,destStat,src,dest,opts);if(srcStat.isFile()||srcStat.isCharacterDevice()||srcStat.isBlockDevice())return async function(srcStat,destStat,src,dest,opts){if(!destStat)return copyFile$1(srcStat,src,dest,opts);if(opts.overwrite)return await fs$g.unlink(dest),copyFile$1(srcStat,src,dest,opts);if(opts.errorOnExist)throw new Error(`'${dest}' already exists`)}(srcStat,destStat,src,dest,opts);if(srcStat.isSymbolicLink())return async function(destStat,src,dest,opts){let resolvedSrc=await fs$g.readlink(src);opts.dereference&&(resolvedSrc=path$c.resolve(process.cwd(),resolvedSrc));if(!destStat)return fs$g.symlink(resolvedSrc,dest);let resolvedDest=null;try{resolvedDest=await fs$g.readlink(dest)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return fs$g.symlink(resolvedSrc,dest);throw e}opts.dereference&&(resolvedDest=path$c.resolve(process.cwd(),resolvedDest));if(stat$7.isSrcSubdir(resolvedSrc,resolvedDest))throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`);if(stat$7.isSrcSubdir(resolvedDest,resolvedSrc))throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`);return await fs$g.unlink(dest),fs$g.symlink(resolvedSrc,dest)}(destStat,src,dest,opts);if(srcStat.isSocket())throw new Error(`Cannot copy a socket file: ${src}`);if(srcStat.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${src}`);throw new Error(`Unknown file: ${src}`)}async function copyFile$1(srcStat,src,dest,opts){if(await fs$g.copyFile(src,dest),opts.preserveTimestamps){0==(128&srcStat.mode)&&await function(dest,srcMode){return fs$g.chmod(dest,128|srcMode)}(dest,srcStat.mode);const updatedSrcStat=await fs$g.stat(src);await utimesMillis(dest,updatedSrcStat.atime,updatedSrcStat.mtime)}return fs$g.chmod(dest,srcStat.mode)}var copy_1=async function(src,dest,opts={}){"function"==typeof opts&&(opts={filter:opts}),opts.clobber=!("clobber"in opts)||!!opts.clobber,opts.overwrite="overwrite"in opts?!!opts.overwrite:opts.clobber,opts.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:srcStat,destStat:destStat}=await stat$7.checkPaths(src,dest,"copy",opts);if(await stat$7.checkParentPaths(src,srcStat,dest,"copy"),!await runFilter(src,dest,opts))return;const destParent=path$c.dirname(dest);await pathExists$5(destParent)||await mkdirs$1(destParent),await getStatsAndPerformCopy(destStat,src,dest,opts)};const fs$f=gracefulFs,path$b=require$$1,mkdirsSync$1=mkdirs$2.mkdirsSync,utimesMillisSync=utimes.utimesMillisSync,stat$6=stat$8;function getStats(destStat,src,dest,opts){const srcStat=(opts.dereference?fs$f.statSync:fs$f.lstatSync)(src);if(srcStat.isDirectory())return function(srcStat,destStat,src,dest,opts){return destStat?copyDir(src,dest,opts):function(srcMode,src,dest,opts){return fs$f.mkdirSync(dest),copyDir(src,dest,opts),setDestMode(dest,srcMode)}(srcStat.mode,src,dest,opts)}(srcStat,destStat,src,dest,opts);if(srcStat.isFile()||srcStat.isCharacterDevice()||srcStat.isBlockDevice())return function(srcStat,destStat,src,dest,opts){return destStat?function(srcStat,src,dest,opts){if(opts.overwrite)return fs$f.unlinkSync(dest),copyFile(srcStat,src,dest,opts);if(opts.errorOnExist)throw new Error(`'${dest}' already exists`)}(srcStat,src,dest,opts):copyFile(srcStat,src,dest,opts)}(srcStat,destStat,src,dest,opts);if(srcStat.isSymbolicLink())return function(destStat,src,dest,opts){let resolvedSrc=fs$f.readlinkSync(src);opts.dereference&&(resolvedSrc=path$b.resolve(process.cwd(),resolvedSrc));if(destStat){let resolvedDest;try{resolvedDest=fs$f.readlinkSync(dest)}catch(err){if("EINVAL"===err.code||"UNKNOWN"===err.code)return fs$f.symlinkSync(resolvedSrc,dest);throw err}if(opts.dereference&&(resolvedDest=path$b.resolve(process.cwd(),resolvedDest)),stat$6.isSrcSubdir(resolvedSrc,resolvedDest))throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`);if(stat$6.isSrcSubdir(resolvedDest,resolvedSrc))throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`);return function(resolvedSrc,dest){return fs$f.unlinkSync(dest),fs$f.symlinkSync(resolvedSrc,dest)}(resolvedSrc,dest)}return fs$f.symlinkSync(resolvedSrc,dest)}(destStat,src,dest,opts);if(srcStat.isSocket())throw new Error(`Cannot copy a socket file: ${src}`);if(srcStat.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${src}`);throw new Error(`Unknown file: ${src}`)}function copyFile(srcStat,src,dest,opts){return fs$f.copyFileSync(src,dest),opts.preserveTimestamps&&function(srcMode,src,dest){(function(srcMode){return 0==(128&srcMode)})(srcMode)&&function(dest,srcMode){setDestMode(dest,128|srcMode)}(dest,srcMode);(function(src,dest){const updatedSrcStat=fs$f.statSync(src);utimesMillisSync(dest,updatedSrcStat.atime,updatedSrcStat.mtime)})(src,dest)}(srcStat.mode,src,dest),setDestMode(dest,srcStat.mode)}function setDestMode(dest,srcMode){return fs$f.chmodSync(dest,srcMode)}function copyDir(src,dest,opts){fs$f.readdirSync(src).forEach((item=>function(item,src,dest,opts){const srcItem=path$b.join(src,item),destItem=path$b.join(dest,item);if(opts.filter&&!opts.filter(srcItem,destItem))return;const{destStat:destStat}=stat$6.checkPathsSync(srcItem,destItem,"copy",opts);return getStats(destStat,srcItem,destItem,opts)}(item,src,dest,opts)))}var copySync_1=function(src,dest,opts){"function"==typeof opts&&(opts={filter:opts}),(opts=opts||{}).clobber=!("clobber"in opts)||!!opts.clobber,opts.overwrite="overwrite"in opts?!!opts.overwrite:opts.clobber,opts.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:srcStat,destStat:destStat}=stat$6.checkPathsSync(src,dest,"copy",opts);if(stat$6.checkParentPathsSync(src,srcStat,dest,"copy"),opts.filter&&!opts.filter(src,dest))return;const destParent=path$b.dirname(dest);return fs$f.existsSync(destParent)||mkdirsSync$1(destParent),getStats(destStat,src,dest,opts)};var copy$1={copy:(0,universalify$1.fromPromise)(copy_1),copySync:copySync_1};const fs$e=gracefulFs;var remove_1={remove:(0,universalify$1.fromCallback)((function(path,callback){fs$e.rm(path,{recursive:!0,force:!0},callback)})),removeSync:function(path){fs$e.rmSync(path,{recursive:!0,force:!0})}};const u$8=universalify$1.fromPromise,fs$d=fs$m,path$a=require$$1,mkdir$3=mkdirs$2,remove$1=remove_1,emptyDir=u$8((async function(dir){let items;try{items=await fs$d.readdir(dir)}catch{return mkdir$3.mkdirs(dir)}return Promise.all(items.map((item=>remove$1.remove(path$a.join(dir,item)))))}));function emptyDirSync(dir){let items;try{items=fs$d.readdirSync(dir)}catch{return mkdir$3.mkdirsSync(dir)}items.forEach((item=>{item=path$a.join(dir,item),remove$1.removeSync(item)}))}var empty={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:emptyDir,emptydir:emptyDir};const u$7=universalify$1.fromPromise,path$9=require$$1,fs$c=fs$m,mkdir$2=mkdirs$2;var file={createFile:u$7((async function(file){let stats;try{stats=await fs$c.stat(file)}catch{}if(stats&&stats.isFile())return;const dir=path$9.dirname(file);let dirStats=null;try{dirStats=await fs$c.stat(dir)}catch(err){if("ENOENT"===err.code)return await mkdir$2.mkdirs(dir),void await fs$c.writeFile(file,"");throw err}dirStats.isDirectory()?await fs$c.writeFile(file,""):await fs$c.readdir(dir)})),createFileSync:function(file){let stats;try{stats=fs$c.statSync(file)}catch{}if(stats&&stats.isFile())return;const dir=path$9.dirname(file);try{fs$c.statSync(dir).isDirectory()||fs$c.readdirSync(dir)}catch(err){if(!err||"ENOENT"!==err.code)throw err;mkdir$2.mkdirsSync(dir)}fs$c.writeFileSync(file,"")}};const u$6=universalify$1.fromPromise,path$8=require$$1,fs$b=fs$m,mkdir$1=mkdirs$2,{pathExists:pathExists$4}=pathExists_1,{areIdentical:areIdentical$1}=stat$8;var link={createLink:u$6((async function(srcpath,dstpath){let dstStat,srcStat;try{dstStat=await fs$b.lstat(dstpath)}catch{}try{srcStat=await fs$b.lstat(srcpath)}catch(err){throw err.message=err.message.replace("lstat","ensureLink"),err}if(dstStat&&areIdentical$1(srcStat,dstStat))return;const dir=path$8.dirname(dstpath);await pathExists$4(dir)||await mkdir$1.mkdirs(dir),await fs$b.link(srcpath,dstpath)})),createLinkSync:function(srcpath,dstpath){let dstStat;try{dstStat=fs$b.lstatSync(dstpath)}catch{}try{const srcStat=fs$b.lstatSync(srcpath);if(dstStat&&areIdentical$1(srcStat,dstStat))return}catch(err){throw err.message=err.message.replace("lstat","ensureLink"),err}const dir=path$8.dirname(dstpath);return fs$b.existsSync(dir)||mkdir$1.mkdirsSync(dir),fs$b.linkSync(srcpath,dstpath)}};const path$7=require$$1,fs$a=fs$m,{pathExists:pathExists$3}=pathExists_1;var symlinkPaths_1={symlinkPaths:(0,universalify$1.fromPromise)((async function(srcpath,dstpath){if(path$7.isAbsolute(srcpath)){try{await fs$a.lstat(srcpath)}catch(err){throw err.message=err.message.replace("lstat","ensureSymlink"),err}return{toCwd:srcpath,toDst:srcpath}}const dstdir=path$7.dirname(dstpath),relativeToDst=path$7.join(dstdir,srcpath);if(await pathExists$3(relativeToDst))return{toCwd:relativeToDst,toDst:srcpath};try{await fs$a.lstat(srcpath)}catch(err){throw err.message=err.message.replace("lstat","ensureSymlink"),err}return{toCwd:srcpath,toDst:path$7.relative(dstdir,srcpath)}})),symlinkPathsSync:function(srcpath,dstpath){if(path$7.isAbsolute(srcpath)){if(!fs$a.existsSync(srcpath))throw new Error("absolute srcpath does not exist");return{toCwd:srcpath,toDst:srcpath}}const dstdir=path$7.dirname(dstpath),relativeToDst=path$7.join(dstdir,srcpath);if(fs$a.existsSync(relativeToDst))return{toCwd:relativeToDst,toDst:srcpath};if(!fs$a.existsSync(srcpath))throw new Error("relative srcpath does not exist");return{toCwd:srcpath,toDst:path$7.relative(dstdir,srcpath)}}};const fs$9=fs$m;var symlinkType_1={symlinkType:(0,universalify$1.fromPromise)((async function(srcpath,type){if(type)return type;let stats;try{stats=await fs$9.lstat(srcpath)}catch{return"file"}return stats&&stats.isDirectory()?"dir":"file"})),symlinkTypeSync:function(srcpath,type){if(type)return type;let stats;try{stats=fs$9.lstatSync(srcpath)}catch{return"file"}return stats&&stats.isDirectory()?"dir":"file"}};const u$3=universalify$1.fromPromise,path$6=require$$1,fs$8=fs$m,{mkdirs:mkdirs,mkdirsSync:mkdirsSync}=mkdirs$2,{symlinkPaths:symlinkPaths,symlinkPathsSync:symlinkPathsSync}=symlinkPaths_1,{symlinkType:symlinkType,symlinkTypeSync:symlinkTypeSync}=symlinkType_1,{pathExists:pathExists$2}=pathExists_1,{areIdentical:areIdentical}=stat$8;var symlink={createSymlink:u$3((async function(srcpath,dstpath,type){let stats;try{stats=await fs$8.lstat(dstpath)}catch{}if(stats&&stats.isSymbolicLink()){const[srcStat,dstStat]=await Promise.all([fs$8.stat(srcpath),fs$8.stat(dstpath)]);if(areIdentical(srcStat,dstStat))return}const relative=await symlinkPaths(srcpath,dstpath);srcpath=relative.toDst;const toType=await symlinkType(relative.toCwd,type),dir=path$6.dirname(dstpath);return await pathExists$2(dir)||await mkdirs(dir),fs$8.symlink(srcpath,dstpath,toType)})),createSymlinkSync:function(srcpath,dstpath,type){let stats;try{stats=fs$8.lstatSync(dstpath)}catch{}if(stats&&stats.isSymbolicLink()){const srcStat=fs$8.statSync(srcpath),dstStat=fs$8.statSync(dstpath);if(areIdentical(srcStat,dstStat))return}const relative=symlinkPathsSync(srcpath,dstpath);srcpath=relative.toDst,type=symlinkTypeSync(relative.toCwd,type);const dir=path$6.dirname(dstpath);return fs$8.existsSync(dir)||mkdirsSync(dir),fs$8.symlinkSync(srcpath,dstpath,type)}};const{createFile:createFile,createFileSync:createFileSync}=file,{createLink:createLink,createLinkSync:createLinkSync}=link,{createSymlink:createSymlink,createSymlinkSync:createSymlinkSync}=symlink;var ensure={createFile:createFile,createFileSync:createFileSync,ensureFile:createFile,ensureFileSync:createFileSync,createLink:createLink,createLinkSync:createLinkSync,ensureLink:createLink,ensureLinkSync:createLinkSync,createSymlink:createSymlink,createSymlinkSync:createSymlinkSync,ensureSymlink:createSymlink,ensureSymlinkSync:createSymlinkSync};var utils$8={stringify:function(obj,{EOL:EOL="\n",finalEOL:finalEOL=!0,replacer:replacer=null,spaces:spaces}={}){const EOF=finalEOL?EOL:"";return JSON.stringify(obj,replacer,spaces).replace(/\n/g,EOL)+EOF},stripBom:function(content){return Buffer.isBuffer(content)&&(content=content.toString("utf8")),content.replace(/^\uFEFF/,"")}};let _fs;try{_fs=gracefulFs}catch(_){_fs=require$$0$5}const universalify=universalify$1,{stringify:stringify$7,stripBom:stripBom}=utils$8;const readFile=universalify.fromPromise((async function(file,options={}){"string"==typeof options&&(options={encoding:options});const fs=options.fs||_fs,shouldThrow=!("throws"in options)||options.throws;let obj,data=await universalify.fromCallback(fs.readFile)(file,options);data=stripBom(data);try{obj=JSON.parse(data,options?options.reviver:null)}catch(err){if(shouldThrow)throw err.message=`${file}: ${err.message}`,err;return null}return obj}));const writeFile=universalify.fromPromise((async function(file,obj,options={}){const fs=options.fs||_fs,str=stringify$7(obj,options);await universalify.fromCallback(fs.writeFile)(file,str,options)}));const jsonfile$1={readFile:readFile,readFileSync:function(file,options={}){"string"==typeof options&&(options={encoding:options});const fs=options.fs||_fs,shouldThrow=!("throws"in options)||options.throws;try{let content=fs.readFileSync(file,options);return content=stripBom(content),JSON.parse(content,options.reviver)}catch(err){if(shouldThrow)throw err.message=`${file}: ${err.message}`,err;return null}},writeFile:writeFile,writeFileSync:function(file,obj,options={}){const fs=options.fs||_fs,str=stringify$7(obj,options);return fs.writeFileSync(file,str,options)}};var jsonfile={readJson:jsonfile$1.readFile,readJsonSync:jsonfile$1.readFileSync,writeJson:jsonfile$1.writeFile,writeJsonSync:jsonfile$1.writeFileSync};const u$2=universalify$1.fromPromise,fs$7=fs$m,path$5=require$$1,mkdir=mkdirs$2,pathExists$1=pathExists_1.pathExists;var outputFile_1={outputFile:u$2((async function(file,data,encoding="utf-8"){const dir=path$5.dirname(file);return await pathExists$1(dir)||await mkdir.mkdirs(dir),fs$7.writeFile(file,data,encoding)})),outputFileSync:function(file,...args){const dir=path$5.dirname(file);fs$7.existsSync(dir)||mkdir.mkdirsSync(dir),fs$7.writeFileSync(file,...args)}};const{stringify:stringify$6}=utils$8,{outputFile:outputFile}=outputFile_1;var outputJson_1=async function(file,data,options={}){const str=stringify$6(data,options);await outputFile(file,str,options)};const{stringify:stringify$5}=utils$8,{outputFileSync:outputFileSync}=outputFile_1;var outputJsonSync_1=function(file,data,options){const str=stringify$5(data,options);outputFileSync(file,str,options)};const u$1=universalify$1.fromPromise,jsonFile=jsonfile;jsonFile.outputJson=u$1(outputJson_1),jsonFile.outputJsonSync=outputJsonSync_1,jsonFile.outputJSON=jsonFile.outputJson,jsonFile.outputJSONSync=jsonFile.outputJsonSync,jsonFile.writeJSON=jsonFile.writeJson,jsonFile.writeJSONSync=jsonFile.writeJsonSync,jsonFile.readJSON=jsonFile.readJson,jsonFile.readJSONSync=jsonFile.readJsonSync;var json=jsonFile;const fs$6=fs$m,path$4=require$$1,{copy:copy}=copy$1,{remove:remove}=remove_1,{mkdirp:mkdirp}=mkdirs$2,{pathExists:pathExists}=pathExists_1,stat$5=stat$8;var move_1=async function(src,dest,opts={}){const overwrite=opts.overwrite||opts.clobber||!1,{srcStat:srcStat,isChangingCase:isChangingCase=!1}=await stat$5.checkPaths(src,dest,"move",opts);await stat$5.checkParentPaths(src,srcStat,dest,"move");const destParent=path$4.dirname(dest);return path$4.parse(destParent).root!==destParent&&await mkdirp(destParent),async function(src,dest,overwrite,isChangingCase){if(!isChangingCase)if(overwrite)await remove(dest);else if(await pathExists(dest))throw new Error("dest already exists.");try{await fs$6.rename(src,dest)}catch(err){if("EXDEV"!==err.code)throw err;await async function(src,dest,overwrite){const opts={overwrite:overwrite,errorOnExist:!0,preserveTimestamps:!0};return await copy(src,dest,opts),remove(src)}(src,dest,overwrite)}}(src,dest,overwrite,isChangingCase)};const fs$5=gracefulFs,path$3=require$$1,copySync=copy$1.copySync,removeSync=remove_1.removeSync,mkdirpSync=mkdirs$2.mkdirpSync,stat$4=stat$8;function rename(src,dest,overwrite){try{fs$5.renameSync(src,dest)}catch(err){if("EXDEV"!==err.code)throw err;return function(src,dest,overwrite){const opts={overwrite:overwrite,errorOnExist:!0,preserveTimestamps:!0};return copySync(src,dest,opts),removeSync(src)}(src,dest,overwrite)}}var moveSync_1=function(src,dest,opts){const overwrite=(opts=opts||{}).overwrite||opts.clobber||!1,{srcStat:srcStat,isChangingCase:isChangingCase=!1}=stat$4.checkPathsSync(src,dest,"move",opts);return stat$4.checkParentPathsSync(src,srcStat,dest,"move"),function(dest){const parent=path$3.dirname(dest);return path$3.parse(parent).root===parent}(dest)||mkdirpSync(path$3.dirname(dest)),function(src,dest,overwrite,isChangingCase){if(isChangingCase)return rename(src,dest,overwrite);if(overwrite)return removeSync(dest),rename(src,dest,overwrite);if(fs$5.existsSync(dest))throw new Error("dest already exists.");return rename(src,dest,overwrite)}(src,dest,overwrite,isChangingCase)};var move={move:(0,universalify$1.fromPromise)(move_1),moveSync:moveSync_1},fs$4=getDefaultExportFromCjs({...fs$m,...copy$1,...empty,...ensure,...json,...mkdirs$2,...move,...outputFile_1,...pathExists_1,...remove_1}),chokidar={},utils$7={};const path$2=require$$1,POSIX_CHARS={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},WINDOWS_CHARS={...POSIX_CHARS,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};var constants$5={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:path$2.sep,extglobChars:chars=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${chars.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:win32=>!0===win32?WINDOWS_CHARS:POSIX_CHARS};!function(exports){const path=require$$1,win32="win32"===process.platform,{REGEX_BACKSLASH:REGEX_BACKSLASH,REGEX_REMOVE_BACKSLASH:REGEX_REMOVE_BACKSLASH,REGEX_SPECIAL_CHARS:REGEX_SPECIAL_CHARS,REGEX_SPECIAL_CHARS_GLOBAL:REGEX_SPECIAL_CHARS_GLOBAL}=constants$5;exports.isObject=val=>null!==val&&"object"==typeof val&&!Array.isArray(val),exports.hasRegexChars=str=>REGEX_SPECIAL_CHARS.test(str),exports.isRegexChar=str=>1===str.length&&exports.hasRegexChars(str),exports.escapeRegex=str=>str.replace(REGEX_SPECIAL_CHARS_GLOBAL,"\\$1"),exports.toPosixSlashes=str=>str.replace(REGEX_BACKSLASH,"/"),exports.removeBackslashes=str=>str.replace(REGEX_REMOVE_BACKSLASH,(match=>"\\"===match?"":match)),exports.supportsLookbehinds=()=>{const segs=process.version.slice(1).split(".").map(Number);return 3===segs.length&&segs[0]>=9||8===segs[0]&&segs[1]>=10},exports.isWindows=options=>options&&"boolean"==typeof options.windows?options.windows:!0===win32||"\\"===path.sep,exports.escapeLast=(input,char,lastIdx)=>{const idx=input.lastIndexOf(char,lastIdx);return-1===idx?input:"\\"===input[idx-1]?exports.escapeLast(input,char,idx-1):`${input.slice(0,idx)}\\${input.slice(idx)}`},exports.removePrefix=(input,state={})=>{let output=input;return output.startsWith("./")&&(output=output.slice(2),state.prefix="./"),output},exports.wrapOutput=(input,state={},options={})=>{let output=`${options.contains?"":"^"}(?:${input})${options.contains?"":"$"}`;return!0===state.negated&&(output=`(?:^(?!${output}).*$)`),output}}(utils$7);const utils$6=utils$7,{CHAR_ASTERISK:CHAR_ASTERISK,CHAR_AT:CHAR_AT,CHAR_BACKWARD_SLASH:CHAR_BACKWARD_SLASH,CHAR_COMMA:CHAR_COMMA$1,CHAR_DOT:CHAR_DOT$1,CHAR_EXCLAMATION_MARK:CHAR_EXCLAMATION_MARK,CHAR_FORWARD_SLASH:CHAR_FORWARD_SLASH,CHAR_LEFT_CURLY_BRACE:CHAR_LEFT_CURLY_BRACE$1,CHAR_LEFT_PARENTHESES:CHAR_LEFT_PARENTHESES$1,CHAR_LEFT_SQUARE_BRACKET:CHAR_LEFT_SQUARE_BRACKET$1,CHAR_PLUS:CHAR_PLUS,CHAR_QUESTION_MARK:CHAR_QUESTION_MARK,CHAR_RIGHT_CURLY_BRACE:CHAR_RIGHT_CURLY_BRACE$1,CHAR_RIGHT_PARENTHESES:CHAR_RIGHT_PARENTHESES$1,CHAR_RIGHT_SQUARE_BRACKET:CHAR_RIGHT_SQUARE_BRACKET$1}=constants$5,isPathSeparator=code=>code===CHAR_FORWARD_SLASH||code===CHAR_BACKWARD_SLASH,depth=token=>{!0!==token.isPrefix&&(token.depth=token.isGlobstar?1/0:1)};var scan_1=(input,options)=>{const opts=options||{},length=input.length-1,scanToEnd=!0===opts.parts||!0===opts.scanToEnd,slashes=[],tokens=[],parts=[];let prev,code,str=input,index=-1,start=0,lastIndex=0,isBrace=!1,isBracket=!1,isGlob=!1,isExtglob=!1,isGlobstar=!1,braceEscaped=!1,backslashes=!1,negated=!1,negatedExtglob=!1,finished=!1,braces=0,token={value:"",depth:0,isGlob:!1};const eos=()=>index>=length,advance=()=>(prev=code,str.charCodeAt(++index));for(;index<length;){let next;if(code=advance(),code!==CHAR_BACKWARD_SLASH){if(!0===braceEscaped||code===CHAR_LEFT_CURLY_BRACE$1){for(braces++;!0!==eos()&&(code=advance());)if(code!==CHAR_BACKWARD_SLASH)if(code!==CHAR_LEFT_CURLY_BRACE$1){if(!0!==braceEscaped&&code===CHAR_DOT$1&&(code=advance())===CHAR_DOT$1){if(isBrace=token.isBrace=!0,isGlob=token.isGlob=!0,finished=!0,!0===scanToEnd)continue;break}if(!0!==braceEscaped&&code===CHAR_COMMA$1){if(isBrace=token.isBrace=!0,isGlob=token.isGlob=!0,finished=!0,!0===scanToEnd)continue;break}if(code===CHAR_RIGHT_CURLY_BRACE$1&&(braces--,0===braces)){braceEscaped=!1,isBrace=token.isBrace=!0,finished=!0;break}}else braces++;else backslashes=token.backslashes=!0,advance();if(!0===scanToEnd)continue;break}if(code!==CHAR_FORWARD_SLASH){if(!0!==opts.noext){if(!0===(code===CHAR_PLUS||code===CHAR_AT||code===CHAR_ASTERISK||code===CHAR_QUESTION_MARK||code===CHAR_EXCLAMATION_MARK)&&str.charCodeAt(index+1)===CHAR_LEFT_PARENTHESES$1){if(isGlob=token.isGlob=!0,isExtglob=token.isExtglob=!0,finished=!0,code===CHAR_EXCLAMATION_MARK&&index===start&&(negatedExtglob=!0),!0===scanToEnd){for(;!0!==eos()&&(code=advance());)if(code!==CHAR_BACKWARD_SLASH){if(code===CHAR_RIGHT_PARENTHESES$1){isGlob=token.isGlob=!0,finished=!0;break}}else backslashes=token.backslashes=!0,code=advance();continue}break}}if(code===CHAR_ASTERISK){if(prev===CHAR_ASTERISK&&(isGlobstar=token.isGlobstar=!0),isGlob=token.isGlob=!0,finished=!0,!0===scanToEnd)continue;break}if(code===CHAR_QUESTION_MARK){if(isGlob=token.isGlob=!0,finished=!0,!0===scanToEnd)continue;break}if(code===CHAR_LEFT_SQUARE_BRACKET$1){for(;!0!==eos()&&(next=advance());)if(next!==CHAR_BACKWARD_SLASH){if(next===CHAR_RIGHT_SQUARE_BRACKET$1){isBracket=token.isBracket=!0,isGlob=token.isGlob=!0,finished=!0;break}}else backslashes=token.backslashes=!0,advance();if(!0===scanToEnd)continue;break}if(!0===opts.nonegate||code!==CHAR_EXCLAMATION_MARK||index!==start){if(!0!==opts.noparen&&code===CHAR_LEFT_PARENTHESES$1){if(isGlob=token.isGlob=!0,!0===scanToEnd){for(;!0!==eos()&&(code=advance());)if(code!==CHAR_LEFT_PARENTHESES$1){if(code===CHAR_RIGHT_PARENTHESES$1){finished=!0;break}}else backslashes=token.backslashes=!0,code=advance();continue}break}if(!0===isGlob){if(finished=!0,!0===scanToEnd)continue;break}}else negated=token.negated=!0,start++}else{if(slashes.push(index),tokens.push(token),token={value:"",depth:0,isGlob:!1},!0===finished)continue;if(prev===CHAR_DOT$1&&index===start+1){start+=2;continue}lastIndex=index+1}}else backslashes=token.backslashes=!0,code=advance(),code===CHAR_LEFT_CURLY_BRACE$1&&(braceEscaped=!0)}!0===opts.noext&&(isExtglob=!1,isGlob=!1);let base=str,prefix="",glob="";start>0&&(prefix=str.slice(0,start),str=str.slice(start),lastIndex-=start),base&&!0===isGlob&&lastIndex>0?(base=str.slice(0,lastIndex),glob=str.slice(lastIndex)):!0===isGlob?(base="",glob=str):base=str,base&&""!==base&&"/"!==base&&base!==str&&isPathSeparator(base.charCodeAt(base.length-1))&&(base=base.slice(0,-1)),!0===opts.unescape&&(glob&&(glob=utils$6.removeBackslashes(glob)),base&&!0===backslashes&&(base=utils$6.removeBackslashes(base)));const state={prefix:prefix,input:input,start:start,base:base,glob:glob,isBrace:isBrace,isBracket:isBracket,isGlob:isGlob,isExtglob:isExtglob,isGlobstar:isGlobstar,negated:negated,negatedExtglob:negatedExtglob};if(!0===opts.tokens&&(state.maxDepth=0,isPathSeparator(code)||tokens.push(token),state.tokens=tokens),!0===opts.parts||!0===opts.tokens){let prevIndex;for(let idx=0;idx<slashes.length;idx++){const n=prevIndex?prevIndex+1:start,i=slashes[idx],value=input.slice(n,i);opts.tokens&&(0===idx&&0!==start?(tokens[idx].isPrefix=!0,tokens[idx].value=prefix):tokens[idx].value=value,depth(tokens[idx]),state.maxDepth+=tokens[idx].depth),0===idx&&""===value||parts.push(value),prevIndex=i}if(prevIndex&&prevIndex+1<input.length){const value=input.slice(prevIndex+1);parts.push(value),opts.tokens&&(tokens[tokens.length-1].value=value,depth(tokens[tokens.length-1]),state.maxDepth+=tokens[tokens.length-1].depth)}state.slashes=slashes,state.parts=parts}return state};const constants$4=constants$5,utils$5=utils$7,{MAX_LENGTH:MAX_LENGTH$1,POSIX_REGEX_SOURCE:POSIX_REGEX_SOURCE,REGEX_NON_SPECIAL_CHARS:REGEX_NON_SPECIAL_CHARS,REGEX_SPECIAL_CHARS_BACKREF:REGEX_SPECIAL_CHARS_BACKREF,REPLACEMENTS:REPLACEMENTS}=constants$4,expandRange=(args,options)=>{if("function"==typeof options.expandRange)return options.expandRange(...args,options);args.sort();const value=`[${args.join("-")}]`;try{new RegExp(value)}catch(ex){return args.map((v=>utils$5.escapeRegex(v))).join("..")}return value},syntaxError=(type,char)=>`Missing ${type}: "${char}" - use "\\\\${char}" to match literal characters`,parse$8=(input,options)=>{if("string"!=typeof input)throw new TypeError("Expected a string");input=REPLACEMENTS[input]||input;const opts={...options},max="number"==typeof opts.maxLength?Math.min(MAX_LENGTH$1,opts.maxLength):MAX_LENGTH$1;let len=input.length;if(len>max)throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);const bos={type:"bos",value:"",output:opts.prepend||""},tokens=[bos],capture=opts.capture?"":"?:",win32=utils$5.isWindows(options),PLATFORM_CHARS=constants$4.globChars(win32),EXTGLOB_CHARS=constants$4.extglobChars(PLATFORM_CHARS),{DOT_LITERAL:DOT_LITERAL,PLUS_LITERAL:PLUS_LITERAL,SLASH_LITERAL:SLASH_LITERAL,ONE_CHAR:ONE_CHAR,DOTS_SLASH:DOTS_SLASH,NO_DOT:NO_DOT,NO_DOT_SLASH:NO_DOT_SLASH,NO_DOTS_SLASH:NO_DOTS_SLASH,QMARK:QMARK,QMARK_NO_DOT:QMARK_NO_DOT,STAR:STAR,START_ANCHOR:START_ANCHOR}=PLATFORM_CHARS,globstar=opts=>`(${capture}(?:(?!${START_ANCHOR}${opts.dot?DOTS_SLASH:DOT_LITERAL}).)*?)`,nodot=opts.dot?"":NO_DOT,qmarkNoDot=opts.dot?QMARK:QMARK_NO_DOT;let star=!0===opts.bash?globstar(opts):STAR;opts.capture&&(star=`(${star})`),"boolean"==typeof opts.noext&&(opts.noextglob=opts.noext);const state={input:input,index:-1,start:0,dot:!0===opts.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:tokens};input=utils$5.removePrefix(input,state),len=input.length;const extglobs=[],braces=[],stack=[];let value,prev=bos;const eos=()=>state.index===len-1,peek=state.peek=(n=1)=>input[state.index+n],advance=state.advance=()=>input[++state.index]||"",remaining=()=>input.slice(state.index+1),consume=(value="",num=0)=>{state.consumed+=value,state.index+=num},append=token=>{state.output+=null!=token.output?token.output:token.value,consume(token.value)},negate=()=>{let count=1;for(;"!"===peek()&&("("!==peek(2)||"?"===peek(3));)advance(),state.start++,count++;return count%2!=0&&(state.negated=!0,state.start++,!0)},increment=type=>{state[type]++,stack.push(type)},decrement=type=>{state[type]--,stack.pop()},push=tok=>{if("globstar"===prev.type){const isBrace=state.braces>0&&("comma"===tok.type||"brace"===tok.type),isExtglob=!0===tok.extglob||extglobs.length&&("pipe"===tok.type||"paren"===tok.type);"slash"===tok.type||"paren"===tok.type||isBrace||isExtglob||(state.output=state.output.slice(0,-prev.output.length),prev.type="star",prev.value="*",prev.output=star,state.output+=prev.output)}if(extglobs.length&&"paren"!==tok.type&&(extglobs[extglobs.length-1].inner+=tok.value),(tok.value||tok.output)&&append(tok),prev&&"text"===prev.type&&"text"===tok.type)return prev.value+=tok.value,void(prev.output=(prev.output||"")+tok.value);tok.prev=prev,tokens.push(tok),prev=tok},extglobOpen=(type,value)=>{const token={...EXTGLOB_CHARS[value],conditions:1,inner:""};token.prev=prev,token.parens=state.parens,token.output=state.output;const output=(opts.capture?"(":"")+token.open;increment("parens"),push({type:type,value:value,output:state.output?"":ONE_CHAR}),push({type:"paren",extglob:!0,value:advance(),output:output}),extglobs.push(token)},extglobClose=token=>{let rest,output=token.close+(opts.capture?")":"");if("negate"===token.type){let extglobStar=star;if(token.inner&&token.inner.length>1&&token.inner.includes("/")&&(extglobStar=globstar(opts)),(extglobStar!==star||eos()||/^\)+$/.test(remaining()))&&(output=token.close=`)$))${extglobStar}`),token.inner.includes("*")&&(rest=remaining())&&/^\.[^\\/.]+$/.test(rest)){const expression=parse$8(rest,{...options,fastpaths:!1}).output;output=token.close=`)${expression})${extglobStar})`}"bos"===token.prev.type&&(state.negatedExtglob=!0)}push({type:"paren",extglob:!0,value:value,output:output}),decrement("parens")};if(!1!==opts.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(input)){let backslashes=!1,output=input.replace(REGEX_SPECIAL_CHARS_BACKREF,((m,esc,chars,first,rest,index)=>"\\"===first?(backslashes=!0,m):"?"===first?esc?esc+first+(rest?QMARK.repeat(rest.length):""):0===index?qmarkNoDot+(rest?QMARK.repeat(rest.length):""):QMARK.repeat(chars.length):"."===first?DOT_LITERAL.repeat(chars.length):"*"===first?esc?esc+first+(rest?star:""):star:esc?m:`\\${m}`));return!0===backslashes&&(output=!0===opts.unescape?output.replace(/\\/g,""):output.replace(/\\+/g,(m=>m.length%2==0?"\\\\":m?"\\":""))),output===input&&!0===opts.contains?(state.output=input,state):(state.output=utils$5.wrapOutput(output,state,options),state)}for(;!eos();){if(value=advance(),"\0"===value)continue;if("\\"===value){const next=peek();if("/"===next&&!0!==opts.bash)continue;if("."===next||";"===next)continue;if(!next){value+="\\",push({type:"text",value:value});continue}const match=/^\\+/.exec(remaining());let slashes=0;if(match&&match[0].length>2&&(slashes=match[0].length,state.index+=slashes,slashes%2!=0&&(value+="\\")),!0===opts.unescape?value=advance():value+=advance(),0===state.brackets){push({type:"text",value:value});continue}}if(state.brackets>0&&("]"!==value||"["===prev.value||"[^"===prev.value)){if(!1!==opts.posix&&":"===value){const inner=prev.value.slice(1);if(inner.includes("[")&&(prev.posix=!0,inner.includes(":"))){const idx=prev.value.lastIndexOf("["),pre=prev.value.slice(0,idx),rest=prev.value.slice(idx+2),posix=POSIX_REGEX_SOURCE[rest];if(posix){prev.value=pre+posix,state.backtrack=!0,advance(),bos.output||1!==tokens.indexOf(prev)||(bos.output=ONE_CHAR);continue}}}("["===value&&":"!==peek()||"-"===value&&"]"===peek())&&(value=`\\${value}`),"]"!==value||"["!==prev.value&&"[^"!==prev.value||(value=`\\${value}`),!0===opts.posix&&"!"===value&&"["===prev.value&&(value="^"),prev.value+=value,append({value:value});continue}if(1===state.quotes&&'"'!==value){value=utils$5.escapeRegex(value),prev.value+=value,append({value:value});continue}if('"'===value){state.quotes=1===state.quotes?0:1,!0===opts.keepQuotes&&push({type:"text",value:value});continue}if("("===value){increment("parens"),push({type:"paren",value:value});continue}if(")"===value){if(0===state.parens&&!0===opts.strictBrackets)throw new SyntaxError(syntaxError("opening","("));const extglob=extglobs[extglobs.length-1];if(extglob&&state.parens===extglob.parens+1){extglobClose(extglobs.pop());continue}push({type:"paren",value:value,output:state.parens?")":"\\)"}),decrement("parens");continue}if("["===value){if(!0!==opts.nobracket&&remaining().includes("]"))increment("brackets");else{if(!0!==opts.nobracket&&!0===opts.strictBrackets)throw new SyntaxError(syntaxError("closing","]"));value=`\\${value}`}push({type:"bracket",value:value});continue}if("]"===value){if(!0===opts.nobracket||prev&&"bracket"===prev.type&&1===prev.value.length){push({type:"text",value:value,output:`\\${value}`});continue}if(0===state.brackets){if(!0===opts.strictBrackets)throw new SyntaxError(syntaxError("opening","["));push({type:"text",value:value,output:`\\${value}`});continue}decrement("brackets");const prevValue=prev.value.slice(1);if(!0===prev.posix||"^"!==prevValue[0]||prevValue.includes("/")||(value=`/${value}`),prev.value+=value,append({value:value}),!1===opts.literalBrackets||utils$5.hasRegexChars(prevValue))continue;const escaped=utils$5.escapeRegex(prev.value);if(state.output=state.output.slice(0,-prev.value.length),!0===opts.literalBrackets){state.output+=escaped,prev.value=escaped;continue}prev.value=`(${capture}${escaped}|${prev.value})`,state.output+=prev.value;continue}if("{"===value&&!0!==opts.nobrace){increment("braces");const open={type:"brace",value:value,output:"(",outputIndex:state.output.length,tokensIndex:state.tokens.length};braces.push(open),push(open);continue}if("}"===value){const brace=braces[braces.length-1];if(!0===opts.nobrace||!brace){push({type:"text",value:value,output:value});continue}let output=")";if(!0===brace.dots){const arr=tokens.slice(),range=[];for(let i=arr.length-1;i>=0&&(tokens.pop(),"brace"!==arr[i].type);i--)"dots"!==arr[i].type&&range.unshift(arr[i].value);output=expandRange(range,opts),state.backtrack=!0}if(!0!==brace.comma&&!0!==brace.dots){const out=state.output.slice(0,brace.outputIndex),toks=state.tokens.slice(brace.tokensIndex);brace.value=brace.output="\\{",value=output="\\}",state.output=out;for(const t of toks)state.output+=t.output||t.value}push({type:"brace",value:value,output:output}),decrement("braces"),braces.pop();continue}if("|"===value){extglobs.length>0&&extglobs[extglobs.length-1].conditions++,push({type:"text",value:value});continue}if(","===value){let output=value;const brace=braces[braces.length-1];brace&&"braces"===stack[stack.length-1]&&(brace.comma=!0,output="|"),push({type:"comma",value:value,output:output});continue}if("/"===value){if("dot"===prev.type&&state.index===state.start+1){state.start=state.index+1,state.consumed="",state.output="",tokens.pop(),prev=bos;continue}push({type:"slash",value:value,output:SLASH_LITERAL});continue}if("."===value){if(state.braces>0&&"dot"===prev.type){"."===prev.value&&(prev.output=DOT_LITERAL);const brace=braces[braces.length-1];prev.type="dots",prev.output+=value,prev.value+=value,brace.dots=!0;continue}if(state.braces+state.parens===0&&"bos"!==prev.type&&"slash"!==prev.type){push({type:"text",value:value,output:DOT_LITERAL});continue}push({type:"dot",value:value,output:DOT_LITERAL});continue}if("?"===value){if(!(prev&&"("===prev.value)&&!0!==opts.noextglob&&"("===peek()&&"?"!==peek(2)){extglobOpen("qmark",value);continue}if(prev&&"paren"===prev.type){const next=peek();let output=value;if("<"===next&&!utils$5.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===prev.value&&!/[!=<:]/.test(next)||"<"===next&&!/<([!=]|\w+>)/.test(remaining()))&&(output=`\\${value}`),push({type:"text",value:value,output:output});continue}if(!0!==opts.dot&&("slash"===prev.type||"bos"===prev.type)){push({type:"qmark",value:value,output:QMARK_NO_DOT});continue}push({type:"qmark",value:value,output:QMARK});continue}if("!"===value){if(!0!==opts.noextglob&&"("===peek()&&("?"!==peek(2)||!/[!=<:]/.test(peek(3)))){extglobOpen("negate",value);continue}if(!0!==opts.nonegate&&0===state.index){negate();continue}}if("+"===value){if(!0!==opts.noextglob&&"("===peek()&&"?"!==peek(2)){extglobOpen("plus",value);continue}if(prev&&"("===prev.value||!1===opts.regex){push({type:"plus",value:value,output:PLUS_LITERAL});continue}if(prev&&("bracket"===prev.type||"paren"===prev.type||"brace"===prev.type)||state.parens>0){push({type:"plus",value:value});continue}push({type:"plus",value:PLUS_LITERAL});continue}if("@"===value){if(!0!==opts.noextglob&&"("===peek()&&"?"!==peek(2)){push({type:"at",extglob:!0,value:value,output:""});continue}push({type:"text",value:value});continue}if("*"!==value){"$"!==value&&"^"!==value||(value=`\\${value}`);const match=REGEX_NON_SPECIAL_CHARS.exec(remaining());match&&(value+=match[0],state.index+=match[0].length),push({type:"text",value:value});continue}if(prev&&("globstar"===prev.type||!0===prev.star)){prev.type="star",prev.star=!0,prev.value+=value,prev.output=star,state.backtrack=!0,state.globstar=!0,consume(value);continue}let rest=remaining();if(!0!==opts.noextglob&&/^\([^?]/.test(rest)){extglobOpen("star",value);continue}if("star"===prev.type){if(!0===opts.noglobstar){consume(value);continue}const prior=prev.prev,before=prior.prev,isStart="slash"===prior.type||"bos"===prior.type,afterStar=before&&("star"===before.type||"globstar"===before.type);if(!0===opts.bash&&(!isStart||rest[0]&&"/"!==rest[0])){push({type:"star",value:value,output:""});continue}const isBrace=state.braces>0&&("comma"===prior.type||"brace"===prior.type),isExtglob=extglobs.length&&("pipe"===prior.type||"paren"===prior.type);if(!isStart&&"paren"!==prior.type&&!isBrace&&!isExtglob){push({type:"star",value:value,output:""});continue}for(;"/**"===rest.slice(0,3);){const after=input[state.index+4];if(after&&"/"!==after)break;rest=rest.slice(3),consume("/**",3)}if("bos"===prior.type&&eos()){prev.type="globstar",prev.value+=value,prev.output=globstar(opts),state.output=prev.output,state.globstar=!0,consume(value);continue}if("slash"===prior.type&&"bos"!==prior.prev.type&&!afterStar&&eos()){state.output=state.output.slice(0,-(prior.output+prev.output).length),prior.output=`(?:${prior.output}`,prev.type="globstar",prev.output=globstar(opts)+(opts.strictSlashes?")":"|$)"),prev.value+=value,state.globstar=!0,state.output+=prior.output+prev.output,consume(value);continue}if("slash"===prior.type&&"bos"!==prior.prev.type&&"/"===rest[0]){const end=void 0!==rest[1]?"|$":"";state.output=state.output.slice(0,-(prior.output+prev.output).length),prior.output=`(?:${prior.output}`,prev.type="globstar",prev.output=`${globstar(opts)}${SLASH_LITERAL}|${SLASH_LITERAL}${end})`,prev.value+=value,state.output+=prior.output+prev.output,state.globstar=!0,consume(value+advance()),push({type:"slash",value:"/",output:""});continue}if("bos"===prior.type&&"/"===rest[0]){prev.type="globstar",prev.value+=value,prev.output=`(?:^|${SLASH_LITERAL}|${globstar(opts)}${SLASH_LITERAL})`,state.output=prev.output,state.globstar=!0,consume(value+advance()),push({type:"slash",value:"/",output:""});continue}state.output=state.output.slice(0,-prev.output.length),prev.type="globstar",prev.output=globstar(opts),prev.value+=value,state.output+=prev.output,state.globstar=!0,consume(value);continue}const token={type:"star",value:value,output:star};!0!==opts.bash?!prev||"bracket"!==prev.type&&"paren"!==prev.type||!0!==opts.regex?(state.index!==state.start&&"slash"!==prev.type&&"dot"!==prev.type||("dot"===prev.type?(state.output+=NO_DOT_SLASH,prev.output+=NO_DOT_SLASH):!0===opts.dot?(state.output+=NO_DOTS_SLASH,prev.output+=NO_DOTS_SLASH):(state.output+=nodot,prev.output+=nodot),"*"!==peek()&&(state.output+=ONE_CHAR,prev.output+=ONE_CHAR)),push(token)):(token.output=value,push(token)):(token.output=".*?","bos"!==prev.type&&"slash"!==prev.type||(token.output=nodot+token.output),push(token))}for(;state.brackets>0;){if(!0===opts.strictBrackets)throw new SyntaxError(syntaxError("closing","]"));state.output=utils$5.escapeLast(state.output,"["),decrement("brackets")}for(;state.parens>0;){if(!0===opts.strictBrackets)throw new SyntaxError(syntaxError("closing",")"));state.output=utils$5.escapeLast(state.output,"("),decrement("parens")}for(;state.braces>0;){if(!0===opts.strictBrackets)throw new SyntaxError(syntaxError("closing","}"));state.output=utils$5.escapeLast(state.output,"{"),decrement("braces")}if(!0===opts.strictSlashes||"star"!==prev.type&&"bracket"!==prev.type||push({type:"maybe_slash",value:"",output:`${SLASH_LITERAL}?`}),!0===state.backtrack){state.output="";for(const token of state.tokens)state.output+=null!=token.output?token.output:token.value,token.suffix&&(state.output+=token.suffix)}return state};parse$8.fastpaths=(input,options)=>{const opts={...options},max="number"==typeof opts.maxLength?Math.min(MAX_LENGTH$1,opts.maxLength):MAX_LENGTH$1,len=input.length;if(len>max)throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);input=REPLACEMENTS[input]||input;const win32=utils$5.isWindows(options),{DOT_LITERAL:DOT_LITERAL,SLASH_LITERAL:SLASH_LITERAL,ONE_CHAR:ONE_CHAR,DOTS_SLASH:DOTS_SLASH,NO_DOT:NO_DOT,NO_DOTS:NO_DOTS,NO_DOTS_SLASH:NO_DOTS_SLASH,STAR:STAR,START_ANCHOR:START_ANCHOR}=constants$4.globChars(win32),nodot=opts.dot?NO_DOTS:NO_DOT,slashDot=opts.dot?NO_DOTS_SLASH:NO_DOT,capture=opts.capture?"":"?:";let star=!0===opts.bash?".*?":STAR;opts.capture&&(star=`(${star})`);const globstar=opts=>!0===opts.noglobstar?star:`(${capture}(?:(?!${START_ANCHOR}${opts.dot?DOTS_SLASH:DOT_LITERAL}).)*?)`,create=str=>{switch(str){case"*":return`${nodot}${ONE_CHAR}${star}`;case".*":return`${DOT_LITERAL}${ONE_CHAR}${star}`;case"*.*":return`${nodot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;case"*/*":return`${nodot}${star}${SLASH_LITERAL}${ONE_CHAR}${slashDot}${star}`;case"**":return nodot+globstar(opts);case"**/*":return`(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${ONE_CHAR}${star}`;case"**/*.*":return`(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;case"**/.*":return`(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${DOT_LITERAL}${ONE_CHAR}${star}`;default:{const match=/^(.*?)\.(\w+)$/.exec(str);if(!match)return;const source=create(match[1]);if(!source)return;return source+DOT_LITERAL+match[2]}}},output=utils$5.removePrefix(input,{negated:!1,prefix:""});let source=create(output);return source&&!0!==opts.strictSlashes&&(source+=`${SLASH_LITERAL}?`),source};const path$1=require$$1,scan=scan_1,parse$7=parse$8,utils$4=utils$7,constants$3=constants$5,picomatch$3=(glob,options,returnState=!1)=>{if(Array.isArray(glob)){const fns=glob.map((input=>picomatch$3(input,options,returnState))),arrayMatcher=str=>{for(const isMatch of fns){const state=isMatch(str);if(state)return state}return!1};return arrayMatcher}const isState=(val=glob)&&"object"==typeof val&&!Array.isArray(val)&&glob.tokens&&glob.input;var val;if(""===glob||"string"!=typeof glob&&!isState)throw new TypeError("Expected pattern to be a non-empty string");const opts=options||{},posix=utils$4.isWindows(options),regex=isState?picomatch$3.compileRe(glob,options):picomatch$3.makeRe(glob,options,!1,!0),state=regex.state;delete regex.state;let isIgnored=()=>!1;if(opts.ignore){const ignoreOpts={...options,ignore:null,onMatch:null,onResult:null};isIgnored=picomatch$3(opts.ignore,ignoreOpts,returnState)}const matcher=(input,returnObject=!1)=>{const{isMatch:isMatch,match:match,output:output}=picomatch$3.test(input,regex,options,{glob:glob,posix:posix}),result={glob:glob,state:state,regex:regex,posix:posix,input:input,output:output,match:match,isMatch:isMatch};return"function"==typeof opts.onResult&&opts.onResult(result),!1===isMatch?(result.isMatch=!1,!!returnObject&&result):isIgnored(input)?("function"==typeof opts.onIgnore&&opts.onIgnore(result),result.isMatch=!1,!!returnObject&&result):("function"==typeof opts.onMatch&&opts.onMatch(result),!returnObject||result)};return returnState&&(matcher.state=state),matcher};picomatch$3.test=(input,regex,options,{glob:glob,posix:posix}={})=>{if("string"!=typeof input)throw new TypeError("Expected input to be a string");if(""===input)return{isMatch:!1,output:""};const opts=options||{},format=opts.format||(posix?utils$4.toPosixSlashes:null);let match=input===glob,output=match&&format?format(input):input;return!1===match&&(output=format?format(input):input,match=output===glob),!1!==match&&!0!==opts.capture||(match=!0===opts.matchBase||!0===opts.basename?picomatch$3.matchBase(input,regex,options,posix):regex.exec(output)),{isMatch:Boolean(match),match:match,output:output}},picomatch$3.matchBase=(input,glob,options,posix=utils$4.isWindows(options))=>(glob instanceof RegExp?glob:picomatch$3.makeRe(glob,options)).test(path$1.basename(input)),picomatch$3.isMatch=(str,patterns,options)=>picomatch$3(patterns,options)(str),picomatch$3.parse=(pattern,options)=>Array.isArray(pattern)?pattern.map((p=>picomatch$3.parse(p,options))):parse$7(pattern,{...options,fastpaths:!1}),picomatch$3.scan=(input,options)=>scan(input,options),picomatch$3.compileRe=(state,options,returnOutput=!1,returnState=!1)=>{if(!0===returnOutput)return state.output;const opts=options||{},prepend=opts.contains?"":"^",append=opts.contains?"":"$";let source=`${prepend}(?:${state.output})${append}`;state&&!0===state.negated&&(source=`^(?!${source}).*$`);const regex=picomatch$3.toRegex(source,options);return!0===returnState&&(regex.state=state),regex},picomatch$3.makeRe=(input,options={},returnOutput=!1,returnState=!1)=>{if(!input||"string"!=typeof input)throw new TypeError("Expected a non-empty string");let parsed={negated:!1,fastpaths:!0};return!1===options.fastpaths||"."!==input[0]&&"*"!==input[0]||(parsed.output=parse$7.fastpaths(input,options)),parsed.output||(parsed=parse$7(input,options)),picomatch$3.compileRe(parsed,options,returnOutput,returnState)},picomatch$3.toRegex=(source,options)=>{try{const opts=options||{};return new RegExp(source,opts.flags||(opts.nocase?"i":""))}catch(err){if(options&&!0===options.debug)throw err;return/$^/}},picomatch$3.constants=constants$3;var picomatch$2=picomatch$3;const fs$3=require$$0$5,{Readable:Readable}=require$$0$4,sysPath$3=require$$1,{promisify:promisify$3}=require$$2,picomatch$1=picomatch$2,readdir$1=promisify$3(fs$3.readdir),stat$3=promisify$3(fs$3.stat),lstat$2=promisify$3(fs$3.lstat),realpath$1=promisify$3(fs$3.realpath),NORMAL_FLOW_ERRORS=new Set(["ENOENT","EPERM","EACCES","ELOOP","READDIRP_RECURSIVE_ERROR"]),FILE_TYPE="files",DIR_TYPE="directories",FILE_DIR_TYPE="files_directories",EVERYTHING_TYPE="all",ALL_TYPES=[FILE_TYPE,DIR_TYPE,FILE_DIR_TYPE,EVERYTHING_TYPE],[maj,min]=process.versions.node.split(".").slice(0,2).map((n=>Number.parseInt(n,10))),wantBigintFsStats="win32"===process.platform&&(maj>10||10===maj&&min>=5),normalizeFilter=filter=>{if(void 0!==filter){if("function"==typeof filter)return filter;if("string"==typeof filter){const glob=picomatch$1(filter.trim());return entry=>glob(entry.basename)}if(Array.isArray(filter)){const positive=[],negative=[];for(const item of filter){const trimmed=item.trim();"!"===trimmed.charAt(0)?negative.push(picomatch$1(trimmed.slice(1))):positive.push(picomatch$1(trimmed))}return negative.length>0?positive.length>0?entry=>positive.some((f=>f(entry.basename)))&&!negative.some((f=>f(entry.basename))):entry=>!negative.some((f=>f(entry.basename))):entry=>positive.some((f=>f(entry.basename)))}}};class ReaddirpStream extends Readable{static get defaultOptions(){return{root:".",fileFilter:path=>!0,directoryFilter:path=>!0,type:FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(options={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:options.highWaterMark||4096});const opts={...ReaddirpStream.defaultOptions,...options},{root:root,type:type}=opts;this._fileFilter=normalizeFilter(opts.fileFilter),this._directoryFilter=normalizeFilter(opts.directoryFilter);const statMethod=opts.lstat?lstat$2:stat$3;this._stat=wantBigintFsStats?path=>statMethod(path,{bigint:!0}):statMethod,this._maxDepth=opts.depth,this._wantsDir=[DIR_TYPE,FILE_DIR_TYPE,EVERYTHING_TYPE].includes(type),this._wantsFile=[FILE_TYPE,FILE_DIR_TYPE,EVERYTHING_TYPE].includes(type),this._wantsEverything=type===EVERYTHING_TYPE,this._root=sysPath$3.resolve(root),this._isDirent="Dirent"in fs$3&&!opts.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(root,1)],this.reading=!1,this.parent=void 0}async _read(batch){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&batch>0;){const{path:path,depth:depth,files:files=[]}=this.parent||{};if(files.length>0){const slice=files.splice(0,batch).map((dirent=>this._formatEntry(dirent,path)));for(const entry of await Promise.all(slice)){if(this.destroyed)return;const entryType=await this._getEntryType(entry);"directory"===entryType&&this._directoryFilter(entry)?(depth<=this._maxDepth&&this.parents.push(this._exploreDir(entry.fullPath,depth+1)),this._wantsDir&&(this.push(entry),batch--)):("file"===entryType||this._includeAsFile(entry))&&this._fileFilter(entry)&&this._wantsFile&&(this.push(entry),batch--)}}else{const parent=this.parents.pop();if(!parent){this.push(null);break}if(this.parent=await parent,this.destroyed)return}}}catch(error){this.destroy(error)}finally{this.reading=!1}}}async _exploreDir(path,depth){let files;try{files=await readdir$1(path,this._rdOptions)}catch(error){this._onError(error)}return{files:files,depth:depth,path:path}}async _formatEntry(dirent,path){let entry;try{const basename=this._isDirent?dirent.name:dirent,fullPath=sysPath$3.resolve(sysPath$3.join(path,basename));entry={path:sysPath$3.relative(this._root,fullPath),fullPath:fullPath,basename:basename},entry[this._statsProp]=this._isDirent?dirent:await this._stat(fullPath)}catch(err){this._onError(err)}return entry}_onError(err){var error;error=err,NORMAL_FLOW_ERRORS.has(error.code)&&!this.destroyed?this.emit("warn",err):this.destroy(err)}async _getEntryType(entry){const stats=entry&&entry[this._statsProp];if(stats){if(stats.isFile())return"file";if(stats.isDirectory())return"directory";if(stats&&stats.isSymbolicLink()){const full=entry.fullPath;try{const entryRealPath=await realpath$1(full),entryRealPathStats=await lstat$2(entryRealPath);if(entryRealPathStats.isFile())return"file";if(entryRealPathStats.isDirectory()){const len=entryRealPath.length;if(full.startsWith(entryRealPath)&&full.substr(len,1)===sysPath$3.sep){const recursiveError=new Error(`Circular symlink detected: "${full}" points to "${entryRealPath}"`);return recursiveError.code="READDIRP_RECURSIVE_ERROR",this._onError(recursiveError)}return"directory"}}catch(error){this._onError(error)}}}}_includeAsFile(entry){const stats=entry&&entry[this._statsProp];return stats&&this._wantsEverything&&!stats.isDirectory()}}const readdirp$1=(root,options={})=>{let type=options.entryType||options.type;if("both"===type&&(type=FILE_DIR_TYPE),type&&(options.type=type),!root)throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");if("string"!=typeof root)throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(type&&!ALL_TYPES.includes(type))throw new Error(`readdirp: Invalid type passed. Use one of ${ALL_TYPES.join(", ")}`);return options.root=root,new ReaddirpStream(options)};readdirp$1.promise=(root,options={})=>new Promise(((resolve,reject)=>{const files=[];readdirp$1(root,options).on("data",(entry=>files.push(entry))).on("end",(()=>resolve(files))).on("error",(error=>reject(error)))})),readdirp$1.ReaddirpStream=ReaddirpStream,readdirp$1.default=readdirp$1;var readdirp_1=readdirp$1,anymatch$2={exports:{}},normalizePath$2=function(path,stripTrailing){if("string"!=typeof path)throw new TypeError("expected path to be a string");if("\\"===path||"/"===path)return"/";var len=path.length;if(len<=1)return path;var prefix="";if(len>4&&"\\"===path[3]){var ch=path[2];"?"!==ch&&"."!==ch||"\\\\"!==path.slice(0,2)||(path=path.slice(2),prefix="//")}var segs=path.split(/[/\\]+/);return!1!==stripTrailing&&""===segs[segs.length-1]&&segs.pop(),prefix+segs.join("/")},anymatch_1=anymatch$2.exports;Object.defineProperty(anymatch_1,"__esModule",{value:!0});const picomatch=picomatch$2,normalizePath$1=normalizePath$2,DEFAULT_OPTIONS={returnIndex:!1},matchPatterns=(patterns,negPatterns,args,returnIndex)=>{const isList=Array.isArray(args),_path=isList?args[0]:args;if(!isList&&"string"!=typeof _path)throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(_path));const path=normalizePath$1(_path,!1);for(let index=0;index<negPatterns.length;index++){if((0,negPatterns[index])(path))return!!returnIndex&&-1}const applied=isList&&[path].concat(args.slice(1));for(let index=0;index<patterns.length;index++){const pattern=patterns[index];if(isList?pattern(...applied):pattern(path))return!returnIndex||index}return!!returnIndex&&-1},anymatch$1=(matchers,testString,options=DEFAULT_OPTIONS)=>{if(null==matchers)throw new TypeError("anymatch: specify first argument");const opts="boolean"==typeof options?{returnIndex:options}:options,returnIndex=opts.returnIndex||!1,mtchers=(item=matchers,Array.isArray(item)?item:[item]);var item;const negatedGlobs=mtchers.filter((item=>"string"==typeof item&&"!"===item.charAt(0))).map((item=>item.slice(1))).map((item=>picomatch(item,opts))),patterns=mtchers.filter((item=>"string"!=typeof item||"string"==typeof item&&"!"!==item.charAt(0))).map((matcher=>((matcher,options)=>{if("function"==typeof matcher)return matcher;if("string"==typeof matcher){const glob=picomatch(matcher,options);return string=>matcher===string||glob(string)}return matcher instanceof RegExp?string=>matcher.test(string):string=>!1})(matcher,opts)));return null==testString?(testString,ri=!1)=>matchPatterns(patterns,negatedGlobs,testString,"boolean"==typeof ri&&ri):matchPatterns(patterns,negatedGlobs,testString,returnIndex)};anymatch$1.default=anymatch$1,anymatch$2.exports=anymatch$1;var anymatchExports=anymatch$2.exports,isExtglob=function(str){if("string"!=typeof str||""===str)return!1;for(var match;match=/(\\).|([@?!+*]\(.*\))/g.exec(str);){if(match[2])return!0;str=str.slice(match.index+match[0].length)}return!1},chars={"{":"}","(":")","[":"]"},strictCheck=function(str){if("!"===str[0])return!0;for(var index=0,pipeIndex=-2,closeSquareIndex=-2,closeCurlyIndex=-2,closeParenIndex=-2,backSlashIndex=-2;index<str.length;){if("*"===str[index])return!0;if("?"===str[index+1]&&/[\].+)]/.test(str[index]))return!0;if(-1!==closeSquareIndex&&"["===str[index]&&"]"!==str[index+1]&&(closeSquareIndex<index&&(closeSquareIndex=str.indexOf("]",index)),closeSquareIndex>index)){if(-1===backSlashIndex||backSlashIndex>closeSquareIndex)return!0;if(-1===(backSlashIndex=str.indexOf("\\",index))||backSlashIndex>closeSquareIndex)return!0}if(-1!==closeCurlyIndex&&"{"===str[index]&&"}"!==str[index+1]&&(closeCurlyIndex=str.indexOf("}",index))>index&&(-1===(backSlashIndex=str.indexOf("\\",index))||backSlashIndex>closeCurlyIndex))return!0;if(-1!==closeParenIndex&&"("===str[index]&&"?"===str[index+1]&&/[:!=]/.test(str[index+2])&&")"!==str[index+3]&&(closeParenIndex=str.indexOf(")",index))>index&&(-1===(backSlashIndex=str.indexOf("\\",index))||backSlashIndex>closeParenIndex))return!0;if(-1!==pipeIndex&&"("===str[index]&&"|"!==str[index+1]&&(pipeIndex<index&&(pipeIndex=str.indexOf("|",index)),-1!==pipeIndex&&")"!==str[pipeIndex+1]&&(closeParenIndex=str.indexOf(")",pipeIndex))>pipeIndex&&(-1===(backSlashIndex=str.indexOf("\\",pipeIndex))||backSlashIndex>closeParenIndex)))return!0;if("\\"===str[index]){var open=str[index+1];index+=2;var close=chars[open];if(close){var n=str.indexOf(close,index);-1!==n&&(index=n+1)}if("!"===str[index])return!0}else index++}return!1},relaxedCheck=function(str){if("!"===str[0])return!0;for(var index=0;index<str.length;){if(/[*?{}()[\]]/.test(str[index]))return!0;if("\\"===str[index]){var open=str[index+1];index+=2;var close=chars[open];if(close){var n=str.indexOf(close,index);-1!==n&&(index=n+1)}if("!"===str[index])return!0}else index++}return!1},isGlob$2=function(str,options){if("string"!=typeof str||""===str)return!1;if(isExtglob(str))return!0;var check=strictCheck;return options&&!1===options.strict&&(check=relaxedCheck),check(str)},isGlob$1=isGlob$2,pathPosixDirname=require$$1.posix.dirname,isWin32="win32"===require$$2$1.platform(),backslash=/\\/g,enclosure=/[\{\[].*[\}\]]$/,globby=/(^|[^\\])([\{\[]|\([^\)]+$)/,escaped=/\\([\!\*\?\|\[\]\(\)\{\}])/g,utils$3={};!function(exports){exports.isInteger=num=>"number"==typeof num?Number.isInteger(num):"string"==typeof num&&""!==num.trim()&&Number.isInteger(Number(num)),exports.find=(node,type)=>node.nodes.find((node=>node.type===type)),exports.exceedsLimit=(min,max,step=1,limit)=>!1!==limit&&(!(!exports.isInteger(min)||!exports.isInteger(max))&&(Number(max)-Number(min))/Number(step)>=limit),exports.escapeNode=(block,n=0,type)=>{const node=block.nodes[n];node&&(type&&node.type===type||"open"===node.type||"close"===node.type)&&!0!==node.escaped&&(node.value="\\"+node.value,node.escaped=!0)},exports.encloseBrace=node=>"brace"===node.type&&(node.commas>>0+node.ranges>>0==0&&(node.invalid=!0,!0)),exports.isInvalidBrace=block=>"brace"===block.type&&(!(!0!==block.invalid&&!block.dollar)||(block.commas>>0+block.ranges>>0==0||!0!==block.open||!0!==block.close)&&(block.invalid=!0,!0)),exports.isOpenOrClose=node=>"open"===node.type||"close"===node.type||(!0===node.open||!0===node.close),exports.reduce=nodes=>nodes.reduce(((acc,node)=>("text"===node.type&&acc.push(node.value),"range"===node.type&&(node.type="text"),acc)),[]),exports.flatten=(...args)=>{const result=[],flat=arr=>{for(let i=0;i<arr.length;i++){const ele=arr[i];Array.isArray(ele)?flat(ele):void 0!==ele&&result.push(ele)}return result};return flat(args),result}}(utils$3);const utils$2=utils$3;var stringify$4=(ast,options={})=>{const stringify=(node,parent={})=>{const invalidBlock=options.escapeInvalid&&utils$2.isInvalidBrace(parent),invalidNode=!0===node.invalid&&!0===options.escapeInvalid;let output="";if(node.value)return(invalidBlock||invalidNode)&&utils$2.isOpenOrClose(node)?"\\"+node.value:node.value;if(node.value)return node.value;if(node.nodes)for(const child of node.nodes)output+=stringify(child);return output};return stringify(ast)};const isNumber$1=function(num){return"number"==typeof num?num-num==0:"string"==typeof num&&""!==num.trim()&&(Number.isFinite?Number.isFinite(+num):isFinite(+num))},toRegexRange$1=(min,max,options)=>{if(!1===isNumber$1(min))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===max||min===max)return String(min);if(!1===isNumber$1(max))throw new TypeError("toRegexRange: expected the second argument to be a number.");let opts={relaxZeros:!0,...options};"boolean"==typeof opts.strictZeros&&(opts.relaxZeros=!1===opts.strictZeros);let cacheKey=min+":"+max+"="+String(opts.relaxZeros)+String(opts.shorthand)+String(opts.capture)+String(opts.wrap);if(toRegexRange$1.cache.hasOwnProperty(cacheKey))return toRegexRange$1.cache[cacheKey].result;let a=Math.min(min,max),b=Math.max(min,max);if(1===Math.abs(a-b)){let result=min+"|"+max;return opts.capture?`(${result})`:!1===opts.wrap?result:`(?:${result})`}let isPadded=hasPadding(min)||hasPadding(max),state={min:min,max:max,a:a,b:b},positives=[],negatives=[];if(isPadded&&(state.isPadded=isPadded,state.maxLen=String(state.max).length),a<0){negatives=splitToPatterns(b<0?Math.abs(b):1,Math.abs(a),state,opts),a=state.a=0}return b>=0&&(positives=splitToPatterns(a,b,state,opts)),state.negatives=negatives,state.positives=positives,state.result=function(neg,pos,options){let onlyNegative=filterPatterns(neg,pos,"-",!1)||[],onlyPositive=filterPatterns(pos,neg,"",!1)||[],intersected=filterPatterns(neg,pos,"-?",!0)||[];return onlyNegative.concat(intersected).concat(onlyPositive).join("|")}(negatives,positives),!0===opts.capture?state.result=`(${state.result})`:!1!==opts.wrap&&positives.length+negatives.length>1&&(state.result=`(?:${state.result})`),toRegexRange$1.cache[cacheKey]=state,state.result};function rangeToPattern(start,stop,options){if(start===stop)return{pattern:start,count:[],digits:0};let zipped=function(a,b){let arr=[];for(let i=0;i<a.length;i++)arr.push([a[i],b[i]]);return arr}(start,stop),digits=zipped.length,pattern="",count=0;for(let i=0;i<digits;i++){let[startDigit,stopDigit]=zipped[i];startDigit===stopDigit?pattern+=startDigit:"0"!==startDigit||"9"!==stopDigit?pattern+=toCharacterClass(startDigit,stopDigit):count++}return count&&(pattern+=!0===options.shorthand?"\\d":"[0-9]"),{pattern:pattern,count:[count],digits:digits}}function splitToPatterns(min,max,tok,options){let prev,ranges=function(min,max){let nines=1,zeros=1,stop=countNines(min,nines),stops=new Set([max]);for(;min<=stop&&stop<=max;)stops.add(stop),nines+=1,stop=countNines(min,nines);for(stop=countZeros(max+1,zeros)-1;min<stop&&stop<=max;)stops.add(stop),zeros+=1,stop=countZeros(max+1,zeros)-1;return stops=[...stops],stops.sort(compare),stops}(min,max),tokens=[],start=min;for(let i=0;i<ranges.length;i++){let max=ranges[i],obj=rangeToPattern(String(start),String(max),options),zeros="";tok.isPadded||!prev||prev.pattern!==obj.pattern?(tok.isPadded&&(zeros=padZeros(max,tok,options)),obj.string=zeros+obj.pattern+toQuantifier(obj.count),tokens.push(obj),start=max+1,prev=obj):(prev.count.length>1&&prev.count.pop(),prev.count.push(obj.count[0]),prev.string=prev.pattern+toQuantifier(prev.count),start=max+1)}return tokens}function filterPatterns(arr,comparison,prefix,intersection,options){let result=[];for(let ele of arr){let{string:string}=ele;intersection||contains(comparison,"string",string)||result.push(prefix+string),intersection&&contains(comparison,"string",string)&&result.push(prefix+string)}return result}function compare(a,b){return a>b?1:b>a?-1:0}function contains(arr,key,val){return arr.some((ele=>ele[key]===val))}function countNines(min,len){return Number(String(min).slice(0,-len)+"9".repeat(len))}function countZeros(integer,zeros){return integer-integer%Math.pow(10,zeros)}function toQuantifier(digits){let[start=0,stop=""]=digits;return stop||start>1?`{${start+(stop?","+stop:"")}}`:""}function toCharacterClass(a,b,options){return`[${a}${b-a==1?"":"-"}${b}]`}function hasPadding(str){return/^-?(0+)\d/.test(str)}function padZeros(value,tok,options){if(!tok.isPadded)return value;let diff=Math.abs(tok.maxLen-String(value).length),relax=!1!==options.relaxZeros;switch(diff){case 0:return"";case 1:return relax?"0?":"0";case 2:return relax?"0{0,2}":"00";default:return relax?`0{0,${diff}}`:`0{${diff}}`}}toRegexRange$1.cache={},toRegexRange$1.clearCache=()=>toRegexRange$1.cache={};const util=require$$2,toRegexRange=toRegexRange$1,isObject=val=>null!==val&&"object"==typeof val&&!Array.isArray(val),isValidValue=value=>"number"==typeof value||"string"==typeof value&&""!==value,isNumber=num=>Number.isInteger(+num),zeros=input=>{let value=`${input}`,index=-1;if("-"===value[0]&&(value=value.slice(1)),"0"===value)return!1;for(;"0"===value[++index];);return index>0},pad=(input,maxLength,toNumber)=>{if(maxLength>0){let dash="-"===input[0]?"-":"";dash&&(input=input.slice(1)),input=dash+input.padStart(dash?maxLength-1:maxLength,"0")}return!1===toNumber?String(input):input},toMaxLen=(input,maxLength)=>{let negative="-"===input[0]?"-":"";for(negative&&(input=input.slice(1),maxLength--);input.length<maxLength;)input="0"+input;return negative?"-"+input:input},toRange=(a,b,isNumbers,options)=>{if(isNumbers)return toRegexRange(a,b,{wrap:!1,...options});let start=String.fromCharCode(a);return a===b?start:`[${start}-${String.fromCharCode(b)}]`},toRegex=(start,end,options)=>{if(Array.isArray(start)){let wrap=!0===options.wrap,prefix=options.capture?"":"?:";return wrap?`(${prefix}${start.join("|")})`:start.join("|")}return toRegexRange(start,end,options)},rangeError=(...args)=>new RangeError("Invalid range arguments: "+util.inspect(...args)),invalidRange=(start,end,options)=>{if(!0===options.strictRanges)throw rangeError([start,end]);return[]},fillNumbers=(start,end,step=1,options={})=>{let a=Number(start),b=Number(end);if(!Number.isInteger(a)||!Number.isInteger(b)){if(!0===options.strictRanges)throw rangeError([start,end]);return[]}0===a&&(a=0),0===b&&(b=0);let descending=a>b,startString=String(start),endString=String(end),stepString=String(step);step=Math.max(Math.abs(step),1);let padded=zeros(startString)||zeros(endString)||zeros(stepString),maxLen=padded?Math.max(startString.length,endString.length,stepString.length):0,toNumber=!1===padded&&!1===((start,end,options)=>"string"==typeof start||"string"==typeof end||!0===options.stringify)(start,end,options),format=options.transform||(toNumber=>value=>!0===toNumber?Number(value):String(value))(toNumber);if(options.toRegex&&1===step)return toRange(toMaxLen(start,maxLen),toMaxLen(end,maxLen),!0,options);let parts={negatives:[],positives:[]},range=[],index=0;for(;descending?a>=b:a<=b;)!0===options.toRegex&&step>1?parts[(num=a)<0?"negatives":"positives"].push(Math.abs(num)):range.push(pad(format(a,index),maxLen,toNumber)),a=descending?a-step:a+step,index++;var num;return!0===options.toRegex?step>1?((parts,options,maxLen)=>{parts.negatives.sort(((a,b)=>a<b?-1:a>b?1:0)),parts.positives.sort(((a,b)=>a<b?-1:a>b?1:0));let result,prefix=options.capture?"":"?:",positives="",negatives="";return parts.positives.length&&(positives=parts.positives.map((v=>toMaxLen(String(v),maxLen))).join("|")),parts.negatives.length&&(negatives=`-(${prefix}${parts.negatives.map((v=>toMaxLen(String(v),maxLen))).join("|")})`),result=positives&&negatives?`${positives}|${negatives}`:positives||negatives,options.wrap?`(${prefix}${result})`:result})(parts,options,maxLen):toRegex(range,null,{wrap:!1,...options}):range},fill$2=(start,end,step,options={})=>{if(null==end&&isValidValue(start))return[start];if(!isValidValue(start)||!isValidValue(end))return invalidRange(start,end,options);if("function"==typeof step)return fill$2(start,end,1,{transform:step});if(isObject(step))return fill$2(start,end,0,step);let opts={...options};return!0===opts.capture&&(opts.wrap=!0),step=step||opts.step||1,isNumber(step)?isNumber(start)&&isNumber(end)?fillNumbers(start,end,step,opts):((start,end,step=1,options={})=>{if(!isNumber(start)&&start.length>1||!isNumber(end)&&end.length>1)return invalidRange(start,end,options);let format=options.transform||(val=>String.fromCharCode(val)),a=`${start}`.charCodeAt(0),b=`${end}`.charCodeAt(0),descending=a>b,min=Math.min(a,b),max=Math.max(a,b);if(options.toRegex&&1===step)return toRange(min,max,!1,options);let range=[],index=0;for(;descending?a>=b:a<=b;)range.push(format(a,index)),a=descending?a-step:a+step,index++;return!0===options.toRegex?toRegex(range,null,{wrap:!1,options:options}):range})(start,end,Math.max(Math.abs(step),1),opts):null==step||isObject(step)?fill$2(start,end,1,step):((step,options)=>{if(!0===options.strictRanges)throw new TypeError(`Expected step "${step}" to be a number`);return[]})(step,opts)};const fill$1=fill$2,utils$1=utils$3;var compile_1=(ast,options={})=>{const walk=(node,parent={})=>{const invalidBlock=utils$1.isInvalidBrace(parent),invalidNode=!0===node.invalid&&!0===options.escapeInvalid,invalid=!0===invalidBlock||!0===invalidNode,prefix=!0===options.escapeInvalid?"\\":"";let output="";if(!0===node.isOpen)return prefix+node.value;if(!0===node.isClose)return console.log("node.isClose",prefix,node.value),prefix+node.value;if("open"===node.type)return invalid?prefix+node.value:"(";if("close"===node.type)return invalid?prefix+node.value:")";if("comma"===node.type)return"comma"===node.prev.type?"":invalid?node.value:"|";if(node.value)return node.value;if(node.nodes&&node.ranges>0){const args=utils$1.reduce(node.nodes),range=fill$1(...args,{...options,wrap:!1,toRegex:!0,strictZeros:!0});if(0!==range.length)return args.length>1&&range.length>1?`(${range})`:range}if(node.nodes)for(const child of node.nodes)output+=walk(child,node);return output};return walk(ast)};const fill=fill$2,stringify$2=stringify$4,utils=utils$3,append$1=(queue="",stash="",enclose=!1)=>{const result=[];if(queue=[].concat(queue),!(stash=[].concat(stash)).length)return queue;if(!queue.length)return enclose?utils.flatten(stash).map((ele=>`{${ele}}`)):stash;for(const item of queue)if(Array.isArray(item))for(const value of item)result.push(append$1(value,stash,enclose));else for(let ele of stash)!0===enclose&&"string"==typeof ele&&(ele=`{${ele}}`),result.push(Array.isArray(ele)?append$1(item,ele,enclose):item+ele);return utils.flatten(result)};var expand_1=(ast,options={})=>{const rangeLimit=void 0===options.rangeLimit?1e3:options.rangeLimit,walk=(node,parent={})=>{node.queue=[];let p=parent,q=parent.queue;for(;"brace"!==p.type&&"root"!==p.type&&p.parent;)p=p.parent,q=p.queue;if(node.invalid||node.dollar)return void q.push(append$1(q.pop(),stringify$2(node,options)));if("brace"===node.type&&!0!==node.invalid&&2===node.nodes.length)return void q.push(append$1(q.pop(),["{}"]));if(node.nodes&&node.ranges>0){const args=utils.reduce(node.nodes);if(utils.exceedsLimit(...args,options.step,rangeLimit))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let range=fill(...args,options);return 0===range.length&&(range=stringify$2(node,options)),q.push(append$1(q.pop(),range)),void(node.nodes=[])}const enclose=utils.encloseBrace(node);let queue=node.queue,block=node;for(;"brace"!==block.type&&"root"!==block.type&&block.parent;)block=block.parent,queue=block.queue;for(let i=0;i<node.nodes.length;i++){const child=node.nodes[i];"comma"!==child.type||"brace"!==node.type?"close"!==child.type?child.value&&"open"!==child.type?queue.push(append$1(queue.pop(),child.value)):child.nodes&&walk(child,node):q.push(append$1(q.pop(),queue,enclose)):(1===i&&queue.push(""),queue.push(""))}return queue};return utils.flatten(walk(ast))};const stringify$1=stringify$4,{MAX_LENGTH:MAX_LENGTH,CHAR_BACKSLASH:CHAR_BACKSLASH,CHAR_BACKTICK:CHAR_BACKTICK,CHAR_COMMA:CHAR_COMMA,CHAR_DOT:CHAR_DOT,CHAR_LEFT_PARENTHESES:CHAR_LEFT_PARENTHESES,CHAR_RIGHT_PARENTHESES:CHAR_RIGHT_PARENTHESES,CHAR_LEFT_CURLY_BRACE:CHAR_LEFT_CURLY_BRACE,CHAR_RIGHT_CURLY_BRACE:CHAR_RIGHT_CURLY_BRACE,CHAR_LEFT_SQUARE_BRACKET:CHAR_LEFT_SQUARE_BRACKET,CHAR_RIGHT_SQUARE_BRACKET:CHAR_RIGHT_SQUARE_BRACKET,CHAR_DOUBLE_QUOTE:CHAR_DOUBLE_QUOTE,CHAR_SINGLE_QUOTE:CHAR_SINGLE_QUOTE,CHAR_NO_BREAK_SPACE:CHAR_NO_BREAK_SPACE,CHAR_ZERO_WIDTH_NOBREAK_SPACE:CHAR_ZERO_WIDTH_NOBREAK_SPACE}={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"};var parse_1=(input,options={})=>{if("string"!=typeof input)throw new TypeError("Expected a string");const opts=options||{},max="number"==typeof opts.maxLength?Math.min(MAX_LENGTH,opts.maxLength):MAX_LENGTH;if(input.length>max)throw new SyntaxError(`Input length (${input.length}), exceeds max characters (${max})`);const ast={type:"root",input:input,nodes:[]},stack=[ast];let block=ast,prev=ast,brackets=0;const length=input.length;let value,index=0,depth=0;const advance=()=>input[index++],push=node=>{if("text"===node.type&&"dot"===prev.type&&(prev.type="text"),!prev||"text"!==prev.type||"text"!==node.type)return block.nodes.push(node),node.parent=block,node.prev=prev,prev=node,node;prev.value+=node.value};for(push({type:"bos"});index<length;)if(block=stack[stack.length-1],value=advance(),value!==CHAR_ZERO_WIDTH_NOBREAK_SPACE&&value!==CHAR_NO_BREAK_SPACE)if(value!==CHAR_BACKSLASH)if(value!==CHAR_RIGHT_SQUARE_BRACKET)if(value!==CHAR_LEFT_SQUARE_BRACKET)if(value!==CHAR_LEFT_PARENTHESES)if(value!==CHAR_RIGHT_PARENTHESES)if(value!==CHAR_DOUBLE_QUOTE&&value!==CHAR_SINGLE_QUOTE&&value!==CHAR_BACKTICK)if(value!==CHAR_LEFT_CURLY_BRACE)if(value!==CHAR_RIGHT_CURLY_BRACE)if(value===CHAR_COMMA&&depth>0){if(block.ranges>0){block.ranges=0;const open=block.nodes.shift();block.nodes=[open,{type:"text",value:stringify$1(block)}]}push({type:"comma",value:value}),block.commas++}else if(value===CHAR_DOT&&depth>0&&0===block.commas){const siblings=block.nodes;if(0===depth||0===siblings.length){push({type:"text",value:value});continue}if("dot"===prev.type){if(block.range=[],prev.value+=value,prev.type="range",3!==block.nodes.length&&5!==block.nodes.length){block.invalid=!0,block.ranges=0,prev.type="text";continue}block.ranges++,block.args=[];continue}if("range"===prev.type){siblings.pop();const before=siblings[siblings.length-1];before.value+=prev.value+value,prev=before,block.ranges--;continue}push({type:"dot",value:value})}else push({type:"text",value:value});else{if("brace"!==block.type){push({type:"text",value:value});continue}const type="close";block=stack.pop(),block.close=!0,push({type:type,value:value}),depth--,block=stack[stack.length-1]}else{depth++;const dollar=prev.value&&"$"===prev.value.slice(-1)||!0===block.dollar;block=push({type:"brace",open:!0,close:!1,dollar:dollar,depth:depth,commas:0,ranges:0,nodes:[]}),stack.push(block),push({type:"open",value:value})}else{const open=value;let next;for(!0!==options.keepQuotes&&(value="");index<length&&(next=advance());)if(next!==CHAR_BACKSLASH){if(next===open){!0===options.keepQuotes&&(value+=next);break}value+=next}else value+=next+advance();push({type:"text",value:value})}else{if("paren"!==block.type){push({type:"text",value:value});continue}block=stack.pop(),push({type:"text",value:value}),block=stack[stack.length-1]}else block=push({type:"paren",nodes:[]}),stack.push(block),push({type:"text",value:value});else{let next;for(brackets++;index<length&&(next=advance());)if(value+=next,next!==CHAR_LEFT_SQUARE_BRACKET)if(next!==CHAR_BACKSLASH){if(next===CHAR_RIGHT_SQUARE_BRACKET&&(brackets--,0===brackets))break}else value+=advance();else brackets++;push({type:"text",value:value})}else push({type:"text",value:"\\"+value});else push({type:"text",value:(options.keepEscaping?value:"")+advance()});do{if(block=stack.pop(),"root"!==block.type){block.nodes.forEach((node=>{node.nodes||("open"===node.type&&(node.isOpen=!0),"close"===node.type&&(node.isClose=!0),node.nodes||(node.type="text"),node.invalid=!0)}));const parent=stack[stack.length-1],index=parent.nodes.indexOf(block);parent.nodes.splice(index,1,...block.nodes)}}while(stack.length>0);return push({type:"eos"}),ast};const stringify=stringify$4,compile=compile_1,expand=expand_1,parse$5=parse_1,braces$1=(input,options={})=>{let output=[];if(Array.isArray(input))for(const pattern of input){const result=braces$1.create(pattern,options);Array.isArray(result)?output.push(...result):output.push(result)}else output=[].concat(braces$1.create(input,options));return options&&!0===options.expand&&!0===options.nodupes&&(output=[...new Set(output)]),output};braces$1.parse=(input,options={})=>parse$5(input,options),braces$1.stringify=(input,options={})=>stringify("string"==typeof input?braces$1.parse(input,options):input,options),braces$1.compile=(input,options={})=>("string"==typeof input&&(input=braces$1.parse(input,options)),compile(input,options)),braces$1.expand=(input,options={})=>{"string"==typeof input&&(input=braces$1.parse(input,options));let result=expand(input,options);return!0===options.noempty&&(result=result.filter(Boolean)),!0===options.nodupes&&(result=[...new Set(result)]),result},braces$1.create=(input,options={})=>""===input||input.length<3?[input]:!0!==options.expand?braces$1.compile(input,options):braces$1.expand(input,options);var braces_1=braces$1;const path=require$$1,extensions=new Set(["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]);var constants$1={};!function(exports){const{sep:sep}=require$$1,{platform:platform}=process,os=require$$2$1;exports.EV_ALL="all",exports.EV_READY="ready",exports.EV_ADD="add",exports.EV_CHANGE="change",exports.EV_ADD_DIR="addDir",exports.EV_UNLINK="unlink",exports.EV_UNLINK_DIR="unlinkDir",exports.EV_RAW="raw",exports.EV_ERROR="error",exports.STR_DATA="data",exports.STR_END="end",exports.STR_CLOSE="close",exports.FSEVENT_CREATED="created",exports.FSEVENT_MODIFIED="modified",exports.FSEVENT_DELETED="deleted",exports.FSEVENT_MOVED="moved",exports.FSEVENT_CLONED="cloned",exports.FSEVENT_UNKNOWN="unknown",exports.FSEVENT_FLAG_MUST_SCAN_SUBDIRS=1,exports.FSEVENT_TYPE_FILE="file",exports.FSEVENT_TYPE_DIRECTORY="directory",exports.FSEVENT_TYPE_SYMLINK="symlink",exports.KEY_LISTENERS="listeners",exports.KEY_ERR="errHandlers",exports.KEY_RAW="rawEmitters",exports.HANDLER_KEYS=[exports.KEY_LISTENERS,exports.KEY_ERR,exports.KEY_RAW],exports.DOT_SLASH=`.${sep}`,exports.BACK_SLASH_RE=/\\/g,exports.DOUBLE_SLASH_RE=/\/\//,exports.SLASH_OR_BACK_SLASH_RE=/[/\\]/,exports.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,exports.REPLACER_RE=/^\.[/\\]/,exports.SLASH="/",exports.SLASH_SLASH="//",exports.BRACE_START="{",exports.BANG="!",exports.ONE_DOT=".",exports.TWO_DOTS="..",exports.STAR="*",exports.GLOBSTAR="**",exports.ROOT_GLOBSTAR="/**/*",exports.SLASH_GLOBSTAR="/**",exports.DIR_SUFFIX="Dir",exports.ANYMATCH_OPTS={dot:!0},exports.STRING_TYPE="string",exports.FUNCTION_TYPE="function",exports.EMPTY_STR="",exports.EMPTY_FN=()=>{},exports.IDENTITY_FN=val=>val,exports.isWindows="win32"===platform,exports.isMacos="darwin"===platform,exports.isLinux="linux"===platform,exports.isIBMi="OS400"===os.type()}(constants$1);const fs$2=require$$0$5,sysPath$2=require$$1,{promisify:promisify$2}=require$$2,isBinaryPath=filePath=>extensions.has(path.extname(filePath).slice(1).toLowerCase()),{isWindows:isWindows$2,isLinux:isLinux,EMPTY_FN:EMPTY_FN$2,EMPTY_STR:EMPTY_STR$1,KEY_LISTENERS:KEY_LISTENERS,KEY_ERR:KEY_ERR,KEY_RAW:KEY_RAW,HANDLER_KEYS:HANDLER_KEYS,EV_CHANGE:EV_CHANGE$2,EV_ADD:EV_ADD$2,EV_ADD_DIR:EV_ADD_DIR$2,EV_ERROR:EV_ERROR$2,STR_DATA:STR_DATA$1,STR_END:STR_END$2,BRACE_START:BRACE_START$1,STAR:STAR}=constants$1,open=promisify$2(fs$2.open),stat$2=promisify$2(fs$2.stat),lstat$1=promisify$2(fs$2.lstat),close=promisify$2(fs$2.close),fsrealpath=promisify$2(fs$2.realpath),statMethods$1={lstat:lstat$1,stat:stat$2},foreach=(val,fn)=>{val instanceof Set?val.forEach(fn):fn(val)},addAndConvert=(main,prop,item)=>{let container=main[prop];container instanceof Set||(main[prop]=container=new Set([container])),container.add(item)},delFromSet=(main,prop,item)=>{const container=main[prop];container instanceof Set?container.delete(item):container===item&&delete main[prop]},isEmptySet=val=>val instanceof Set?0===val.size:!val,FsWatchInstances=new Map;function createFsWatchInstance(path,options,listener,errHandler,emitRaw){const handleEvent=(rawEvent,evPath)=>{listener(path),emitRaw(rawEvent,evPath,{watchedPath:path}),evPath&&path!==evPath&&fsWatchBroadcast(sysPath$2.resolve(path,evPath),KEY_LISTENERS,sysPath$2.join(path,evPath))};try{return fs$2.watch(path,options,handleEvent)}catch(error){errHandler(error)}}const fsWatchBroadcast=(fullPath,type,val1,val2,val3)=>{const cont=FsWatchInstances.get(fullPath);cont&&foreach(cont[type],(listener=>{listener(val1,val2,val3)}))},setFsWatchListener=(path,fullPath,options,handlers)=>{const{listener:listener,errHandler:errHandler,rawEmitter:rawEmitter}=handlers;let watcher,cont=FsWatchInstances.get(fullPath);if(!options.persistent)return watcher=createFsWatchInstance(path,options,listener,errHandler,rawEmitter),watcher.close.bind(watcher);if(cont)addAndConvert(cont,KEY_LISTENERS,listener),addAndConvert(cont,KEY_ERR,errHandler),addAndConvert(cont,KEY_RAW,rawEmitter);else{if(watcher=createFsWatchInstance(path,options,fsWatchBroadcast.bind(null,fullPath,KEY_LISTENERS),errHandler,fsWatchBroadcast.bind(null,fullPath,KEY_RAW)),!watcher)return;watcher.on(EV_ERROR$2,(async error=>{const broadcastErr=fsWatchBroadcast.bind(null,fullPath,KEY_ERR);if(cont.watcherUnusable=!0,isWindows$2&&"EPERM"===error.code)try{const fd=await open(path,"r");await close(fd),broadcastErr(error)}catch(err){}else broadcastErr(error)})),cont={listeners:listener,errHandlers:errHandler,rawEmitters:rawEmitter,watcher:watcher},FsWatchInstances.set(fullPath,cont)}return()=>{delFromSet(cont,KEY_LISTENERS,listener),delFromSet(cont,KEY_ERR,errHandler),delFromSet(cont,KEY_RAW,rawEmitter),isEmptySet(cont.listeners)&&(cont.watcher.close(),FsWatchInstances.delete(fullPath),HANDLER_KEYS.forEach((cont=>key=>{const set=cont[key];set instanceof Set?set.clear():delete cont[key]})(cont)),cont.watcher=void 0,Object.freeze(cont))}},FsWatchFileInstances=new Map;var nodefsHandler=class{constructor(fsW){this.fsw=fsW,this._boundHandleError=error=>fsW._handleError(error)}_watchWithNodeFs(path,listener){const opts=this.fsw.options,directory=sysPath$2.dirname(path),basename=sysPath$2.basename(path);this.fsw._getWatchedDir(directory).add(basename);const absolutePath=sysPath$2.resolve(path),options={persistent:opts.persistent};let closer;return listener||(listener=EMPTY_FN$2),opts.usePolling?(options.interval=opts.enableBinaryInterval&&isBinaryPath(basename)?opts.binaryInterval:opts.interval,closer=((path,fullPath,options,handlers)=>{const{listener:listener,rawEmitter:rawEmitter}=handlers;let cont=FsWatchFileInstances.get(fullPath);const copts=cont&&cont.options;return copts&&(copts.persistent<options.persistent||copts.interval>options.interval)&&(cont.listeners,cont.rawEmitters,fs$2.unwatchFile(fullPath),cont=void 0),cont?(addAndConvert(cont,KEY_LISTENERS,listener),addAndConvert(cont,KEY_RAW,rawEmitter)):(cont={listeners:listener,rawEmitters:rawEmitter,options:options,watcher:fs$2.watchFile(fullPath,options,((curr,prev)=>{foreach(cont.rawEmitters,(rawEmitter=>{rawEmitter(EV_CHANGE$2,fullPath,{curr:curr,prev:prev})}));const currmtime=curr.mtimeMs;(curr.size!==prev.size||currmtime>prev.mtimeMs||0===currmtime)&&foreach(cont.listeners,(listener=>listener(path,curr)))}))},FsWatchFileInstances.set(fullPath,cont)),()=>{delFromSet(cont,KEY_LISTENERS,listener),delFromSet(cont,KEY_RAW,rawEmitter),isEmptySet(cont.listeners)&&(FsWatchFileInstances.delete(fullPath),fs$2.unwatchFile(fullPath),cont.options=cont.watcher=void 0,Object.freeze(cont))}})(path,absolutePath,options,{listener:listener,rawEmitter:this.fsw._emitRaw})):closer=setFsWatchListener(path,absolutePath,options,{listener:listener,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),closer}_handleFile(file,stats,initialAdd){if(this.fsw.closed)return;const dirname=sysPath$2.dirname(file),basename=sysPath$2.basename(file),parent=this.fsw._getWatchedDir(dirname);let prevStats=stats;if(parent.has(basename))return;const listener=async(path,newStats)=>{if(this.fsw._throttle("watch",file,5))if(newStats&&0!==newStats.mtimeMs){if(parent.has(basename)){const at=newStats.atimeMs,mt=newStats.mtimeMs;(!at||at<=mt||mt!==prevStats.mtimeMs)&&this.fsw._emit(EV_CHANGE$2,file,newStats),prevStats=newStats}}else try{const newStats=await stat$2(file);if(this.fsw.closed)return;const at=newStats.atimeMs,mt=newStats.mtimeMs;(!at||at<=mt||mt!==prevStats.mtimeMs)&&this.fsw._emit(EV_CHANGE$2,file,newStats),isLinux&&prevStats.ino!==newStats.ino?(this.fsw._closeFile(path),prevStats=newStats,this.fsw._addPathCloser(path,this._watchWithNodeFs(file,listener))):prevStats=newStats}catch(error){this.fsw._remove(dirname,basename)}},closer=this._watchWithNodeFs(file,listener);if((!initialAdd||!this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(file)){if(!this.fsw._throttle(EV_ADD$2,file,0))return;this.fsw._emit(EV_ADD$2,file,stats)}return closer}async _handleSymlink(entry,directory,path,item){if(this.fsw.closed)return;const full=entry.fullPath,dir=this.fsw._getWatchedDir(directory);if(!this.fsw.options.followSymlinks){let linkPath;this.fsw._incrReadyCount();try{linkPath=await fsrealpath(path)}catch(e){return this.fsw._emitReady(),!0}if(this.fsw.closed)return;return dir.has(item)?this.fsw._symlinkPaths.get(full)!==linkPath&&(this.fsw._symlinkPaths.set(full,linkPath),this.fsw._emit(EV_CHANGE$2,path,entry.stats)):(dir.add(item),this.fsw._symlinkPaths.set(full,linkPath),this.fsw._emit(EV_ADD$2,path,entry.stats)),this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(full))return!0;this.fsw._symlinkPaths.set(full,!0)}_handleRead(directory,initialAdd,wh,target,dir,depth,throttler){if(directory=sysPath$2.join(directory,EMPTY_STR$1),!wh.hasGlob&&!(throttler=this.fsw._throttle("readdir",directory,1e3)))return;const previous=this.fsw._getWatchedDir(wh.path),current=new Set;let stream=this.fsw._readdirp(directory,{fileFilter:entry=>wh.filterPath(entry),directoryFilter:entry=>wh.filterDir(entry),depth:0}).on(STR_DATA$1,(async entry=>{if(this.fsw.closed)return void(stream=void 0);const item=entry.path;let path=sysPath$2.join(directory,item);current.add(item),entry.stats.isSymbolicLink()&&await this._handleSymlink(entry,directory,path,item)||(this.fsw.closed?stream=void 0:item!==target&&(target||previous.has(item))||(this.fsw._incrReadyCount(),path=sysPath$2.join(dir,sysPath$2.relative(dir,path)),this._addToNodeFs(path,initialAdd,wh,depth+1)))})).on(EV_ERROR$2,this._boundHandleError);return new Promise((resolve=>stream.once(STR_END$2,(()=>{if(this.fsw.closed)return void(stream=void 0);const wasThrottled=!!throttler&&throttler.clear();resolve(),previous.getChildren().filter((item=>item!==directory&&!current.has(item)&&(!wh.hasGlob||wh.filterPath({fullPath:sysPath$2.resolve(directory,item)})))).forEach((item=>{this.fsw._remove(directory,item)})),stream=void 0,wasThrottled&&this._handleRead(directory,!1,wh,target,dir,depth,throttler)}))))}async _handleDir(dir,stats,initialAdd,depth,target,wh,realpath){const parentDir=this.fsw._getWatchedDir(sysPath$2.dirname(dir)),tracked=parentDir.has(sysPath$2.basename(dir));let closer;initialAdd&&this.fsw.options.ignoreInitial||target||tracked||wh.hasGlob&&!wh.globFilter(dir)||this.fsw._emit(EV_ADD_DIR$2,dir,stats),parentDir.add(sysPath$2.basename(dir)),this.fsw._getWatchedDir(dir);const oDepth=this.fsw.options.depth;if((null==oDepth||depth<=oDepth)&&!this.fsw._symlinkPaths.has(realpath)){if(!target&&(await this._handleRead(dir,initialAdd,wh,target,dir,depth,undefined),this.fsw.closed))return;closer=this._watchWithNodeFs(dir,((dirPath,stats)=>{stats&&0===stats.mtimeMs||this._handleRead(dirPath,!1,wh,target,dir,depth,undefined)}))}return closer}async _addToNodeFs(path,initialAdd,priorWh,depth,target){const ready=this.fsw._emitReady;if(this.fsw._isIgnored(path)||this.fsw.closed)return ready(),!1;const wh=this.fsw._getWatchHelpers(path,depth);!wh.hasGlob&&priorWh&&(wh.hasGlob=priorWh.hasGlob,wh.globFilter=priorWh.globFilter,wh.filterPath=entry=>priorWh.filterPath(entry),wh.filterDir=entry=>priorWh.filterDir(entry));try{const stats=await statMethods$1[wh.statMethod](wh.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(wh.watchPath,stats))return ready(),!1;const follow=this.fsw.options.followSymlinks&&!path.includes(STAR)&&!path.includes(BRACE_START$1);let closer;if(stats.isDirectory()){const absPath=sysPath$2.resolve(path),targetPath=follow?await fsrealpath(path):path;if(this.fsw.closed)return;if(closer=await this._handleDir(wh.watchPath,stats,initialAdd,depth,target,wh,targetPath),this.fsw.closed)return;absPath!==targetPath&&void 0!==targetPath&&this.fsw._symlinkPaths.set(absPath,targetPath)}else if(stats.isSymbolicLink()){const targetPath=follow?await fsrealpath(path):path;if(this.fsw.closed)return;const parent=sysPath$2.dirname(wh.watchPath);if(this.fsw._getWatchedDir(parent).add(wh.watchPath),this.fsw._emit(EV_ADD$2,wh.watchPath,stats),closer=await this._handleDir(parent,stats,initialAdd,depth,path,wh,targetPath),this.fsw.closed)return;void 0!==targetPath&&this.fsw._symlinkPaths.set(sysPath$2.resolve(path),targetPath)}else closer=this._handleFile(wh.watchPath,stats,initialAdd);return ready(),this.fsw._addPathCloser(path,closer),!1}catch(error){if(this.fsw._handleError(error))return ready(),path}}},fseventsHandler={exports:{}};const fs$1=require$$0$5,sysPath$1=require$$1,{promisify:promisify$1}=require$$2;let fsevents;try{fsevents=require("fsevents")}catch(error){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(error)}if(fsevents){const mtch=process.version.match(/v(\d+)\.(\d+)/);if(mtch&&mtch[1]&&mtch[2]){const maj=Number.parseInt(mtch[1],10),min=Number.parseInt(mtch[2],10);8===maj&&min<16&&(fsevents=void 0)}}const{EV_ADD:EV_ADD$1,EV_CHANGE:EV_CHANGE$1,EV_ADD_DIR:EV_ADD_DIR$1,EV_UNLINK:EV_UNLINK$1,EV_ERROR:EV_ERROR$1,STR_DATA:STR_DATA,STR_END:STR_END$1,FSEVENT_CREATED:FSEVENT_CREATED,FSEVENT_MODIFIED:FSEVENT_MODIFIED,FSEVENT_DELETED:FSEVENT_DELETED,FSEVENT_MOVED:FSEVENT_MOVED,FSEVENT_UNKNOWN:FSEVENT_UNKNOWN,FSEVENT_FLAG_MUST_SCAN_SUBDIRS:FSEVENT_FLAG_MUST_SCAN_SUBDIRS,FSEVENT_TYPE_FILE:FSEVENT_TYPE_FILE,FSEVENT_TYPE_DIRECTORY:FSEVENT_TYPE_DIRECTORY,FSEVENT_TYPE_SYMLINK:FSEVENT_TYPE_SYMLINK,ROOT_GLOBSTAR:ROOT_GLOBSTAR,DIR_SUFFIX:DIR_SUFFIX,DOT_SLASH:DOT_SLASH,FUNCTION_TYPE:FUNCTION_TYPE$1,EMPTY_FN:EMPTY_FN$1,IDENTITY_FN:IDENTITY_FN}=constants$1,stat$1=promisify$1(fs$1.stat),lstat=promisify$1(fs$1.lstat),realpath=promisify$1(fs$1.realpath),statMethods={stat:stat$1,lstat:lstat},FSEventsWatchers=new Map,wrongEventFlags=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),createFSEventsInstance=(path,callback)=>({stop:fsevents.watch(path,callback)});const couldConsolidate=path=>{let count=0;for(const watchPath of FSEventsWatchers.keys())if(0===watchPath.indexOf(path)&&(count++,count>=10))return!0;return!1},calcDepth=(path,root)=>{let i=0;for(;!path.indexOf(root)&&(path=sysPath$1.dirname(path))!==root;)i++;return i},sameTypes=(info,stats)=>info.type===FSEVENT_TYPE_DIRECTORY&&stats.isDirectory()||info.type===FSEVENT_TYPE_SYMLINK&&stats.isSymbolicLink()||info.type===FSEVENT_TYPE_FILE&&stats.isFile();fseventsHandler.exports=class{constructor(fsw){this.fsw=fsw}checkIgnored(path,stats){const ipaths=this.fsw._ignoredPaths;if(this.fsw._isIgnored(path,stats))return ipaths.add(path),stats&&stats.isDirectory()&&ipaths.add(path+ROOT_GLOBSTAR),!0;ipaths.delete(path),ipaths.delete(path+ROOT_GLOBSTAR)}addOrChange(path,fullPath,realPath,parent,watchedDir,item,info,opts){const event=watchedDir.has(item)?EV_CHANGE$1:EV_ADD$1;this.handleEvent(event,path,fullPath,realPath,parent,watchedDir,item,info,opts)}async checkExists(path,fullPath,realPath,parent,watchedDir,item,info,opts){try{const stats=await stat$1(path);if(this.fsw.closed)return;sameTypes(info,stats)?this.addOrChange(path,fullPath,realPath,parent,watchedDir,item,info,opts):this.handleEvent(EV_UNLINK$1,path,fullPath,realPath,parent,watchedDir,item,info,opts)}catch(error){"EACCES"===error.code?this.addOrChange(path,fullPath,realPath,parent,watchedDir,item,info,opts):this.handleEvent(EV_UNLINK$1,path,fullPath,realPath,parent,watchedDir,item,info,opts)}}handleEvent(event,path,fullPath,realPath,parent,watchedDir,item,info,opts){if(!this.fsw.closed&&!this.checkIgnored(path))if(event===EV_UNLINK$1){const isDirectory=info.type===FSEVENT_TYPE_DIRECTORY;(isDirectory||watchedDir.has(item))&&this.fsw._remove(parent,item,isDirectory)}else{if(event===EV_ADD$1){if(info.type===FSEVENT_TYPE_DIRECTORY&&this.fsw._getWatchedDir(path),info.type===FSEVENT_TYPE_SYMLINK&&opts.followSymlinks){const curDepth=void 0===opts.depth?void 0:calcDepth(fullPath,realPath)+1;return this._addToFsEvents(path,!1,!0,curDepth)}this.fsw._getWatchedDir(parent).add(item)}const eventName=info.type===FSEVENT_TYPE_DIRECTORY?event+DIR_SUFFIX:event;this.fsw._emit(eventName,path),eventName===EV_ADD_DIR$1&&this._addToFsEvents(path,!1,!0)}}_watchWithFsEvents(watchPath,realPath,transform,globFilter){if(this.fsw.closed||this.fsw._isIgnored(watchPath))return;const opts=this.fsw.options,closer=function(path,realPath,listener,rawEmitter){let watchPath=sysPath$1.extname(realPath)?sysPath$1.dirname(realPath):realPath;const parentPath=sysPath$1.dirname(watchPath);let cont=FSEventsWatchers.get(watchPath);couldConsolidate(parentPath)&&(watchPath=parentPath);const resolvedPath=sysPath$1.resolve(path),hasSymlink=resolvedPath!==realPath,filteredListener=(fullPath,flags,info)=>{hasSymlink&&(fullPath=fullPath.replace(realPath,resolvedPath)),fullPath!==resolvedPath&&fullPath.indexOf(resolvedPath+sysPath$1.sep)||listener(fullPath,flags,info)};let watchedParent=!1;for(const watchedPath of FSEventsWatchers.keys())if(0===realPath.indexOf(sysPath$1.resolve(watchedPath)+sysPath$1.sep)){watchPath=watchedPath,cont=FSEventsWatchers.get(watchPath),watchedParent=!0;break}return cont||watchedParent?cont.listeners.add(filteredListener):(cont={listeners:new Set([filteredListener]),rawEmitter:rawEmitter,watcher:createFSEventsInstance(watchPath,((fullPath,flags)=>{if(!cont.listeners.size)return;if(flags&FSEVENT_FLAG_MUST_SCAN_SUBDIRS)return;const info=fsevents.getInfo(fullPath,flags);cont.listeners.forEach((list=>{list(fullPath,flags,info)})),cont.rawEmitter(info.event,fullPath,info)}))},FSEventsWatchers.set(watchPath,cont)),()=>{const lst=cont.listeners;if(lst.delete(filteredListener),!lst.size&&(FSEventsWatchers.delete(watchPath),cont.watcher))return cont.watcher.stop().then((()=>{cont.rawEmitter=cont.watcher=void 0,Object.freeze(cont)}))}}(watchPath,realPath,(async(fullPath,flags,info)=>{if(this.fsw.closed)return;if(void 0!==opts.depth&&calcDepth(fullPath,realPath)>opts.depth)return;const path=transform(sysPath$1.join(watchPath,sysPath$1.relative(watchPath,fullPath)));if(globFilter&&!globFilter(path))return;const parent=sysPath$1.dirname(path),item=sysPath$1.basename(path),watchedDir=this.fsw._getWatchedDir(info.type===FSEVENT_TYPE_DIRECTORY?path:parent);if(wrongEventFlags.has(flags)||info.event===FSEVENT_UNKNOWN)if(typeof opts.ignored===FUNCTION_TYPE$1){let stats;try{stats=await stat$1(path)}catch(error){}if(this.fsw.closed)return;if(this.checkIgnored(path,stats))return;sameTypes(info,stats)?this.addOrChange(path,fullPath,realPath,parent,watchedDir,item,info,opts):this.handleEvent(EV_UNLINK$1,path,fullPath,realPath,parent,watchedDir,item,info,opts)}else this.checkExists(path,fullPath,realPath,parent,watchedDir,item,info,opts);else switch(info.event){case FSEVENT_CREATED:case FSEVENT_MODIFIED:return this.addOrChange(path,fullPath,realPath,parent,watchedDir,item,info,opts);case FSEVENT_DELETED:case FSEVENT_MOVED:return this.checkExists(path,fullPath,realPath,parent,watchedDir,item,info,opts)}}),this.fsw._emitRaw);return this.fsw._emitReady(),closer}async _handleFsEventsSymlink(linkPath,fullPath,transform,curDepth){if(!this.fsw.closed&&!this.fsw._symlinkPaths.has(fullPath)){this.fsw._symlinkPaths.set(fullPath,!0),this.fsw._incrReadyCount();try{const linkTarget=await realpath(linkPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(linkTarget))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(linkTarget||linkPath,(path=>{let aliasedPath=linkPath;return linkTarget&&linkTarget!==DOT_SLASH?aliasedPath=path.replace(linkTarget,linkPath):path!==DOT_SLASH&&(aliasedPath=sysPath$1.join(linkPath,path)),transform(aliasedPath)}),!1,curDepth)}catch(error){if(this.fsw._handleError(error))return this.fsw._emitReady()}}}emitAdd(newPath,stats,processPath,opts,forceAdd){const pp=processPath(newPath),isDir=stats.isDirectory(),dirObj=this.fsw._getWatchedDir(sysPath$1.dirname(pp)),base=sysPath$1.basename(pp);isDir&&this.fsw._getWatchedDir(pp),dirObj.has(base)||(dirObj.add(base),opts.ignoreInitial&&!0!==forceAdd||this.fsw._emit(isDir?EV_ADD_DIR$1:EV_ADD$1,pp,stats))}initWatch(realPath,path,wh,processPath){if(this.fsw.closed)return;const closer=this._watchWithFsEvents(wh.watchPath,sysPath$1.resolve(realPath||wh.watchPath),processPath,wh.globFilter);this.fsw._addPathCloser(path,closer)}async _addToFsEvents(path,transform,forceAdd,priorDepth){if(this.fsw.closed)return;const opts=this.fsw.options,processPath=typeof transform===FUNCTION_TYPE$1?transform:IDENTITY_FN,wh=this.fsw._getWatchHelpers(path);try{const stats=await statMethods[wh.statMethod](wh.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(wh.watchPath,stats))throw null;if(stats.isDirectory()){if(wh.globFilter||this.emitAdd(processPath(path),stats,processPath,opts,forceAdd),priorDepth&&priorDepth>opts.depth)return;this.fsw._readdirp(wh.watchPath,{fileFilter:entry=>wh.filterPath(entry),directoryFilter:entry=>wh.filterDir(entry),...(value=opts.depth-(priorDepth||0),isNaN(value)?{}:{depth:value})}).on(STR_DATA,(entry=>{if(this.fsw.closed)return;if(entry.stats.isDirectory()&&!wh.filterPath(entry))return;const joinedPath=sysPath$1.join(wh.watchPath,entry.path),{fullPath:fullPath}=entry;if(wh.followSymlinks&&entry.stats.isSymbolicLink()){const curDepth=void 0===opts.depth?void 0:calcDepth(joinedPath,sysPath$1.resolve(wh.watchPath))+1;this._handleFsEventsSymlink(joinedPath,fullPath,processPath,curDepth)}else this.emitAdd(joinedPath,entry.stats,processPath,opts,forceAdd)})).on(EV_ERROR$1,EMPTY_FN$1).on(STR_END$1,(()=>{this.fsw._emitReady()}))}else this.emitAdd(wh.watchPath,stats,processPath,opts,forceAdd),this.fsw._emitReady()}catch(error){error&&!this.fsw._handleError(error)||(this.fsw._emitReady(),this.fsw._emitReady())}var value;if(opts.persistent&&!0!==forceAdd)if(typeof transform===FUNCTION_TYPE$1)this.initWatch(void 0,path,wh,processPath);else{let realPath;try{realPath=await realpath(wh.watchPath)}catch(e){}this.initWatch(realPath,path,wh,processPath)}}},fseventsHandler.exports.canUse=()=>fsevents&&FSEventsWatchers.size<128;var fseventsHandlerExports=fseventsHandler.exports;const{EventEmitter:EventEmitter$2}=require$$0$6,fs=require$$0$5,sysPath=require$$1,{promisify:promisify}=require$$2,readdirp=readdirp_1,anymatch=anymatchExports.default,globParent=function(str,opts){Object.assign({flipBackslashes:!0},opts).flipBackslashes&&isWin32&&str.indexOf("/")<0&&(str=str.replace(backslash,"/")),enclosure.test(str)&&(str+="/"),str+="a";do{str=pathPosixDirname(str)}while(isGlob$1(str)||globby.test(str));return str.replace(escaped,"$1")},isGlob=isGlob$2,braces=braces_1,normalizePath=normalizePath$2,NodeFsHandler=nodefsHandler,FsEventsHandler=fseventsHandlerExports,{EV_ALL:EV_ALL,EV_READY:EV_READY,EV_ADD:EV_ADD,EV_CHANGE:EV_CHANGE,EV_UNLINK:EV_UNLINK,EV_ADD_DIR:EV_ADD_DIR,EV_UNLINK_DIR:EV_UNLINK_DIR,EV_RAW:EV_RAW,EV_ERROR:EV_ERROR,STR_CLOSE:STR_CLOSE,STR_END:STR_END,BACK_SLASH_RE:BACK_SLASH_RE,DOUBLE_SLASH_RE:DOUBLE_SLASH_RE,SLASH_OR_BACK_SLASH_RE:SLASH_OR_BACK_SLASH_RE,DOT_RE:DOT_RE,REPLACER_RE:REPLACER_RE,SLASH:SLASH,SLASH_SLASH:SLASH_SLASH,BRACE_START:BRACE_START,BANG:BANG,ONE_DOT:ONE_DOT,TWO_DOTS:TWO_DOTS,GLOBSTAR:GLOBSTAR,SLASH_GLOBSTAR:SLASH_GLOBSTAR,ANYMATCH_OPTS:ANYMATCH_OPTS,STRING_TYPE:STRING_TYPE,FUNCTION_TYPE:FUNCTION_TYPE,EMPTY_STR:EMPTY_STR,EMPTY_FN:EMPTY_FN,isWindows:isWindows$1,isMacos:isMacos,isIBMi:isIBMi}=constants$1,stat=promisify(fs.stat),readdir=promisify(fs.readdir),arrify=(value=[])=>Array.isArray(value)?value:[value],flatten=(list,result=[])=>(list.forEach((item=>{Array.isArray(item)?flatten(item,result):result.push(item)})),result),unifyPaths=paths_=>{const paths=flatten(arrify(paths_));if(!paths.every((p=>typeof p===STRING_TYPE)))throw new TypeError(`Non-string provided as watch path: ${paths}`);return paths.map(normalizePathToUnix)},toUnix=string=>{let str=string.replace(BACK_SLASH_RE,SLASH),prepend=!1;for(str.startsWith(SLASH_SLASH)&&(prepend=!0);str.match(DOUBLE_SLASH_RE);)str=str.replace(DOUBLE_SLASH_RE,SLASH);return prepend&&(str=SLASH+str),str},normalizePathToUnix=path=>toUnix(sysPath.normalize(toUnix(path))),normalizeIgnored=(cwd=EMPTY_STR)=>path=>typeof path!==STRING_TYPE?path:normalizePathToUnix(sysPath.isAbsolute(path)?path:sysPath.join(cwd,path)),undef=(opts,key)=>void 0===opts[key];class DirEntry{constructor(dir,removeWatcher){this.path=dir,this._removeWatcher=removeWatcher,this.items=new Set}add(item){const{items:items}=this;items&&item!==ONE_DOT&&item!==TWO_DOTS&&items.add(item)}async remove(item){const{items:items}=this;if(!items)return;if(items.delete(item),items.size>0)return;const dir=this.path;try{await readdir(dir)}catch(err){this._removeWatcher&&this._removeWatcher(sysPath.dirname(dir),sysPath.basename(dir))}}has(item){const{items:items}=this;if(items)return items.has(item)}getChildren(){const{items:items}=this;if(items)return[...items.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}class WatchHelper{constructor(path,watchPath,follow,fsw){this.fsw=fsw,this.path=path=path.replace(REPLACER_RE,EMPTY_STR),this.watchPath=watchPath,this.fullWatchPath=sysPath.resolve(watchPath),this.hasGlob=watchPath!==path,path===EMPTY_STR&&(this.hasGlob=!1),this.globSymlink=!(!this.hasGlob||!follow)&&void 0,this.globFilter=!!this.hasGlob&&anymatch(path,void 0,ANYMATCH_OPTS),this.dirParts=this.getDirParts(path),this.dirParts.forEach((parts=>{parts.length>1&&parts.pop()})),this.followSymlinks=follow,this.statMethod=follow?"stat":"lstat"}checkGlobSymlink(entry){return void 0===this.globSymlink&&(this.globSymlink=entry.fullParentDir!==this.fullWatchPath&&{realPath:entry.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?entry.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):entry.fullPath}entryPath(entry){return sysPath.join(this.watchPath,sysPath.relative(this.watchPath,this.checkGlobSymlink(entry)))}filterPath(entry){const{stats:stats}=entry;if(stats&&stats.isSymbolicLink())return this.filterDir(entry);const resolvedPath=this.entryPath(entry);return(!this.hasGlob||typeof this.globFilter!==FUNCTION_TYPE||this.globFilter(resolvedPath))&&this.fsw._isntIgnored(resolvedPath,stats)&&this.fsw._hasReadPermissions(stats)}getDirParts(path){if(!this.hasGlob)return[];const parts=[];return(path.includes(BRACE_START)?braces.expand(path):[path]).forEach((path=>{parts.push(sysPath.relative(this.watchPath,path).split(SLASH_OR_BACK_SLASH_RE))})),parts}filterDir(entry){if(this.hasGlob){const entryParts=this.getDirParts(this.checkGlobSymlink(entry));let globstar=!1;this.unmatchedGlob=!this.dirParts.some((parts=>parts.every(((part,i)=>(part===GLOBSTAR&&(globstar=!0),globstar||!entryParts[0][i]||anymatch(part,entryParts[0][i],ANYMATCH_OPTS))))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(entry),entry.stats)}}class FSWatcher extends EventEmitter$2{constructor(_opts){super();const opts={};_opts&&Object.assign(opts,_opts),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,undef(opts,"persistent")&&(opts.persistent=!0),undef(opts,"ignoreInitial")&&(opts.ignoreInitial=!1),undef(opts,"ignorePermissionErrors")&&(opts.ignorePermissionErrors=!1),undef(opts,"interval")&&(opts.interval=100),undef(opts,"binaryInterval")&&(opts.binaryInterval=300),undef(opts,"disableGlobbing")&&(opts.disableGlobbing=!1),opts.enableBinaryInterval=opts.binaryInterval!==opts.interval,undef(opts,"useFsEvents")&&(opts.useFsEvents=!opts.usePolling);FsEventsHandler.canUse()||(opts.useFsEvents=!1),undef(opts,"usePolling")&&!opts.useFsEvents&&(opts.usePolling=isMacos),isIBMi&&(opts.usePolling=!0);const envPoll=process.env.CHOKIDAR_USEPOLLING;if(void 0!==envPoll){const envLower=envPoll.toLowerCase();opts.usePolling="false"!==envLower&&"0"!==envLower&&("true"===envLower||"1"===envLower||!!envLower)}const envInterval=process.env.CHOKIDAR_INTERVAL;envInterval&&(opts.interval=Number.parseInt(envInterval,10)),undef(opts,"atomic")&&(opts.atomic=!opts.usePolling&&!opts.useFsEvents),opts.atomic&&(this._pendingUnlinks=new Map),undef(opts,"followSymlinks")&&(opts.followSymlinks=!0),undef(opts,"awaitWriteFinish")&&(opts.awaitWriteFinish=!1),!0===opts.awaitWriteFinish&&(opts.awaitWriteFinish={});const awf=opts.awaitWriteFinish;awf&&(awf.stabilityThreshold||(awf.stabilityThreshold=2e3),awf.pollInterval||(awf.pollInterval=100),this._pendingWrites=new Map),opts.ignored&&(opts.ignored=arrify(opts.ignored));let readyCalls=0;this._emitReady=()=>{readyCalls++,readyCalls>=this._readyCount&&(this._emitReady=EMPTY_FN,this._readyEmitted=!0,process.nextTick((()=>this.emit(EV_READY))))},this._emitRaw=(...args)=>this.emit(EV_RAW,...args),this._readyEmitted=!1,this.options=opts,opts.useFsEvents?this._fsEventsHandler=new FsEventsHandler(this):this._nodeFsHandler=new NodeFsHandler(this),Object.freeze(opts)}add(paths_,_origAdd,_internal){const{cwd:cwd,disableGlobbing:disableGlobbing}=this.options;this.closed=!1;let paths=unifyPaths(paths_);return cwd&&(paths=paths.map((path=>{const absPath=((path,cwd)=>sysPath.isAbsolute(path)?path:path.startsWith(BANG)?BANG+sysPath.join(cwd,path.slice(1)):sysPath.join(cwd,path))(path,cwd);return disableGlobbing||!isGlob(path)?absPath:normalizePath(absPath)}))),paths=paths.filter((path=>path.startsWith(BANG)?(this._ignoredPaths.add(path.slice(1)),!1):(this._ignoredPaths.delete(path),this._ignoredPaths.delete(path+SLASH_GLOBSTAR),this._userIgnored=void 0,!0))),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=paths.length),this.options.persistent&&(this._readyCount+=paths.length),paths.forEach((path=>this._fsEventsHandler._addToFsEvents(path)))):(this._readyCount||(this._readyCount=0),this._readyCount+=paths.length,Promise.all(paths.map((async path=>{const res=await this._nodeFsHandler._addToNodeFs(path,!_internal,0,0,_origAdd);return res&&this._emitReady(),res}))).then((results=>{this.closed||results.filter((item=>item)).forEach((item=>{this.add(sysPath.dirname(item),sysPath.basename(_origAdd||item))}))}))),this}unwatch(paths_){if(this.closed)return this;const paths=unifyPaths(paths_),{cwd:cwd}=this.options;return paths.forEach((path=>{sysPath.isAbsolute(path)||this._closers.has(path)||(cwd&&(path=sysPath.join(cwd,path)),path=sysPath.resolve(path)),this._closePath(path),this._ignoredPaths.add(path),this._watched.has(path)&&this._ignoredPaths.add(path+SLASH_GLOBSTAR),this._userIgnored=void 0})),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const closers=[];return this._closers.forEach((closerList=>closerList.forEach((closer=>{const promise=closer();promise instanceof Promise&&closers.push(promise)})))),this._streams.forEach((stream=>stream.destroy())),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach((dirent=>dirent.dispose())),["closers","watched","streams","symlinkPaths","throttled"].forEach((key=>{this[`_${key}`].clear()})),this._closePromise=closers.length?Promise.all(closers).then((()=>{})):Promise.resolve(),this._closePromise}getWatched(){const watchList={};return this._watched.forEach(((entry,dir)=>{const key=this.options.cwd?sysPath.relative(this.options.cwd,dir):dir;watchList[key||ONE_DOT]=entry.getChildren().sort()})),watchList}emitWithAll(event,args){this.emit(...args),event!==EV_ERROR&&this.emit(EV_ALL,...args)}async _emit(event,path,val1,val2,val3){if(this.closed)return;const opts=this.options;isWindows$1&&(path=sysPath.normalize(path)),opts.cwd&&(path=sysPath.relative(opts.cwd,path));const args=[event,path];void 0!==val3?args.push(val1,val2,val3):void 0!==val2?args.push(val1,val2):void 0!==val1&&args.push(val1);const awf=opts.awaitWriteFinish;let pw;if(awf&&(pw=this._pendingWrites.get(path)))return pw.lastChange=new Date,this;if(opts.atomic){if(event===EV_UNLINK)return this._pendingUnlinks.set(path,args),setTimeout((()=>{this._pendingUnlinks.forEach(((entry,path)=>{this.emit(...entry),this.emit(EV_ALL,...entry),this._pendingUnlinks.delete(path)}))}),"number"==typeof opts.atomic?opts.atomic:100),this;event===EV_ADD&&this._pendingUnlinks.has(path)&&(event=args[0]=EV_CHANGE,this._pendingUnlinks.delete(path))}if(awf&&(event===EV_ADD||event===EV_CHANGE)&&this._readyEmitted){const awfEmit=(err,stats)=>{err?(event=args[0]=EV_ERROR,args[1]=err,this.emitWithAll(event,args)):stats&&(args.length>2?args[2]=stats:args.push(stats),this.emitWithAll(event,args))};return this._awaitWriteFinish(path,awf.stabilityThreshold,event,awfEmit),this}if(event===EV_CHANGE){if(!this._throttle(EV_CHANGE,path,50))return this}if(opts.alwaysStat&&void 0===val1&&(event===EV_ADD||event===EV_ADD_DIR||event===EV_CHANGE)){const fullPath=opts.cwd?sysPath.join(opts.cwd,path):path;let stats;try{stats=await stat(fullPath)}catch(err){}if(!stats||this.closed)return;args.push(stats)}return this.emitWithAll(event,args),this}_handleError(error){const code=error&&error.code;return error&&"ENOENT"!==code&&"ENOTDIR"!==code&&(!this.options.ignorePermissionErrors||"EPERM"!==code&&"EACCES"!==code)&&this.emit(EV_ERROR,error),error||this.closed}_throttle(actionType,path,timeout){this._throttled.has(actionType)||this._throttled.set(actionType,new Map);const action=this._throttled.get(actionType),actionPath=action.get(path);if(actionPath)return actionPath.count++,!1;let timeoutObject;const clear=()=>{const item=action.get(path),count=item?item.count:0;return action.delete(path),clearTimeout(timeoutObject),item&&clearTimeout(item.timeoutObject),count};timeoutObject=setTimeout(clear,timeout);const thr={timeoutObject:timeoutObject,clear:clear,count:0};return action.set(path,thr),thr}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(path,threshold,event,awfEmit){let timeoutHandler,fullPath=path;this.options.cwd&&!sysPath.isAbsolute(path)&&(fullPath=sysPath.join(this.options.cwd,path));const now=new Date,awaitWriteFinish=prevStat=>{fs.stat(fullPath,((err,curStat)=>{if(err||!this._pendingWrites.has(path))return void(err&&"ENOENT"!==err.code&&awfEmit(err));const now=Number(new Date);prevStat&&curStat.size!==prevStat.size&&(this._pendingWrites.get(path).lastChange=now);now-this._pendingWrites.get(path).lastChange>=threshold?(this._pendingWrites.delete(path),awfEmit(void 0,curStat)):timeoutHandler=setTimeout(awaitWriteFinish,this.options.awaitWriteFinish.pollInterval,curStat)}))};this._pendingWrites.has(path)||(this._pendingWrites.set(path,{lastChange:now,cancelWait:()=>(this._pendingWrites.delete(path),clearTimeout(timeoutHandler),event)}),timeoutHandler=setTimeout(awaitWriteFinish,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(path,stats){if(this.options.atomic&&DOT_RE.test(path))return!0;if(!this._userIgnored){const{cwd:cwd}=this.options,ign=this.options.ignored,ignored=ign&&ign.map(normalizeIgnored(cwd)),paths=arrify(ignored).filter((path=>typeof path===STRING_TYPE&&!isGlob(path))).map((path=>path+SLASH_GLOBSTAR)),list=this._getGlobIgnored().map(normalizeIgnored(cwd)).concat(ignored,paths);this._userIgnored=anymatch(list,void 0,ANYMATCH_OPTS)}return this._userIgnored([path,stats])}_isntIgnored(path,stat){return!this._isIgnored(path,stat)}_getWatchHelpers(path,depth){const watchPath=depth||this.options.disableGlobbing||!isGlob(path)?path:globParent(path),follow=this.options.followSymlinks;return new WatchHelper(path,watchPath,follow,this)}_getWatchedDir(directory){this._boundRemove||(this._boundRemove=this._remove.bind(this));const dir=sysPath.resolve(directory);return this._watched.has(dir)||this._watched.set(dir,new DirEntry(dir,this._boundRemove)),this._watched.get(dir)}_hasReadPermissions(stats){if(this.options.ignorePermissionErrors)return!0;const st=511&(stats&&Number.parseInt(stats.mode,10)),it=Number.parseInt(st.toString(8)[0],10);return Boolean(4&it)}_remove(directory,item,isDirectory){const path=sysPath.join(directory,item),fullPath=sysPath.resolve(path);if(isDirectory=null!=isDirectory?isDirectory:this._watched.has(path)||this._watched.has(fullPath),!this._throttle("remove",path,100))return;isDirectory||this.options.useFsEvents||1!==this._watched.size||this.add(directory,item,!0);this._getWatchedDir(path).getChildren().forEach((nested=>this._remove(path,nested)));const parent=this._getWatchedDir(directory),wasTracked=parent.has(item);parent.remove(item),this._symlinkPaths.has(fullPath)&&this._symlinkPaths.delete(fullPath);let relPath=path;if(this.options.cwd&&(relPath=sysPath.relative(this.options.cwd,path)),this.options.awaitWriteFinish&&this._pendingWrites.has(relPath)){if(this._pendingWrites.get(relPath).cancelWait()===EV_ADD)return}this._watched.delete(path),this._watched.delete(fullPath);const eventName=isDirectory?EV_UNLINK_DIR:EV_UNLINK;wasTracked&&!this._isIgnored(path)&&this._emit(eventName,path),this.options.useFsEvents||this._closePath(path)}_closePath(path){this._closeFile(path);const dir=sysPath.dirname(path);this._getWatchedDir(dir).remove(sysPath.basename(path))}_closeFile(path){const closers=this._closers.get(path);closers&&(closers.forEach((closer=>closer())),this._closers.delete(path))}_addPathCloser(path,closer){if(!closer)return;let list=this._closers.get(path);list||(list=[],this._closers.set(path,list)),list.push(closer)}_readdirp(root,opts){if(this.closed)return;const options={type:EV_ALL,alwaysStat:!0,lstat:!0,...opts};let stream=readdirp(root,options);return this._streams.add(stream),stream.once(STR_CLOSE,(()=>{stream=void 0})),stream.once(STR_END,(()=>{stream&&(this._streams.delete(stream),stream=void 0)})),stream}}chokidar.FSWatcher=FSWatcher;chokidar.watch=(paths,options)=>{const watcher=new FSWatcher(options);return watcher.add(paths),watcher};var dist$1={exports:{}},negotiator={exports:{}},charset={exports:{}};charset.exports=preferredCharsets$1,charset.exports.preferredCharsets=preferredCharsets$1;var simpleCharsetRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseCharset(str,i){var match=simpleCharsetRegExp.exec(str);if(!match)return null;var charset=match[1],q=1;if(match[2])for(var params=match[2].split(";"),j=0;j<params.length;j++){var p=params[j].trim().split("=");if("q"===p[0]){q=parseFloat(p[1]);break}}return{charset:charset,q:q,i:i}}function specify$3(charset,spec,index){var s=0;if(spec.charset.toLowerCase()===charset.toLowerCase())s|=1;else if("*"!==spec.charset)return null;return{i:index,o:spec.i,q:spec.q,s:s}}function preferredCharsets$1(accept,provided){var accepts=function(accept){for(var accepts=accept.split(","),i=0,j=0;i<accepts.length;i++){var charset=parseCharset(accepts[i].trim(),i);charset&&(accepts[j++]=charset)}return accepts.length=j,accepts}(void 0===accept?"*":accept||"");if(!provided)return accepts.filter(isQuality$3).sort(compareSpecs$3).map(getFullCharset);var priorities=provided.map((function(type,index){return function(charset,accepted,index){for(var priority={o:-1,q:0,s:0},i=0;i<accepted.length;i++){var spec=specify$3(charset,accepted[i],index);spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0&&(priority=spec)}return priority}(type,accepts,index)}));return priorities.filter(isQuality$3).sort(compareSpecs$3).map((function(priority){return provided[priorities.indexOf(priority)]}))}function compareSpecs$3(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullCharset(spec){return spec.charset}function isQuality$3(spec){return spec.q>0}var charsetExports=charset.exports,encoding={exports:{}};encoding.exports=preferredEncodings$1,encoding.exports.preferredEncodings=preferredEncodings$1;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseEncoding(str,i){var match=simpleEncodingRegExp.exec(str);if(!match)return null;var encoding=match[1],q=1;if(match[2])for(var params=match[2].split(";"),j=0;j<params.length;j++){var p=params[j].trim().split("=");if("q"===p[0]){q=parseFloat(p[1]);break}}return{encoding:encoding,q:q,i:i}}function specify$2(encoding,spec,index){var s=0;if(spec.encoding.toLowerCase()===encoding.toLowerCase())s|=1;else if("*"!==spec.encoding)return null;return{i:index,o:spec.i,q:spec.q,s:s}}function preferredEncodings$1(accept,provided){var accepts=function(accept){for(var accepts=accept.split(","),hasIdentity=!1,minQuality=1,i=0,j=0;i<accepts.length;i++){var encoding=parseEncoding(accepts[i].trim(),i);encoding&&(accepts[j++]=encoding,hasIdentity=hasIdentity||specify$2("identity",encoding),minQuality=Math.min(minQuality,encoding.q||1))}return hasIdentity||(accepts[j++]={encoding:"identity",q:minQuality,i:i}),accepts.length=j,accepts}(accept||"");if(!provided)return accepts.filter(isQuality$2).sort(compareSpecs$2).map(getFullEncoding);var priorities=provided.map((function(type,index){return function(encoding,accepted,index){for(var priority={o:-1,q:0,s:0},i=0;i<accepted.length;i++){var spec=specify$2(encoding,accepted[i],index);spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0&&(priority=spec)}return priority}(type,accepts,index)}));return priorities.filter(isQuality$2).sort(compareSpecs$2).map((function(priority){return provided[priorities.indexOf(priority)]}))}function compareSpecs$2(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullEncoding(spec){return spec.encoding}function isQuality$2(spec){return spec.q>0}var encodingExports=encoding.exports,language={exports:{}};language.exports=preferredLanguages$1,language.exports.preferredLanguages=preferredLanguages$1;var simpleLanguageRegExp=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function parseLanguage(str,i){var match=simpleLanguageRegExp.exec(str);if(!match)return null;var prefix=match[1],suffix=match[2],full=prefix;suffix&&(full+="-"+suffix);var q=1;if(match[3])for(var params=match[3].split(";"),j=0;j<params.length;j++){var p=params[j].split("=");"q"===p[0]&&(q=parseFloat(p[1]))}return{prefix:prefix,suffix:suffix,q:q,i:i,full:full}}function specify$1(language,spec,index){var p=parseLanguage(language);if(!p)return null;var s=0;if(spec.full.toLowerCase()===p.full.toLowerCase())s|=4;else if(spec.prefix.toLowerCase()===p.full.toLowerCase())s|=2;else if(spec.full.toLowerCase()===p.prefix.toLowerCase())s|=1;else if("*"!==spec.full)return null;return{i:index,o:spec.i,q:spec.q,s:s}}function preferredLanguages$1(accept,provided){var accepts=function(accept){for(var accepts=accept.split(","),i=0,j=0;i<accepts.length;i++){var language=parseLanguage(accepts[i].trim(),i);language&&(accepts[j++]=language)}return accepts.length=j,accepts}(void 0===accept?"*":accept||"");if(!provided)return accepts.filter(isQuality$1).sort(compareSpecs$1).map(getFullLanguage);var priorities=provided.map((function(type,index){return function(language,accepted,index){for(var priority={o:-1,q:0,s:0},i=0;i<accepted.length;i++){var spec=specify$1(language,accepted[i],index);spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0&&(priority=spec)}return priority}(type,accepts,index)}));return priorities.filter(isQuality$1).sort(compareSpecs$1).map((function(priority){return provided[priorities.indexOf(priority)]}))}function compareSpecs$1(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullLanguage(spec){return spec.full}function isQuality$1(spec){return spec.q>0}var languageExports=language.exports,mediaType={exports:{}};mediaType.exports=preferredMediaTypes$1,mediaType.exports.preferredMediaTypes=preferredMediaTypes$1;var simpleMediaTypeRegExp=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function parseAccept(accept){for(var accepts=function(accept){for(var accepts=accept.split(","),i=1,j=0;i<accepts.length;i++)quoteCount(accepts[j])%2==0?accepts[++j]=accepts[i]:accepts[j]+=","+accepts[i];return accepts.length=j+1,accepts}(accept),i=0,j=0;i<accepts.length;i++){var mediaType=parseMediaType(accepts[i].trim(),i);mediaType&&(accepts[j++]=mediaType)}return accepts.length=j,accepts}function parseMediaType(str,i){var match=simpleMediaTypeRegExp.exec(str);if(!match)return null;var params=Object.create(null),q=1,subtype=match[2],type=match[1];if(match[3])for(var kvps=function(str){for(var parameters=str.split(";"),i=1,j=0;i<parameters.length;i++)quoteCount(parameters[j])%2==0?parameters[++j]=parameters[i]:parameters[j]+=";"+parameters[i];parameters.length=j+1;for(i=0;i<parameters.length;i++)parameters[i]=parameters[i].trim();return parameters}(match[3]).map(splitKeyValuePair),j=0;j<kvps.length;j++){var pair=kvps[j],key=pair[0].toLowerCase(),val=pair[1],value=val&&'"'===val[0]&&'"'===val[val.length-1]?val.substr(1,val.length-2):val;if("q"===key){q=parseFloat(value);break}params[key]=value}return{type:type,subtype:subtype,params:params,q:q,i:i}}function specify(type,spec,index){var p=parseMediaType(type),s=0;if(!p)return null;if(spec.type.toLowerCase()==p.type.toLowerCase())s|=4;else if("*"!=spec.type)return null;if(spec.subtype.toLowerCase()==p.subtype.toLowerCase())s|=2;else if("*"!=spec.subtype)return null;var keys=Object.keys(spec.params);if(keys.length>0){if(!keys.every((function(k){return"*"==spec.params[k]||(spec.params[k]||"").toLowerCase()==(p.params[k]||"").toLowerCase()})))return null;s|=1}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredMediaTypes$1(accept,provided){var accepts=parseAccept(void 0===accept?"*/*":accept||"");if(!provided)return accepts.filter(isQuality).sort(compareSpecs).map(getFullType);var priorities=provided.map((function(type,index){return function(type,accepted,index){for(var priority={o:-1,q:0,s:0},i=0;i<accepted.length;i++){var spec=specify(type,accepted[i],index);spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0&&(priority=spec)}return priority}(type,accepts,index)}));return priorities.filter(isQuality).sort(compareSpecs).map((function(priority){return provided[priorities.indexOf(priority)]}))}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullType(spec){return spec.type+"/"+spec.subtype}function isQuality(spec){return spec.q>0}function quoteCount(string){for(var count=0,index=0;-1!==(index=string.indexOf('"',index));)count++,index++;return count}function splitKeyValuePair(str){var key,val,index=str.indexOf("=");return-1===index?key=str:(key=str.substr(0,index),val=str.substr(index+1)),[key,val]}var mediaTypeExports=mediaType.exports,preferredCharsets=charsetExports,preferredEncodings=encodingExports,preferredLanguages=languageExports,preferredMediaTypes=mediaTypeExports;function Negotiator$1(request){if(!(this instanceof Negotiator$1))return new Negotiator$1(request);this.request=request}negotiator.exports=Negotiator$1,negotiator.exports.Negotiator=Negotiator$1,Negotiator$1.prototype.charset=function(available){var set=this.charsets(available);return set&&set[0]},Negotiator$1.prototype.charsets=function(available){return preferredCharsets(this.request.headers["accept-charset"],available)},Negotiator$1.prototype.encoding=function(available){var set=this.encodings(available);return set&&set[0]},Negotiator$1.prototype.encodings=function(available){return preferredEncodings(this.request.headers["accept-encoding"],available)},Negotiator$1.prototype.language=function(available){var set=this.languages(available);return set&&set[0]},Negotiator$1.prototype.languages=function(available){return preferredLanguages(this.request.headers["accept-language"],available)},Negotiator$1.prototype.mediaType=function(available){var set=this.mediaTypes(available);return set&&set[0]},Negotiator$1.prototype.mediaTypes=function(available){return preferredMediaTypes(this.request.headers.accept,available)},Negotiator$1.prototype.preferredCharset=Negotiator$1.prototype.charset,Negotiator$1.prototype.preferredCharsets=Negotiator$1.prototype.charsets,Negotiator$1.prototype.preferredEncoding=Negotiator$1.prototype.encoding,Negotiator$1.prototype.preferredEncodings=Negotiator$1.prototype.encodings,Negotiator$1.prototype.preferredLanguage=Negotiator$1.prototype.language,Negotiator$1.prototype.preferredLanguages=Negotiator$1.prototype.languages,Negotiator$1.prototype.preferredMediaType=Negotiator$1.prototype.mediaType,Negotiator$1.prototype.preferredMediaTypes=Negotiator$1.prototype.mediaTypes;var negotiatorExports=negotiator.exports,mimeTypes={},mimeDb={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};!function(exports){var db=mimeDb,extname=require$$1.extname,EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/,TEXT_TYPE_REGEXP=/^text\//i;function charset(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),mime=match&&db[match[1].toLowerCase()];return mime&&mime.charset?mime.charset:!(!match||!TEXT_TYPE_REGEXP.test(match[1]))&&"UTF-8"}exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=function(str){if(!str||"string"!=typeof str)return!1;var mime=-1===str.indexOf("/")?exports.lookup(str):str;if(!mime)return!1;if(-1===mime.indexOf("charset")){var charset=exports.charset(mime);charset&&(mime+="; charset="+charset.toLowerCase())}return mime},exports.extension=function(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),exts=match&&exports.extensions[match[1].toLowerCase()];if(!exts||!exts.length)return!1;return exts[0]},exports.extensions=Object.create(null),exports.lookup=function(path){if(!path||"string"!=typeof path)return!1;var extension=extname("x."+path).toLowerCase().substr(1);if(!extension)return!1;return exports.types[extension]||!1},exports.types=Object.create(null),function(extensions,types){var preference=["nginx","apache",void 0,"iana"];Object.keys(db).forEach((function(type){var mime=db[type],exts=mime.extensions;if(exts&&exts.length){extensions[type]=exts;for(var i=0;i<exts.length;i++){var extension=exts[i];if(types[extension]){var from=preference.indexOf(db[types[extension]].source),to=preference.indexOf(mime.source);if("application/octet-stream"!==types[extension]&&(from>to||from===to&&"application/"===types[extension].substr(0,12)))continue}types[extension]=type}}}))}(exports.extensions,exports.types)}(mimeTypes);var Negotiator=negotiatorExports,mime=mimeTypes,accepts$2=Accepts;function Accepts(req){if(!(this instanceof Accepts))return new Accepts(req);this.headers=req.headers,this.negotiator=new Negotiator(req)}function extToMime(type){return-1===type.indexOf("/")?mime.lookup(type):type}function validMime(type){return"string"==typeof type}Accepts.prototype.type=Accepts.prototype.types=function(types_){var types=types_;if(types&&!Array.isArray(types)){types=new Array(arguments.length);for(var i=0;i<types.length;i++)types[i]=arguments[i]}if(!types||0===types.length)return this.negotiator.mediaTypes();if(!this.headers.accept)return types[0];var mimes=types.map(extToMime),first=this.negotiator.mediaTypes(mimes.filter(validMime))[0];return!!first&&types[mimes.indexOf(first)]},Accepts.prototype.encoding=Accepts.prototype.encodings=function(encodings_){var encodings=encodings_;if(encodings&&!Array.isArray(encodings)){encodings=new Array(arguments.length);for(var i=0;i<encodings.length;i++)encodings[i]=arguments[i]}return encodings&&0!==encodings.length?this.negotiator.encodings(encodings)[0]||!1:this.negotiator.encodings()},Accepts.prototype.charset=Accepts.prototype.charsets=function(charsets_){var charsets=charsets_;if(charsets&&!Array.isArray(charsets)){charsets=new Array(arguments.length);for(var i=0;i<charsets.length;i++)charsets[i]=arguments[i]}return charsets&&0!==charsets.length?this.negotiator.charsets(charsets)[0]||!1:this.negotiator.charsets()},Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(languages_){var languages=languages_;if(languages&&!Array.isArray(languages)){languages=new Array(arguments.length);for(var i=0;i<languages.length;i++)languages[i]=arguments[i]}return languages&&0!==languages.length?this.negotiator.languages(languages)[0]||!1:this.negotiator.languages()};var engine_io={},server={},base64id$1={exports:{}};!function(module,exports){var crypto=require$$0$7,Base64Id=function(){};Base64Id.prototype.getRandomBytes=function(bytes){var self=this;if((bytes=bytes||12)>4096)return crypto.randomBytes(bytes);var bytesInBuffer=parseInt(4096/bytes),threshold=parseInt(.85*bytesInBuffer);if(!threshold)return crypto.randomBytes(bytes);if(null==this.bytesBufferIndex&&(this.bytesBufferIndex=-1),this.bytesBufferIndex==bytesInBuffer&&(this.bytesBuffer=null,this.bytesBufferIndex=-1),(-1==this.bytesBufferIndex||this.bytesBufferIndex>threshold)&&(this.isGeneratingBytes||(this.isGeneratingBytes=!0,crypto.randomBytes(4096,(function(err,bytes){self.bytesBuffer=bytes,self.bytesBufferIndex=0,self.isGeneratingBytes=!1}))),-1==this.bytesBufferIndex))return crypto.randomBytes(bytes);var result=this.bytesBuffer.slice(bytes*this.bytesBufferIndex,bytes*(this.bytesBufferIndex+1));return this.bytesBufferIndex++,result},Base64Id.prototype.generateId=function(){var rand=Buffer.alloc(15);return rand.writeInt32BE?(this.sequenceNumber=this.sequenceNumber+1|0,rand.writeInt32BE(this.sequenceNumber,11),crypto.randomBytes?this.getRandomBytes(12).copy(rand):[0,4,8].forEach((function(i){rand.writeInt32BE(Math.random()*Math.pow(2,32)|0,i)})),rand.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")):Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()},module.exports=new Base64Id}(base64id$1);var base64idExports=base64id$1.exports,transports={},polling$2={},transport={},cjs$1={},encodePacket={},commons={};Object.defineProperty(commons,"__esModule",{value:!0}),commons.ERROR_PACKET=commons.PACKET_TYPES_REVERSE=commons.PACKET_TYPES=void 0;const PACKET_TYPES=Object.create(null);commons.PACKET_TYPES=PACKET_TYPES,PACKET_TYPES.open="0",PACKET_TYPES.close="1",PACKET_TYPES.ping="2",PACKET_TYPES.pong="3",PACKET_TYPES.message="4",PACKET_TYPES.upgrade="5",PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);commons.PACKET_TYPES_REVERSE=PACKET_TYPES_REVERSE,Object.keys(PACKET_TYPES).forEach((key=>{PACKET_TYPES_REVERSE[PACKET_TYPES[key]]=key}));commons.ERROR_PACKET={type:"error",data:"parser error"},function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodePacketToBinary=exports.encodePacket=void 0;const commons_js_1=commons;exports.encodePacket=({type:type,data:data},supportsBinary,callback)=>data instanceof ArrayBuffer||ArrayBuffer.isView(data)?callback(supportsBinary?data:"b"+toBuffer(data,!0).toString("base64")):callback(commons_js_1.PACKET_TYPES[type]+(data||""));const toBuffer=(data,forceBufferConversion)=>Buffer.isBuffer(data)||data instanceof Uint8Array&&!forceBufferConversion?data:data instanceof ArrayBuffer?Buffer.from(data):Buffer.from(data.buffer,data.byteOffset,data.byteLength);let TEXT_ENCODER;exports.encodePacketToBinary=function(packet,callback){if(packet.data instanceof ArrayBuffer||ArrayBuffer.isView(packet.data))return callback(toBuffer(packet.data,!1));(0,exports.encodePacket)(packet,!0,(encoded=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),callback(TEXT_ENCODER.encode(encoded))}))}}(encodePacket);var decodePacket$1={};Object.defineProperty(decodePacket$1,"__esModule",{value:!0}),decodePacket$1.decodePacket=void 0;const commons_js_1=commons;decodePacket$1.decodePacket=(encodedPacket,binaryType)=>{if("string"!=typeof encodedPacket)return{type:"message",data:mapBinary(encodedPacket,binaryType)};const type=encodedPacket.charAt(0);if("b"===type){const buffer=Buffer.from(encodedPacket.substring(1),"base64");return{type:"message",data:mapBinary(buffer,binaryType)}}return commons_js_1.PACKET_TYPES_REVERSE[type]?encodedPacket.length>1?{type:commons_js_1.PACKET_TYPES_REVERSE[type],data:encodedPacket.substring(1)}:{type:commons_js_1.PACKET_TYPES_REVERSE[type]}:commons_js_1.ERROR_PACKET};const mapBinary=(data,binaryType)=>"arraybuffer"===binaryType?data instanceof ArrayBuffer?data:Buffer.isBuffer(data)?data.buffer.slice(data.byteOffset,data.byteOffset+data.byteLength):data.buffer:Buffer.isBuffer(data)?data:Buffer.from(data);!function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodePayload=exports.decodePacket=exports.encodePayload=exports.encodePacket=exports.protocol=exports.createPacketDecoderStream=exports.createPacketEncoderStream=void 0;const encodePacket_js_1=encodePacket;Object.defineProperty(exports,"encodePacket",{enumerable:!0,get:function(){return encodePacket_js_1.encodePacket}});const decodePacket_js_1=decodePacket$1;Object.defineProperty(exports,"decodePacket",{enumerable:!0,get:function(){return decodePacket_js_1.decodePacket}});const commons_js_1=commons,SEPARATOR=String.fromCharCode(30);exports.encodePayload=(packets,callback)=>{const length=packets.length,encodedPackets=new Array(length);let count=0;packets.forEach(((packet,i)=>{(0,encodePacket_js_1.encodePacket)(packet,!1,(encodedPacket=>{encodedPackets[i]=encodedPacket,++count===length&&callback(encodedPackets.join(SEPARATOR))}))}))};let TEXT_DECODER;function totalLength(chunks){return chunks.reduce(((acc,chunk)=>acc+chunk.length),0)}function concatChunks(chunks,size){if(chunks[0].length===size)return chunks.shift();const buffer=new Uint8Array(size);let j=0;for(let i=0;i<size;i++)buffer[i]=chunks[0][j++],j===chunks[0].length&&(chunks.shift(),j=0);return chunks.length&&j<chunks[0].length&&(chunks[0]=chunks[0].slice(j)),buffer}exports.decodePayload=(encodedPayload,binaryType)=>{const encodedPackets=encodedPayload.split(SEPARATOR),packets=[];for(let i=0;i<encodedPackets.length;i++){const decodedPacket=(0,decodePacket_js_1.decodePacket)(encodedPackets[i],binaryType);if(packets.push(decodedPacket),"error"===decodedPacket.type)break}return packets},exports.createPacketEncoderStream=function(){return new TransformStream({transform(packet,controller){(0,encodePacket_js_1.encodePacketToBinary)(packet,(encodedPacket=>{const payloadLength=encodedPacket.length;let header;if(payloadLength<126)header=new Uint8Array(1),new DataView(header.buffer).setUint8(0,payloadLength);else if(payloadLength<65536){header=new Uint8Array(3);const view=new DataView(header.buffer);view.setUint8(0,126),view.setUint16(1,payloadLength)}else{header=new Uint8Array(9);const view=new DataView(header.buffer);view.setUint8(0,127),view.setBigUint64(1,BigInt(payloadLength))}packet.data&&"string"!=typeof packet.data&&(header[0]|=128),controller.enqueue(header),controller.enqueue(encodedPacket)}))}})},exports.createPacketDecoderStream=function(maxPayload,binaryType){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const chunks=[];let state=0,expectedLength=-1,isBinary=!1;return new TransformStream({transform(chunk,controller){for(chunks.push(chunk);;){if(0===state){if(totalLength(chunks)<1)break;const header=concatChunks(chunks,1);isBinary=128==(128&header[0]),expectedLength=127&header[0],state=expectedLength<126?3:126===expectedLength?1:2}else if(1===state){if(totalLength(chunks)<2)break;const headerArray=concatChunks(chunks,2);expectedLength=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length).getUint16(0),state=3}else if(2===state){if(totalLength(chunks)<8)break;const headerArray=concatChunks(chunks,8),view=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length),n=view.getUint32(0);if(n>Math.pow(2,21)-1){controller.enqueue(commons_js_1.ERROR_PACKET);break}expectedLength=n*Math.pow(2,32)+view.getUint32(4),state=3}else{if(totalLength(chunks)<expectedLength)break;const data=concatChunks(chunks,expectedLength);controller.enqueue((0,decodePacket_js_1.decodePacket)(isBinary?data:TEXT_DECODER.decode(data),binaryType)),state=0}if(0===expectedLength||expectedLength>maxPayload){controller.enqueue(commons_js_1.ERROR_PACKET);break}}}})},exports.protocol=4}(cjs$1);var byteArray,byteCount,byteIndex,parserV3={},stringFromCharCode=String.fromCharCode;function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function checkScalarValue(codePoint,strict){if(codePoint>=55296&&codePoint<=57343){if(strict)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint,strict){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(checkScalarValue(codePoint,strict)||(codePoint=65533),symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(strict){var byte1,codePoint;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){if((codePoint=(31&byte1)<<6|readContinuationByte())>=128)return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if((codePoint=(15&byte1)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(codePoint,strict)?codePoint:65533;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(codePoint=(7&byte1)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&codePoint<=1114111)return codePoint;throw Error("Invalid UTF-8 detected")}var utf8={version:"2.1.2",encode:function(string,opts){for(var strict=!1!==(opts=opts||{}).strict,codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index],strict);return byteString},decode:function(byteString,opts){var strict=!1!==(opts=opts||{}).strict;byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];!1!==(tmp=decodeSymbol(strict));)codePoints.push(tmp);return function(array){for(var value,length=array.length,index=-1,output="";++index<length;)(value=array[index])>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}(codePoints)}};!function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodePayloadAsBinary=exports.encodePayloadAsBinary=exports.decodePayload=exports.encodePayload=exports.decodeBase64Packet=exports.decodePacket=exports.encodeBase64Packet=exports.encodePacket=exports.packets=exports.protocol=void 0;var utf8$1=utf8;exports.protocol=3;exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=Object.keys(exports.packets),err={type:"error",data:"parser error"};const EMPTY_BUFFER=Buffer.concat([]);function encodePacket(packet,supportsBinary,utf8encode,callback){if("function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null),"function"==typeof utf8encode&&(callback=utf8encode,utf8encode=null),Buffer.isBuffer(packet.data))return encodeBuffer(packet,supportsBinary,callback);if(packet.data&&(packet.data.buffer||packet.data)instanceof ArrayBuffer)return encodeBuffer({type:packet.type,data:arrayBufferToBuffer(packet.data)},supportsBinary,callback);var encoded=exports.packets[packet.type];return void 0!==packet.data&&(encoded+=utf8encode?utf8$1.encode(String(packet.data),{strict:!1}):String(packet.data)),callback(""+encoded)}function encodeBuffer(packet,supportsBinary,callback){if(!supportsBinary)return encodeBase64Packet(packet,callback);var data=packet.data,typeBuffer=Buffer.allocUnsafe(1);return typeBuffer[0]=exports.packets[packet.type],callback(Buffer.concat([typeBuffer,data]))}function encodeBase64Packet(packet,callback){var data=Buffer.isBuffer(packet.data)?packet.data:arrayBufferToBuffer(packet.data),message="b"+exports.packets[packet.type];return callback(message+=data.toString("base64"))}function decodePacket(data,binaryType,utf8decode){if(void 0===data)return err;var type;if("string"==typeof data)return"b"===(type=data.charAt(0))?decodeBase64Packet(data.slice(1),binaryType):utf8decode&&!1===(data=function(data){try{data=utf8$1.decode(data,{strict:!1})}catch(e){return!1}return data}(data))?err:Number(type)==type&&packetslist[type]?data.length>1?{type:packetslist[type],data:data.slice(1)}:{type:packetslist[type]}:err;if("arraybuffer"===binaryType){var intArray=new Uint8Array(data);return type=intArray[0],{type:packetslist[type],data:intArray.buffer.slice(1)}}return data instanceof ArrayBuffer&&(data=arrayBufferToBuffer(data)),type=data[0],{type:packetslist[type],data:data.slice(1)}}function decodeBase64Packet(msg,binaryType){var type=packetslist[msg.charAt(0)],data=Buffer.from(msg.slice(1),"base64");if("arraybuffer"===binaryType){for(var abv=new Uint8Array(data.length),i=0;i<abv.length;i++)abv[i]=data[i];data=abv.buffer}return{type:type,data:data}}function map(ary,each,done){const results=new Array(ary.length);let count=0;for(let i=0;i<ary.length;i++)each(ary[i],((error,msg)=>{results[i]=msg,++count===ary.length&&done(null,results)}))}function bufferToString(buffer){for(var str="",i=0,l=buffer.length;i<l;i++)str+=String.fromCharCode(buffer[i]);return str}function stringToBuffer(string){for(var buf=Buffer.allocUnsafe(string.length),i=0,l=string.length;i<l;i++)buf.writeUInt8(string.charCodeAt(i),i);return buf}function arrayBufferToBuffer(data){var length=data.byteLength||data.length,offset=data.byteOffset||0;return Buffer.from(data.buffer||data,offset,length)}function encodePayloadAsBinary(packets,callback){if(!packets.length)return callback(EMPTY_BUFFER);map(packets,encodeOneBinaryPacket,(function(err,results){return callback(Buffer.concat(results))}))}function encodeOneBinaryPacket(p,doneCallback){encodePacket(p,!0,!0,(function(packet){var sizeBuffer,encodingLength=""+packet.length;if("string"==typeof packet){(sizeBuffer=Buffer.allocUnsafe(encodingLength.length+2))[0]=0;for(var i=0;i<encodingLength.length;i++)sizeBuffer[i+1]=parseInt(encodingLength[i],10);return sizeBuffer[sizeBuffer.length-1]=255,doneCallback(null,Buffer.concat([sizeBuffer,stringToBuffer(packet)]))}for((sizeBuffer=Buffer.allocUnsafe(encodingLength.length+2))[0]=1,i=0;i<encodingLength.length;i++)sizeBuffer[i+1]=parseInt(encodingLength[i],10);sizeBuffer[sizeBuffer.length-1]=255,doneCallback(null,Buffer.concat([sizeBuffer,packet]))}))}function decodePayloadAsBinary(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,binaryType=null);for(var i,bufferTail=data,buffers=[];bufferTail.length>0;){var strLen="",isString=0===bufferTail[0];for(i=1;255!==bufferTail[i];i++){if(strLen.length>310)return callback(err,0,1);strLen+=""+bufferTail[i]}bufferTail=bufferTail.slice(strLen.length+1);var msgLength=parseInt(strLen,10),msg=bufferTail.slice(1,msgLength+1);isString&&(msg=bufferToString(msg)),buffers.push(msg),bufferTail=bufferTail.slice(msgLength+1)}var total=buffers.length;for(i=0;i<total;i++){callback(decodePacket(buffers[i],binaryType,!0),i,total)}}exports.encodePacket=encodePacket,exports.encodeBase64Packet=encodeBase64Packet,exports.decodePacket=decodePacket,exports.decodeBase64Packet=decodeBase64Packet,exports.encodePayload=function(packets,supportsBinary,callback){if("function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null),supportsBinary&&(packets=>{for(const packet of packets)if(packet.data instanceof ArrayBuffer||ArrayBuffer.isView(packet.data))return!0;return!1})(packets))return encodePayloadAsBinary(packets,callback);if(!packets.length)return callback("0:");map(packets,(function(packet,doneCallback){encodePacket(packet,supportsBinary,!1,(function(message){doneCallback(null,function(message){return message.length+":"+message}(message))}))}),(function(err,results){return callback(results.join(""))}))},exports.decodePayload=function(data,binaryType,callback){if("string"!=typeof data)return decodePayloadAsBinary(data,binaryType,callback);if("function"==typeof binaryType&&(callback=binaryType,binaryType=null),""===data)return callback(err,0,1);for(var n,msg,packet,length="",i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"===chr){if(""===length||length!=(n=Number(length)))return callback(err,0,1);if(length!=(msg=data.slice(i+1,i+1+n)).length)return callback(err,0,1);if(msg.length){if(packet=decodePacket(msg,binaryType,!1),err.type===packet.type&&err.data===packet.data)return callback(err,0,1);if(!1===callback(packet,i+n,l))return}i+=n,length=""}else length+=chr}return""!==length?callback(err,0,1):void 0},exports.encodePayloadAsBinary=encodePayloadAsBinary,exports.decodePayloadAsBinary=decodePayloadAsBinary}(parserV3);var ms,hasRequiredMs,common,hasRequiredCommon,hasRequiredBrowser,src={exports:{}},browser={exports:{}};function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}return ms=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return function(str){if((str=String(str)).length>100)return;var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&isFinite(val))return options.long?function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return plural(ms,msAbs,d,"day");if(msAbs>=h)return plural(ms,msAbs,h,"hour");if(msAbs>=m)return plural(ms,msAbs,m,"minute");if(msAbs>=s)return plural(ms,msAbs,s,"second");return ms+" ms"}(val):function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return Math.round(ms/d)+"d";if(msAbs>=h)return Math.round(ms/h)+"h";if(msAbs>=m)return Math.round(ms/m)+"m";if(msAbs>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))},ms}function requireCommon(){if(hasRequiredCommon)return common;return hasRequiredCommon=1,common=function(env){function createDebug(namespace){let prevTime,namespacesCache,enabledCache,enableOverride=null;function debug(...args){if(!debug.enabled)return;const self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,((match,format)=>{if("%%"===match)return"%";index++;const formatter=createDebug.formatters[format];if("function"==typeof formatter){const val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match})),createDebug.formatArgs.call(self,args);(self.log||createDebug.log).apply(self,args)}return debug.namespace=namespace,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(namespace),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==enableOverride?enableOverride:(namespacesCache!==createDebug.namespaces&&(namespacesCache=createDebug.namespaces,enabledCache=createDebug.enabled(namespace)),enabledCache),set:v=>{enableOverride=v}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace);return newDebug.log=this.log,newDebug}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((namespace=>"-"+namespace))].join(",");return createDebug.enable(""),namespaces},createDebug.enable=function(namespaces){let i;createDebug.save(namespaces),createDebug.namespaces=namespaces,createDebug.names=[],createDebug.skips=[];const split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.slice(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")))},createDebug.enabled=function(name){if("*"===name[name.length-1])return!0;let i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=requireMs(),createDebug.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(env).forEach((key=>{createDebug[key]=env[key]})),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function(namespace){let hash=0;for(let i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug},common}var hasRequiredNode,node={exports:{}};"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?src.exports=(hasRequiredBrowser||(hasRequiredBrowser=1,function(module,exports){exports.formatArgs=function(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,(match=>{"%%"!==match&&(index++,"%c"===match&&(lastC=index))})),args.splice(lastC,0,c)},exports.save=function(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function(){let r;try{r=exports.storage.getItem("debug")}catch(error){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r},exports.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function(){try{return localStorage}catch(error){}}(),exports.destroy=(()=>{let warned=!1;return()=>{warned||(warned=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.log=console.debug||console.log||(()=>{}),module.exports=requireCommon()(exports);const{formatters:formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}(browser,browser.exports)),browser.exports):src.exports=(hasRequiredNode||(hasRequiredNode=1,function(module,exports){const tty$1=tty,util=require$$2;exports.init=function(debug){debug.inspectOpts={};const keys=Object.keys(exports.inspectOpts);for(let i=0;i<keys.length;i++)debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]},exports.log=function(...args){return process.stderr.write(util.formatWithOptions(exports.inspectOpts,...args)+"\n")},exports.formatArgs=function(args){const{namespace:name,useColors:useColors}=this;if(useColors){const c=this.color,colorCode="[3"+(c<8?c:"8;5;"+c),prefix=`  ${colorCode};1m${name} [0m`;args[0]=prefix+args[0].split("\n").join("\n"+prefix),args.push(colorCode+"m+"+module.exports.humanize(this.diff)+"[0m")}else args[0]=(exports.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+name+" "+args[0]},exports.save=function(namespaces){namespaces?process.env.DEBUG=namespaces:delete process.env.DEBUG},exports.load=function(){return process.env.DEBUG},exports.useColors=function(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty$1.isatty(process.stderr.fd)},exports.destroy=util.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),exports.colors=[6,2,3,4,5,1];try{const supportsColor=null;supportsColor&&(supportsColor.stderr||supportsColor).level}catch(error){}exports.inspectOpts=Object.keys(process.env).filter((key=>/^debug_/i.test(key))).reduce(((obj,key)=>{const prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,((_,k)=>k.toUpperCase()));let val=process.env[key];return val=!!/^(yes|on|true|enabled)$/i.test(val)||!/^(no|off|false|disabled)$/i.test(val)&&("null"===val?null:Number(val)),obj[prop]=val,obj}),{}),module.exports=requireCommon()(exports);const{formatters:formatters}=module.exports;formatters.o=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts).split("\n").map((str=>str.trim())).join(" ")},formatters.O=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts)}}(node,node.exports)),node.exports);var srcExports=src.exports;Object.defineProperty(transport,"__esModule",{value:!0}),transport.Transport=void 0;const events_1$4=require$$0$6,parser_v4=cjs$1,parser_v3=parserV3,debug$b=(0,srcExports.default)("engine:transport");function noop(){}class Transport extends events_1$4.EventEmitter{constructor(req){super(),this.writable=!1,this._readyState="open",this.discarded=!1,this.protocol="4"===req._query.EIO?4:3,this.parser=4===this.protocol?parser_v4:parser_v3,this.supportsBinary=!(req._query&&req._query.b64)}get readyState(){return this._readyState}set readyState(state){debug$b("readyState updated from %s to %s (%s)",this._readyState,state,this.name),this._readyState=state}discard(){this.discarded=!0}onRequest(req){debug$b("setting request"),this.req=req}close(fn){"closed"!==this.readyState&&"closing"!==this.readyState&&(this.readyState="closing",this.doClose(fn||noop))}onError(msg,desc){if(this.listeners("error").length){const err=new Error(msg);err.type="TransportError",err.description=desc,this.emit("error",err)}else debug$b("ignored transport error %s (%s)",msg,desc)}onPacket(packet){this.emit("packet",packet)}onData(data){this.onPacket(this.parser.decodePacket(data))}onClose(){this.readyState="closed",this.emit("close")}}transport.Transport=Transport,Object.defineProperty(polling$2,"__esModule",{value:!0}),polling$2.Polling=void 0;const transport_1$4=transport,zlib_1$1=require$$1$1,accepts$1=accepts$2,debug$a=(0,srcExports.default)("engine:polling"),compressionMethods$1={gzip:zlib_1$1.createGzip,deflate:zlib_1$1.createDeflate};let Polling$1=class extends transport_1$4.Transport{constructor(req){super(req),this.closeTimeout=3e4}get name(){return"polling"}get supportsFraming(){return!1}onRequest(req){const res=req.res;req.res=null,"GET"===req.method?this.onPollRequest(req,res):"POST"===req.method?this.onDataRequest(req,res):(res.writeHead(500),res.end())}onPollRequest(req,res){if(this.req)return debug$a("request overlap"),this.onError("overlap from client"),res.writeHead(400),void res.end();debug$a("setting request"),this.req=req,this.res=res;const onClose=()=>{this.onError("poll connection closed prematurely")};req.cleanup=()=>{req.removeListener("close",onClose),this.req=this.res=null},req.on("close",onClose),this.writable=!0,this.emit("drain"),this.writable&&this.shouldClose&&(debug$a("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(req,res){if(this.dataReq)return this.onError("data request overlap from client"),res.writeHead(400),void res.end();const isBinary="application/octet-stream"===req.headers["content-type"];if(isBinary&&4===this.protocol)return this.onError("invalid content");this.dataReq=req,this.dataRes=res;let chunks=isBinary?Buffer.concat([]):"";const cleanup=()=>{req.removeListener("data",onData),req.removeListener("end",onEnd),req.removeListener("close",onClose),this.dataReq=this.dataRes=chunks=null},onClose=()=>{cleanup(),this.onError("data request connection closed prematurely")},onData=data=>{let contentLength;isBinary?(chunks=Buffer.concat([chunks,data]),contentLength=chunks.length):(chunks+=data,contentLength=Buffer.byteLength(chunks)),contentLength>this.maxHttpBufferSize&&(res.writeHead(413).end(),cleanup())},onEnd=()=>{this.onData(chunks);res.writeHead(200,this.headers(req,{"Content-Type":"text/html","Content-Length":2})),res.end("ok"),cleanup()};req.on("close",onClose),isBinary||req.setEncoding("utf8"),req.on("data",onData),req.on("end",onEnd)}onData(data){debug$a('received "%s"',data);const callback=packet=>{if("close"===packet.type)return debug$a("got xhr close packet"),this.onClose(),!1;this.onPacket(packet)};3===this.protocol?this.parser.decodePayload(data,callback):this.parser.decodePayload(data).forEach(callback)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(packets){this.writable=!1,this.shouldClose&&(debug$a("appending close packet to payload"),packets.push({type:"close"}),this.shouldClose(),this.shouldClose=null);const doWrite=data=>{const compress=packets.some((packet=>packet.options&&packet.options.compress));this.write(data,{compress:compress})};3===this.protocol?this.parser.encodePayload(packets,this.supportsBinary,doWrite):this.parser.encodePayload(packets,doWrite)}write(data,options){debug$a('writing "%s"',data),this.doWrite(data,options,(()=>{this.req.cleanup()}))}doWrite(data,options,callback){const isString="string"==typeof data,headers={"Content-Type":isString?"text/plain; charset=UTF-8":"application/octet-stream"},respond=data=>{headers["Content-Length"]="string"==typeof data?Buffer.byteLength(data):data.length,this.res.writeHead(200,this.headers(this.req,headers)),this.res.end(data),callback()};if(!this.httpCompression||!options.compress)return void respond(data);if((isString?Buffer.byteLength(data):data.length)<this.httpCompression.threshold)return void respond(data);const encoding=accepts$1(this.req).encodings(["gzip","deflate"]);encoding?this.compress(data,encoding,((err,data)=>{if(err)return this.res.writeHead(500),this.res.end(),void callback(err);headers["Content-Encoding"]=encoding,respond(data)})):respond(data)}compress(data,encoding,callback){debug$a("compressing");const buffers=[];let nread=0;compressionMethods$1[encoding](this.httpCompression).on("error",callback).on("data",(function(chunk){buffers.push(chunk),nread+=chunk.length})).on("end",(function(){callback(null,Buffer.concat(buffers,nread))})).end(data)}doClose(fn){let closeTimeoutTimer;debug$a("closing"),this.dataReq&&(debug$a("aborting ongoing data request"),this.dataReq.destroy());const onClose=()=>{clearTimeout(closeTimeoutTimer),fn(),this.onClose()};this.writable?(debug$a("transport writable - closing right away"),this.send([{type:"close"}]),onClose()):this.discarded?(debug$a("transport discarded - closing right away"),onClose()):(debug$a("transport not writable - buffering orderly close"),this.shouldClose=onClose,closeTimeoutTimer=setTimeout(onClose,this.closeTimeout))}headers(req,headers){headers=headers||{};const ua=req.headers["user-agent"];return ua&&(~ua.indexOf(";MSIE")||~ua.indexOf("Trident/"))&&(headers["X-XSS-Protection"]="0"),headers["cache-control"]="no-store",this.emit("headers",headers,req),headers}};polling$2.Polling=Polling$1;var pollingJsonp={};Object.defineProperty(pollingJsonp,"__esModule",{value:!0}),pollingJsonp.JSONP=void 0;const polling_1$2=polling$2,qs$1=require$$1$2,rDoubleSlashes=/\\\\n/g,rSlashes=/(\\)?\\n/g;class JSONP extends polling_1$2.Polling{constructor(req){super(req),this.head="___eio["+(req._query.j||"").replace(/[^0-9]/g,"")+"](",this.foot=");"}onData(data){"string"==typeof(data=qs$1.parse(data).d)&&(data=data.replace(rSlashes,(function(match,slashes){return slashes?match:"\n"})),super.onData(data.replace(rDoubleSlashes,"\\n")))}doWrite(data,options,callback){const js=JSON.stringify(data).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");data=this.head+js+this.foot,super.doWrite(data,options,callback)}}pollingJsonp.JSONP=JSONP;var websocket$2={};Object.defineProperty(websocket$2,"__esModule",{value:!0}),websocket$2.WebSocket=void 0;const transport_1$3=transport,debug$9=(0,srcExports.default)("engine:ws");let WebSocket$5=class extends transport_1$3.Transport{constructor(req){super(req),this.socket=req.websocket,this.socket.on("message",((data,isBinary)=>{const message=isBinary?data:data.toString();debug$9('received "%s"',message),super.onData(message)})),this.socket.once("close",this.onClose.bind(this)),this.socket.on("error",this.onError.bind(this)),this.writable=!0,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}get supportsFraming(){return!0}send(packets){this.writable=!1;for(let i=0;i<packets.length;i++){const packet=packets[i],isLast=i+1===packets.length,opts={};packet.options&&(opts.compress=packet.options.compress);const onSent=err=>{if(err)return this.onError("write error",err.stack);isLast&&(this.writable=!0,this.emit("drain"))},send=data=>{if(this.perMessageDeflate){("string"==typeof data?Buffer.byteLength(data):data.length)<this.perMessageDeflate.threshold&&(opts.compress=!1)}debug$9('writing "%s"',data),this.socket.send(data,opts,onSent)};packet.options&&"string"==typeof packet.options.wsPreEncoded?send(packet.options.wsPreEncoded):this._canSendPreEncodedFrame(packet)?this.socket._sender.sendFrame(packet.options.wsPreEncodedFrame,onSent):this.parser.encodePacket(packet,this.supportsBinary,send)}}_canSendPreEncodedFrame(packet){var _a,_b,_c;return!this.perMessageDeflate&&"function"==typeof(null===(_b=null===(_a=this.socket)||void 0===_a?void 0:_a._sender)||void 0===_b?void 0:_b.sendFrame)&&void 0!==(null===(_c=packet.options)||void 0===_c?void 0:_c.wsPreEncodedFrame)}doClose(fn){debug$9("closing"),this.socket.close(),fn&&fn()}};websocket$2.WebSocket=WebSocket$5;var webtransport={};Object.defineProperty(webtransport,"__esModule",{value:!0}),webtransport.WebTransport=void 0;const transport_1$2=transport,engine_io_parser_1$1=cjs$1,debug$8=(0,srcExports.default)("engine:webtransport");class WebTransport extends transport_1$2.Transport{constructor(session,stream,reader){super({_query:{EIO:"4"}}),this.session=session;const transformStream=(0,engine_io_parser_1$1.createPacketEncoderStream)();transformStream.readable.pipeTo(stream.writable).catch((()=>{debug$8("the stream was closed")})),this.writer=transformStream.writable.getWriter(),(async()=>{try{for(;;){const{value:value,done:done}=await reader.read();if(done){debug$8("session is closed");break}debug$8("received chunk: %o",value),this.onPacket(value)}}catch(e){debug$8("error while reading: %s",e.message)}})(),session.closed.then((()=>this.onClose())),this.writable=!0}get name(){return"webtransport"}get supportsFraming(){return!0}async send(packets){this.writable=!1;try{for(let i=0;i<packets.length;i++){const packet=packets[i];await this.writer.write(packet)}}catch(e){debug$8("error while writing: %s",e.message)}this.writable=!0,this.emit("drain")}doClose(fn){debug$8("closing WebTransport session"),this.session.close(),fn&&fn()}}webtransport.WebTransport=WebTransport,Object.defineProperty(transports,"__esModule",{value:!0});const polling_1$1=polling$2,polling_jsonp_1=pollingJsonp,websocket_1$1=websocket$2,webtransport_1$1=webtransport;function polling$1(req){return"string"==typeof req._query.j?new polling_jsonp_1.JSONP(req):new polling_1$1.Polling(req)}transports.default={polling:polling$1,websocket:websocket_1$1.WebSocket,webtransport:webtransport_1$1.WebTransport},polling$1.upgradesTo=["websocket","webtransport"];var socket$1={};Object.defineProperty(socket$1,"__esModule",{value:!0}),socket$1.Socket=void 0;const events_1$3=require$$0$6,timers_1=require$$2$2,debug$7=(0,srcExports.default)("engine:socket");let Socket$1=class extends events_1$3.EventEmitter{constructor(id,server,transport,req,protocol){super(),this._readyState="opening",this.upgrading=!1,this.upgraded=!1,this.writeBuffer=[],this.packetsFn=[],this.sentCallbackFn=[],this.cleanupFn=[],this.id=id,this.server=server,this.request=req,this.protocol=protocol,req&&(req.websocket&&req.websocket._socket?this.remoteAddress=req.websocket._socket.remoteAddress:this.remoteAddress=req.connection.remoteAddress),this.pingTimeoutTimer=null,this.pingIntervalTimer=null,this.setTransport(transport),this.onOpen()}get readyState(){return this._readyState}set readyState(state){debug$7("readyState updated from %s to %s",this._readyState,state),this._readyState=state}onOpen(){this.readyState="open",this.transport.sid=this.id,this.sendPacket("open",JSON.stringify({sid:this.id,upgrades:this.getAvailableUpgrades(),pingInterval:this.server.opts.pingInterval,pingTimeout:this.server.opts.pingTimeout,maxPayload:this.server.opts.maxHttpBufferSize})),this.server.opts.initialPacket&&this.sendPacket("message",this.server.opts.initialPacket),this.emit("open"),3===this.protocol?this.resetPingTimeout(this.server.opts.pingInterval+this.server.opts.pingTimeout):this.schedulePing()}onPacket(packet){if("open"!==this.readyState)return debug$7("packet received with closed socket");switch(debug$7(`received packet ${packet.type}`),this.emit("packet",packet),this.resetPingTimeout(this.server.opts.pingInterval+this.server.opts.pingTimeout),packet.type){case"ping":if(3!==this.transport.protocol)return void this.onError("invalid heartbeat direction");debug$7("got ping"),this.sendPacket("pong"),this.emit("heartbeat");break;case"pong":if(3===this.transport.protocol)return void this.onError("invalid heartbeat direction");debug$7("got pong"),this.pingIntervalTimer.refresh(),this.emit("heartbeat");break;case"error":this.onClose("parse error");break;case"message":this.emit("data",packet.data),this.emit("message",packet.data)}}onError(err){debug$7("transport error"),this.onClose("transport error",err)}schedulePing(){this.pingIntervalTimer=(0,timers_1.setTimeout)((()=>{debug$7("writing ping packet - expecting pong within %sms",this.server.opts.pingTimeout),this.sendPacket("ping"),this.resetPingTimeout(this.server.opts.pingTimeout)}),this.server.opts.pingInterval)}resetPingTimeout(timeout){(0,timers_1.clearTimeout)(this.pingTimeoutTimer),this.pingTimeoutTimer=(0,timers_1.setTimeout)((()=>{"closed"!==this.readyState&&this.onClose("ping timeout")}),timeout)}setTransport(transport){const onError=this.onError.bind(this),onPacket=this.onPacket.bind(this),flush=this.flush.bind(this),onClose=this.onClose.bind(this,"transport close");this.transport=transport,this.transport.once("error",onError),this.transport.on("packet",onPacket),this.transport.on("drain",flush),this.transport.once("close",onClose),this.setupSendCallback(),this.cleanupFn.push((function(){transport.removeListener("error",onError),transport.removeListener("packet",onPacket),transport.removeListener("drain",flush),transport.removeListener("close",onClose)}))}maybeUpgrade(transport){debug$7('might upgrade socket transport from "%s" to "%s"',this.transport.name,transport.name),this.upgrading=!0;const upgradeTimeoutTimer=(0,timers_1.setTimeout)((()=>{debug$7("client did not complete upgrade - closing transport"),cleanup(),"open"===transport.readyState&&transport.close()}),this.server.opts.upgradeTimeout);let checkIntervalTimer;const onPacket=packet=>{"ping"===packet.type&&"probe"===packet.data?(debug$7("got probe ping packet, sending pong"),transport.send([{type:"pong",data:"probe"}]),this.emit("upgrading",transport),clearInterval(checkIntervalTimer),checkIntervalTimer=setInterval(check,100)):"upgrade"===packet.type&&"closed"!==this.readyState?(debug$7("got upgrade packet - upgrading"),cleanup(),this.transport.discard(),this.upgraded=!0,this.clearTransport(),this.setTransport(transport),this.emit("upgrade",transport),this.flush(),"closing"===this.readyState&&transport.close((()=>{this.onClose("forced close")}))):(cleanup(),transport.close())},check=()=>{"polling"===this.transport.name&&this.transport.writable&&(debug$7("writing a noop packet to polling for fast upgrade"),this.transport.send([{type:"noop"}]))},cleanup=()=>{this.upgrading=!1,clearInterval(checkIntervalTimer),(0,timers_1.clearTimeout)(upgradeTimeoutTimer),transport.removeListener("packet",onPacket),transport.removeListener("close",onTransportClose),transport.removeListener("error",onError),this.removeListener("close",onClose)},onError=err=>{debug$7("client did not complete upgrade - %s",err),cleanup(),transport.close(),transport=null},onTransportClose=()=>{onError("transport closed")},onClose=()=>{onError("socket closed")};transport.on("packet",onPacket),transport.once("close",onTransportClose),transport.once("error",onError),this.once("close",onClose)}clearTransport(){let cleanup;const toCleanUp=this.cleanupFn.length;for(let i=0;i<toCleanUp;i++)cleanup=this.cleanupFn.shift(),cleanup();this.transport.on("error",(function(){debug$7("error triggered by discarded transport")})),this.transport.close(),(0,timers_1.clearTimeout)(this.pingTimeoutTimer)}onClose(reason,description){"closed"!==this.readyState&&(this.readyState="closed",(0,timers_1.clearTimeout)(this.pingIntervalTimer),(0,timers_1.clearTimeout)(this.pingTimeoutTimer),process.nextTick((()=>{this.writeBuffer=[]})),this.packetsFn=[],this.sentCallbackFn=[],this.clearTransport(),this.emit("close",reason,description))}setupSendCallback(){const onDrain=()=>{if(this.sentCallbackFn.length>0){const seqFn=this.sentCallbackFn.splice(0,1)[0];if("function"==typeof seqFn)debug$7("executing send callback"),seqFn(this.transport);else if(Array.isArray(seqFn)){debug$7("executing batch send callback");const l=seqFn.length;let i=0;for(;i<l;i++)"function"==typeof seqFn[i]&&seqFn[i](this.transport)}}};this.transport.on("drain",onDrain),this.cleanupFn.push((()=>{this.transport.removeListener("drain",onDrain)}))}send(data,options,callback){return this.sendPacket("message",data,options,callback),this}write(data,options,callback){return this.sendPacket("message",data,options,callback),this}sendPacket(type,data,options={},callback){if("function"==typeof options&&(callback=options,options={}),"closing"!==this.readyState&&"closed"!==this.readyState){debug$7('sending packet "%s" (%s)',type,data),options.compress=!1!==options.compress;const packet={type:type,options:options};data&&(packet.data=data),this.emit("packetCreate",packet),this.writeBuffer.push(packet),callback&&this.packetsFn.push(callback),this.flush()}}flush(){if("closed"!==this.readyState&&this.transport.writable&&this.writeBuffer.length){debug$7("flushing buffer to transport"),this.emit("flush",this.writeBuffer),this.server.emit("flush",this,this.writeBuffer);const wbuf=this.writeBuffer;this.writeBuffer=[],this.transport.supportsFraming?this.sentCallbackFn.push.apply(this.sentCallbackFn,this.packetsFn):this.sentCallbackFn.push(this.packetsFn),this.packetsFn=[],this.transport.send(wbuf),this.emit("drain"),this.server.emit("drain",this)}}getAvailableUpgrades(){const availableUpgrades=[],allUpgrades=this.server.upgrades(this.transport.name);let i=0;const l=allUpgrades.length;for(;i<l;++i){const upg=allUpgrades[i];-1!==this.server.opts.transports.indexOf(upg)&&availableUpgrades.push(upg)}return availableUpgrades}close(discard){if("open"===this.readyState){if(this.readyState="closing",this.writeBuffer.length)return debug$7("there are %d remaining packets in the buffer, waiting for the 'drain' event",this.writeBuffer.length),void this.once("drain",(()=>{debug$7("all packets have been sent, closing the transport"),this.closeTransport(discard)}));debug$7("the buffer is empty, closing the transport right away",discard),this.closeTransport(discard)}}closeTransport(discard){debug$7("closing the transport (discard? %s)",discard),discard&&this.transport.discard(),this.transport.close(this.onClose.bind(this,"forced close"))}};socket$1.Socket=Socket$1;var cookie={parse:function(str,options){if("string"!=typeof str)throw new TypeError("argument str must be a string");for(var obj={},opt=options||{},pairs=str.split(";"),dec=opt.decode||decode$1,i=0;i<pairs.length;i++){var pair=pairs[i],index=pair.indexOf("=");if(!(index<0)){var key=pair.substring(0,index).trim();if(null==obj[key]){var val=pair.substring(index+1,pair.length).trim();'"'===val[0]&&(val=val.slice(1,-1)),obj[key]=tryDecode(val,dec)}}}return obj},serialize:function(name,val,options){var opt=options||{},enc=opt.encode||encode$1;if("function"!=typeof enc)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(name))throw new TypeError("argument name is invalid");var value=enc(val);if(value&&!fieldContentRegExp.test(value))throw new TypeError("argument val is invalid");var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge)||!isFinite(maxAge))throw new TypeError("option maxAge is invalid");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain))throw new TypeError("option domain is invalid");str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path))throw new TypeError("option path is invalid");str+="; Path="+opt.path}if(opt.expires){if("function"!=typeof opt.expires.toUTCString)throw new TypeError("option expires is invalid");str+="; Expires="+opt.expires.toUTCString()}opt.httpOnly&&(str+="; HttpOnly");opt.secure&&(str+="; Secure");if(opt.sameSite){switch("string"==typeof opt.sameSite?opt.sameSite.toLowerCase():opt.sameSite){case!0:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;case"none":str+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return str}},decode$1=decodeURIComponent,encode$1=encodeURIComponent,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}var bufferUtil$1={exports:{}},constants={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}};const{EMPTY_BUFFER:EMPTY_BUFFER$3}=constants,FastBuffer$2=Buffer[Symbol.species];function _mask(source,mask,output,offset,length){for(let i=0;i<length;i++)output[offset+i]=source[i]^mask[3&i]}function _unmask(buffer,mask){for(let i=0;i<buffer.length;i++)buffer[i]^=mask[3&i]}if(bufferUtil$1.exports={concat:function(list,totalLength){if(0===list.length)return EMPTY_BUFFER$3;if(1===list.length)return list[0];const target=Buffer.allocUnsafe(totalLength);let offset=0;for(let i=0;i<list.length;i++){const buf=list[i];target.set(buf,offset),offset+=buf.length}return offset<totalLength?new FastBuffer$2(target.buffer,target.byteOffset,offset):target},mask:_mask,toArrayBuffer:function(buf){return buf.length===buf.buffer.byteLength?buf.buffer:buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.length)},toBuffer:function toBuffer$2(data){if(toBuffer$2.readOnly=!0,Buffer.isBuffer(data))return data;let buf;return data instanceof ArrayBuffer?buf=new FastBuffer$2(data):ArrayBuffer.isView(data)?buf=new FastBuffer$2(data.buffer,data.byteOffset,data.byteLength):(buf=Buffer.from(data),toBuffer$2.readOnly=!1),buf},unmask:_unmask},!process.env.WS_NO_BUFFER_UTIL)try{const bufferUtil=null;bufferUtil$1.exports.mask=function(source,mask,output,offset,length){length<48?_mask(source,mask,output,offset,length):bufferUtil.mask(source,mask,output,offset,length)},bufferUtil$1.exports.unmask=function(buffer,mask){buffer.length<32?_unmask(buffer,mask):bufferUtil.unmask(buffer,mask)}}catch(e){}var bufferUtilExports=bufferUtil$1.exports;const kDone=Symbol("kDone"),kRun=Symbol("kRun");const zlib=require$$1$1,bufferUtil=bufferUtilExports,Limiter=class{constructor(concurrency){this[kDone]=()=>{this.pending--,this[kRun]()},this.concurrency=concurrency||1/0,this.jobs=[],this.pending=0}add(job){this.jobs.push(job),this[kRun]()}[kRun](){if(this.pending!==this.concurrency&&this.jobs.length){const job=this.jobs.shift();this.pending++,job(this[kDone])}}},{kStatusCode:kStatusCode$2}=constants,FastBuffer$1=Buffer[Symbol.species],TRAILER=Buffer.from([0,0,255,255]),kPerMessageDeflate=Symbol("permessage-deflate"),kTotalLength=Symbol("total-length"),kCallback=Symbol("callback"),kBuffers=Symbol("buffers"),kError$1=Symbol("error");let zlibLimiter;var permessageDeflate=class{constructor(options,isServer,maxPayload){if(this._maxPayload=0|maxPayload,this._options=options||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!isServer,this._deflate=null,this._inflate=null,this.params=null,!zlibLimiter){const concurrency=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;zlibLimiter=new Limiter(concurrency)}}static get extensionName(){return"permessage-deflate"}offer(){const params={};return this._options.serverNoContextTakeover&&(params.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(params.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(params.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?params.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(params.client_max_window_bits=!0),params}accept(configurations){return configurations=this.normalizeParams(configurations),this.params=this._isServer?this.acceptAsServer(configurations):this.acceptAsClient(configurations),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const callback=this._deflate[kCallback];this._deflate.close(),this._deflate=null,callback&&callback(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(offers){const opts=this._options,accepted=offers.find((params=>!(!1===opts.serverNoContextTakeover&&params.server_no_context_takeover||params.server_max_window_bits&&(!1===opts.serverMaxWindowBits||"number"==typeof opts.serverMaxWindowBits&&opts.serverMaxWindowBits>params.server_max_window_bits)||"number"==typeof opts.clientMaxWindowBits&&!params.client_max_window_bits)));if(!accepted)throw new Error("None of the extension offers can be accepted");return opts.serverNoContextTakeover&&(accepted.server_no_context_takeover=!0),opts.clientNoContextTakeover&&(accepted.client_no_context_takeover=!0),"number"==typeof opts.serverMaxWindowBits&&(accepted.server_max_window_bits=opts.serverMaxWindowBits),"number"==typeof opts.clientMaxWindowBits?accepted.client_max_window_bits=opts.clientMaxWindowBits:!0!==accepted.client_max_window_bits&&!1!==opts.clientMaxWindowBits||delete accepted.client_max_window_bits,accepted}acceptAsClient(response){const params=response[0];if(!1===this._options.clientNoContextTakeover&&params.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(params.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&params.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(params.client_max_window_bits=this._options.clientMaxWindowBits);return params}normalizeParams(configurations){return configurations.forEach((params=>{Object.keys(params).forEach((key=>{let value=params[key];if(value.length>1)throw new Error(`Parameter "${key}" must have only a single value`);if(value=value[0],"client_max_window_bits"===key){if(!0!==value){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}else if("server_max_window_bits"===key){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else{if("client_no_context_takeover"!==key&&"server_no_context_takeover"!==key)throw new Error(`Unknown parameter "${key}"`);if(!0!==value)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}params[key]=value}))})),configurations}decompress(data,fin,callback){zlibLimiter.add((done=>{this._decompress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}compress(data,fin,callback){zlibLimiter.add((done=>{this._compress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}_decompress(data,fin,callback){const endpoint=this._isServer?"client":"server";if(!this._inflate){const key=`${endpoint}_max_window_bits`,windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._inflate=zlib.createInflateRaw({...this._options.zlibInflateOptions,windowBits:windowBits}),this._inflate[kPerMessageDeflate]=this,this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=callback,this._inflate.write(data),fin&&this._inflate.write(TRAILER),this._inflate.flush((()=>{const err=this._inflate[kError$1];if(err)return this._inflate.close(),this._inflate=null,void callback(err);const data=bufferUtil.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],fin&&this.params[`${endpoint}_no_context_takeover`]&&this._inflate.reset()),callback(null,data)}))}_compress(data,fin,callback){const endpoint=this._isServer?"server":"client";if(!this._deflate){const key=`${endpoint}_max_window_bits`,windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._deflate=zlib.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:windowBits}),this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],this._deflate.on("data",deflateOnData)}this._deflate[kCallback]=callback,this._deflate.write(data),this._deflate.flush(zlib.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let data=bufferUtil.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);fin&&(data=new FastBuffer$1(data.buffer,data.byteOffset,data.length-4)),this._deflate[kCallback]=null,this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],fin&&this.params[`${endpoint}_no_context_takeover`]&&this._deflate.reset(),callback(null,data)}))}};function deflateOnData(chunk){this[kBuffers].push(chunk),this[kTotalLength]+=chunk.length}function inflateOnData(chunk){this[kTotalLength]+=chunk.length,this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload?this[kBuffers].push(chunk):(this[kError$1]=new RangeError("Max payload size exceeded"),this[kError$1].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[kError$1][kStatusCode$2]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(err){this[kPerMessageDeflate]._inflate=null,err[kStatusCode$2]=1007,this[kCallback](err)}var validation={exports:{}};const{isUtf8:isUtf8}=require$$0$8;function _isValidUTF8(buf){const len=buf.length;let i=0;for(;i<len;)if(0==(128&buf[i]))i++;else if(192==(224&buf[i])){if(i+1===len||128!=(192&buf[i+1])||192==(254&buf[i]))return!1;i+=2}else if(224==(240&buf[i])){if(i+2>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||224===buf[i]&&128==(224&buf[i+1])||237===buf[i]&&160==(224&buf[i+1]))return!1;i+=3}else{if(240!=(248&buf[i]))return!1;if(i+3>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||128!=(192&buf[i+3])||240===buf[i]&&128==(240&buf[i+1])||244===buf[i]&&buf[i+1]>143||buf[i]>244)return!1;i+=4}return!0}if(validation.exports={isValidStatusCode:function(code){return code>=1e3&&code<=1014&&1004!==code&&1005!==code&&1006!==code||code>=3e3&&code<=4999},isValidUTF8:_isValidUTF8,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},isUtf8)validation.exports.isValidUTF8=function(buf){return buf.length<24?_isValidUTF8(buf):isUtf8(buf)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const isValidUTF8=null;validation.exports.isValidUTF8=function(buf){return buf.length<32?_isValidUTF8(buf):isValidUTF8(buf)}}catch(e){}var validationExports=validation.exports;const{Writable:Writable}=require$$0$4,PerMessageDeflate$3=permessageDeflate,{BINARY_TYPES:BINARY_TYPES$1,EMPTY_BUFFER:EMPTY_BUFFER$2,kStatusCode:kStatusCode$1,kWebSocket:kWebSocket$2}=constants,{concat:concat,toArrayBuffer:toArrayBuffer$1,unmask:unmask}=bufferUtilExports,{isValidStatusCode:isValidStatusCode$1,isValidUTF8:isValidUTF8}=validationExports,FastBuffer=Buffer[Symbol.species];var receiver=class extends Writable{constructor(options={}){super(),this._allowSynchronousEvents=void 0===options.allowSynchronousEvents||options.allowSynchronousEvents,this._binaryType=options.binaryType||BINARY_TYPES$1[0],this._extensions=options.extensions||{},this._isServer=!!options.isServer,this._maxPayload=0|options.maxPayload,this._skipUTF8Validation=!!options.skipUTF8Validation,this[kWebSocket$2]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(chunk,encoding,cb){if(8===this._opcode&&0==this._state)return cb();this._bufferedBytes+=chunk.length,this._buffers.push(chunk),this.startLoop(cb)}consume(n){if(this._bufferedBytes-=n,n===this._buffers[0].length)return this._buffers.shift();if(n<this._buffers[0].length){const buf=this._buffers[0];return this._buffers[0]=new FastBuffer(buf.buffer,buf.byteOffset+n,buf.length-n),new FastBuffer(buf.buffer,buf.byteOffset,n)}const dst=Buffer.allocUnsafe(n);do{const buf=this._buffers[0],offset=dst.length-n;n>=buf.length?dst.set(this._buffers.shift(),offset):(dst.set(new Uint8Array(buf.buffer,buf.byteOffset,n),offset),this._buffers[0]=new FastBuffer(buf.buffer,buf.byteOffset+n,buf.length-n)),n-=buf.length}while(n>0);return dst}startLoop(cb){this._loop=!0;do{switch(this._state){case 0:this.getInfo(cb);break;case 1:this.getPayloadLength16(cb);break;case 2:this.getPayloadLength64(cb);break;case 3:this.getMask();break;case 4:this.getData(cb);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||cb()}getInfo(cb){if(this._bufferedBytes<2)return void(this._loop=!1);const buf=this.consume(2);if(0!=(48&buf[0])){return void cb(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}const compressed=64==(64&buf[0]);if(!compressed||this._extensions[PerMessageDeflate$3.extensionName]){if(this._fin=128==(128&buf[0]),this._opcode=15&buf[0],this._payloadLength=127&buf[1],0===this._opcode){if(compressed){return void cb(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void cb(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void cb(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=compressed}else{if(!(this._opcode>7&&this._opcode<11)){return void cb(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void cb(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(compressed){return void cb(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void cb(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&buf[1]),this._isServer){if(!this._masked){return void cb(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void cb(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(cb)}else{cb(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}}getPayloadLength16(cb){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(cb))}getPayloadLength64(cb){if(this._bufferedBytes<8)return void(this._loop=!1);const buf=this.consume(8),num=buf.readUInt32BE(0);if(num>Math.pow(2,21)-1){cb(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}else this._payloadLength=num*Math.pow(2,32)+buf.readUInt32BE(4),this.haveLength(cb)}haveLength(cb){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){cb(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}else this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(cb){let data=EMPTY_BUFFER$2;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);data=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&unmask(data,this._mask)}if(this._opcode>7)this.controlMessage(data,cb);else{if(this._compressed)return this._state=5,void this.decompress(data,cb);data.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(data)),this.dataMessage(cb)}}decompress(data,cb){this._extensions[PerMessageDeflate$3.extensionName].decompress(data,this._fin,((err,buf)=>{if(err)return cb(err);if(buf.length){if(this._messageLength+=buf.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const error=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void cb(error)}this._fragments.push(buf)}this.dataMessage(cb),0===this._state&&this.startLoop(cb)}))}dataMessage(cb){if(!this._fin)return void(this._state=0);const messageLength=this._messageLength,fragments=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let data;data="nodebuffer"===this._binaryType?concat(fragments,messageLength):"arraybuffer"===this._binaryType?toArrayBuffer$1(concat(fragments,messageLength)):fragments,this._allowSynchronousEvents?(this.emit("message",data,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",data,!0),this._state=0,this.startLoop(cb)})))}else{const buf=concat(fragments,messageLength);if(!this._skipUTF8Validation&&!isValidUTF8(buf)){const error=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void cb(error)}5===this._state||this._allowSynchronousEvents?(this.emit("message",buf,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",buf,!1),this._state=0,this.startLoop(cb)})))}}controlMessage(data,cb){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",data),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",data),this._state=0,this.startLoop(cb)})));else{if(0===data.length)this._loop=!1,this.emit("conclude",1005,EMPTY_BUFFER$2),this.end();else{const code=data.readUInt16BE(0);if(!isValidStatusCode$1(code)){const error=this.createError(RangeError,`invalid status code ${code}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void cb(error)}const buf=new FastBuffer(data.buffer,data.byteOffset+2,data.length-2);if(!this._skipUTF8Validation&&!isValidUTF8(buf)){const error=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void cb(error)}this._loop=!1,this.emit("conclude",code,buf),this.end()}this._state=0}}createError(ErrorCtor,message,prefix,statusCode,errorCode){this._loop=!1,this._errored=!0;const err=new ErrorCtor(prefix?`Invalid WebSocket frame: ${message}`:message);return Error.captureStackTrace(err,this.createError),err.code=errorCode,err[kStatusCode$1]=statusCode,err}};const{randomFillSync:randomFillSync}=require$$0$7,PerMessageDeflate$2=permessageDeflate,{EMPTY_BUFFER:EMPTY_BUFFER$1}=constants,{isValidStatusCode:isValidStatusCode}=validationExports,{mask:applyMask,toBuffer:toBuffer$1}=bufferUtilExports,kByteLength=Symbol("kByteLength"),maskBuffer=Buffer.alloc(4);let randomPool,randomPoolPointer=8192;var sender=class Sender{constructor(socket,extensions,generateMask){this._extensions=extensions||{},generateMask&&(this._generateMask=generateMask,this._maskBuffer=Buffer.alloc(4)),this._socket=socket,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(data,options){let mask,dataLength,merge=!1,offset=2,skipMasking=!1;options.mask&&(mask=options.maskBuffer||maskBuffer,options.generateMask?options.generateMask(mask):(8192===randomPoolPointer&&(void 0===randomPool&&(randomPool=Buffer.alloc(8192)),randomFillSync(randomPool,0,8192),randomPoolPointer=0),mask[0]=randomPool[randomPoolPointer++],mask[1]=randomPool[randomPoolPointer++],mask[2]=randomPool[randomPoolPointer++],mask[3]=randomPool[randomPoolPointer++]),skipMasking=0==(mask[0]|mask[1]|mask[2]|mask[3]),offset=6),"string"==typeof data?dataLength=options.mask&&!skipMasking||void 0===options[kByteLength]?(data=Buffer.from(data)).length:options[kByteLength]:(dataLength=data.length,merge=options.mask&&options.readOnly&&!skipMasking);let payloadLength=dataLength;dataLength>=65536?(offset+=8,payloadLength=127):dataLength>125&&(offset+=2,payloadLength=126);const target=Buffer.allocUnsafe(merge?dataLength+offset:offset);return target[0]=options.fin?128|options.opcode:options.opcode,options.rsv1&&(target[0]|=64),target[1]=payloadLength,126===payloadLength?target.writeUInt16BE(dataLength,2):127===payloadLength&&(target[2]=target[3]=0,target.writeUIntBE(dataLength,4,6)),options.mask?(target[1]|=128,target[offset-4]=mask[0],target[offset-3]=mask[1],target[offset-2]=mask[2],target[offset-1]=mask[3],skipMasking?[target,data]:merge?(applyMask(data,mask,target,offset,dataLength),[target]):(applyMask(data,mask,data,0,dataLength),[target,data])):[target,data]}close(code,data,mask,cb){let buf;if(void 0===code)buf=EMPTY_BUFFER$1;else{if("number"!=typeof code||!isValidStatusCode(code))throw new TypeError("First argument must be a valid error code number");if(void 0!==data&&data.length){const length=Buffer.byteLength(data);if(length>123)throw new RangeError("The message must not be greater than 123 bytes");buf=Buffer.allocUnsafe(2+length),buf.writeUInt16BE(code,0),"string"==typeof data?buf.write(data,2):buf.set(data,2)}else buf=Buffer.allocUnsafe(2),buf.writeUInt16BE(code,0)}const options={[kByteLength]:buf.length,fin:!0,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,buf,!1,options,cb]):this.sendFrame(Sender.frame(buf,options),cb)}ping(data,mask,cb){let byteLength,readOnly;if("string"==typeof data?(byteLength=Buffer.byteLength(data),readOnly=!1):(byteLength=(data=toBuffer$1(data)).length,readOnly=toBuffer$1.readOnly),byteLength>125)throw new RangeError("The data size must not be greater than 125 bytes");const options={[kByteLength]:byteLength,fin:!0,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:9,readOnly:readOnly,rsv1:!1};this._deflating?this.enqueue([this.dispatch,data,!1,options,cb]):this.sendFrame(Sender.frame(data,options),cb)}pong(data,mask,cb){let byteLength,readOnly;if("string"==typeof data?(byteLength=Buffer.byteLength(data),readOnly=!1):(byteLength=(data=toBuffer$1(data)).length,readOnly=toBuffer$1.readOnly),byteLength>125)throw new RangeError("The data size must not be greater than 125 bytes");const options={[kByteLength]:byteLength,fin:!0,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:10,readOnly:readOnly,rsv1:!1};this._deflating?this.enqueue([this.dispatch,data,!1,options,cb]):this.sendFrame(Sender.frame(data,options),cb)}send(data,options,cb){const perMessageDeflate=this._extensions[PerMessageDeflate$2.extensionName];let byteLength,readOnly,opcode=options.binary?2:1,rsv1=options.compress;if("string"==typeof data?(byteLength=Buffer.byteLength(data),readOnly=!1):(byteLength=(data=toBuffer$1(data)).length,readOnly=toBuffer$1.readOnly),this._firstFragment?(this._firstFragment=!1,rsv1&&perMessageDeflate&&perMessageDeflate.params[perMessageDeflate._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(rsv1=byteLength>=perMessageDeflate._threshold),this._compress=rsv1):(rsv1=!1,opcode=0),options.fin&&(this._firstFragment=!0),perMessageDeflate){const opts={[kByteLength]:byteLength,fin:options.fin,generateMask:this._generateMask,mask:options.mask,maskBuffer:this._maskBuffer,opcode:opcode,readOnly:readOnly,rsv1:rsv1};this._deflating?this.enqueue([this.dispatch,data,this._compress,opts,cb]):this.dispatch(data,this._compress,opts,cb)}else this.sendFrame(Sender.frame(data,{[kByteLength]:byteLength,fin:options.fin,generateMask:this._generateMask,mask:options.mask,maskBuffer:this._maskBuffer,opcode:opcode,readOnly:readOnly,rsv1:!1}),cb)}dispatch(data,compress,options,cb){if(!compress)return void this.sendFrame(Sender.frame(data,options),cb);const perMessageDeflate=this._extensions[PerMessageDeflate$2.extensionName];this._bufferedBytes+=options[kByteLength],this._deflating=!0,perMessageDeflate.compress(data,options.fin,((_,buf)=>{if(this._socket.destroyed){const err=new Error("The socket was closed while data was being compressed");"function"==typeof cb&&cb(err);for(let i=0;i<this._queue.length;i++){const params=this._queue[i],callback=params[params.length-1];"function"==typeof callback&&callback(err)}}else this._bufferedBytes-=options[kByteLength],this._deflating=!1,options.readOnly=!1,this.sendFrame(Sender.frame(buf,options),cb),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const params=this._queue.shift();this._bufferedBytes-=params[3][kByteLength],Reflect.apply(params[0],this,params.slice(1))}}enqueue(params){this._bufferedBytes+=params[3][kByteLength],this._queue.push(params)}sendFrame(list,cb){2===list.length?(this._socket.cork(),this._socket.write(list[0]),this._socket.write(list[1],cb),this._socket.uncork()):this._socket.write(list[0],cb)}};const{kForOnEventAttribute:kForOnEventAttribute$1,kListener:kListener$1}=constants,kCode=Symbol("kCode"),kData=Symbol("kData"),kError=Symbol("kError"),kMessage=Symbol("kMessage"),kReason=Symbol("kReason"),kTarget=Symbol("kTarget"),kType=Symbol("kType"),kWasClean=Symbol("kWasClean");class Event{constructor(type){this[kTarget]=null,this[kType]=type}get target(){return this[kTarget]}get type(){return this[kType]}}Object.defineProperty(Event.prototype,"target",{enumerable:!0}),Object.defineProperty(Event.prototype,"type",{enumerable:!0});class CloseEvent extends Event{constructor(type,options={}){super(type),this[kCode]=void 0===options.code?0:options.code,this[kReason]=void 0===options.reason?"":options.reason,this[kWasClean]=void 0!==options.wasClean&&options.wasClean}get code(){return this[kCode]}get reason(){return this[kReason]}get wasClean(){return this[kWasClean]}}Object.defineProperty(CloseEvent.prototype,"code",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:!0});class ErrorEvent extends Event{constructor(type,options={}){super(type),this[kError]=void 0===options.error?null:options.error,this[kMessage]=void 0===options.message?"":options.message}get error(){return this[kError]}get message(){return this[kMessage]}}Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:!0}),Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:!0});class MessageEvent extends Event{constructor(type,options={}){super(type),this[kData]=void 0===options.data?null:options.data}get data(){return this[kData]}}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:!0});const EventTarget={addEventListener(type,handler,options={}){for(const listener of this.listeners(type))if(!options[kForOnEventAttribute$1]&&listener[kListener$1]===handler&&!listener[kForOnEventAttribute$1])return;let wrapper;if("message"===type)wrapper=function(data,isBinary){const event=new MessageEvent("message",{data:isBinary?data:data.toString()});event[kTarget]=this,callListener(handler,this,event)};else if("close"===type)wrapper=function(code,message){const event=new CloseEvent("close",{code:code,reason:message.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});event[kTarget]=this,callListener(handler,this,event)};else if("error"===type)wrapper=function(error){const event=new ErrorEvent("error",{error:error,message:error.message});event[kTarget]=this,callListener(handler,this,event)};else{if("open"!==type)return;wrapper=function(){const event=new Event("open");event[kTarget]=this,callListener(handler,this,event)}}wrapper[kForOnEventAttribute$1]=!!options[kForOnEventAttribute$1],wrapper[kListener$1]=handler,options.once?this.once(type,wrapper):this.on(type,wrapper)},removeEventListener(type,handler){for(const listener of this.listeners(type))if(listener[kListener$1]===handler&&!listener[kForOnEventAttribute$1]){this.removeListener(type,listener);break}}};var eventTarget={CloseEvent:CloseEvent,ErrorEvent:ErrorEvent,Event:Event,EventTarget:EventTarget,MessageEvent:MessageEvent};function callListener(listener,thisArg,event){"object"==typeof listener&&listener.handleEvent?listener.handleEvent.call(listener,event):listener.call(thisArg,event)}const{tokenChars:tokenChars$1}=validationExports;function push(dest,name,elem){void 0===dest[name]?dest[name]=[elem]:dest[name].push(elem)}var extension$1={format:function(extensions){return Object.keys(extensions).map((extension=>{let configurations=extensions[extension];return Array.isArray(configurations)||(configurations=[configurations]),configurations.map((params=>[extension].concat(Object.keys(params).map((k=>{let values=params[k];return Array.isArray(values)||(values=[values]),values.map((v=>!0===v?k:`${k}=${v}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(header){const offers=Object.create(null);let extensionName,paramName,params=Object.create(null),mustUnescape=!1,isEscaping=!1,inQuotes=!1,start=-1,code=-1,end=-1,i=0;for(;i<header.length;i++)if(code=header.charCodeAt(i),void 0===extensionName)if(-1===end&&1===tokenChars$1[code])-1===start&&(start=i);else if(0===i||32!==code&&9!==code){if(59!==code&&44!==code)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i);const name=header.slice(start,end);44===code?(push(offers,name,params),params=Object.create(null)):extensionName=name,start=end=-1}}else-1===end&&-1!==start&&(end=i);else if(void 0===paramName)if(-1===end&&1===tokenChars$1[code])-1===start&&(start=i);else if(32===code||9===code)-1===end&&-1!==start&&(end=i);else if(59===code||44===code){if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i),push(params,header.slice(start,end),!0),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),start=end=-1}else{if(61!==code||-1===start||-1!==end)throw new SyntaxError(`Unexpected character at index ${i}`);paramName=header.slice(start,i),start=end=-1}else if(isEscaping){if(1!==tokenChars$1[code])throw new SyntaxError(`Unexpected character at index ${i}`);-1===start?start=i:mustUnescape||(mustUnescape=!0),isEscaping=!1}else if(inQuotes)if(1===tokenChars$1[code])-1===start&&(start=i);else if(34===code&&-1!==start)inQuotes=!1,end=i;else{if(92!==code)throw new SyntaxError(`Unexpected character at index ${i}`);isEscaping=!0}else if(34===code&&61===header.charCodeAt(i-1))inQuotes=!0;else if(-1===end&&1===tokenChars$1[code])-1===start&&(start=i);else if(-1===start||32!==code&&9!==code){if(59!==code&&44!==code)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i);let value=header.slice(start,end);mustUnescape&&(value=value.replace(/\\/g,""),mustUnescape=!1),push(params,paramName,value),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),paramName=void 0,start=end=-1}}else-1===end&&(end=i);if(-1===start||inQuotes||32===code||9===code)throw new SyntaxError("Unexpected end of input");-1===end&&(end=i);const token=header.slice(start,end);return void 0===extensionName?push(offers,token,params):(void 0===paramName?push(params,token,!0):push(params,paramName,mustUnescape?token.replace(/\\/g,""):token),push(offers,extensionName,params)),offers}};const EventEmitter$1=require$$0$6,https=require$$1$3,http$1=require$$0$9,net=require$$3,tls=require$$4,{randomBytes:randomBytes,createHash:createHash$1}=require$$0$7,{URL:URL}=require$$7,PerMessageDeflate$1=permessageDeflate,Receiver=receiver,Sender=sender,{BINARY_TYPES:BINARY_TYPES,EMPTY_BUFFER:EMPTY_BUFFER,GUID:GUID$1,kForOnEventAttribute:kForOnEventAttribute,kListener:kListener,kStatusCode:kStatusCode,kWebSocket:kWebSocket$1,NOOP:NOOP}=constants,{EventTarget:{addEventListener:addEventListener,removeEventListener:removeEventListener}}=eventTarget,{format:format,parse:parse$2}=extension$1,{toBuffer:toBuffer}=bufferUtilExports,kAborted=Symbol("kAborted"),protocolVersions=[8,13],readyStates=["CONNECTING","OPEN","CLOSING","CLOSED"],subprotocolRegex=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;let WebSocket$4=class WebSocket extends EventEmitter$1{constructor(address,protocols,options){super(),this._binaryType=BINARY_TYPES[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=EMPTY_BUFFER,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==address?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===protocols?protocols=[]:Array.isArray(protocols)||("object"==typeof protocols&&null!==protocols?(options=protocols,protocols=[]):protocols=[protocols]),initAsClient(this,address,protocols,options)):(this._autoPong=options.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(type){BINARY_TYPES.includes(type)&&(this._binaryType=type,this._receiver&&(this._receiver._binaryType=type))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(socket,head,options){const receiver=new Receiver({allowSynchronousEvents:options.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:options.maxPayload,skipUTF8Validation:options.skipUTF8Validation});this._sender=new Sender(socket,this._extensions,options.generateMask),this._receiver=receiver,this._socket=socket,receiver[kWebSocket$1]=this,socket[kWebSocket$1]=this,receiver.on("conclude",receiverOnConclude),receiver.on("drain",receiverOnDrain),receiver.on("error",receiverOnError),receiver.on("message",receiverOnMessage),receiver.on("ping",receiverOnPing),receiver.on("pong",receiverOnPong),socket.setTimeout&&socket.setTimeout(0),socket.setNoDelay&&socket.setNoDelay(),head.length>0&&socket.unshift(head),socket.on("close",socketOnClose),socket.on("data",socketOnData),socket.on("end",socketOnEnd),socket.on("error",socketOnError$1),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=WebSocket.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[PerMessageDeflate$1.extensionName]&&this._extensions[PerMessageDeflate$1.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(code,data){if(this.readyState!==WebSocket.CLOSED)if(this.readyState!==WebSocket.CONNECTING)this.readyState!==WebSocket.CLOSING?(this._readyState=WebSocket.CLOSING,this._sender.close(code,data,!this._isServer,(err=>{err||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const msg="WebSocket was closed before the connection was established";abortHandshake$1(this,this._req,msg)}}pause(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!0,this._socket.pause())}ping(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.ping(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}pong(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.pong(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}resume(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(data,options,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof options&&(cb=options,options={}),"number"==typeof data&&(data=data.toString()),this.readyState!==WebSocket.OPEN)return void sendAfterClose(this,data,cb);const opts={binary:"string"!=typeof data,mask:!this._isServer,compress:!0,fin:!0,...options};this._extensions[PerMessageDeflate$1.extensionName]||(opts.compress=!1),this._sender.send(data||EMPTY_BUFFER,opts,cb)}terminate(){if(this.readyState!==WebSocket.CLOSED)if(this.readyState!==WebSocket.CONNECTING)this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy());else{const msg="WebSocket was closed before the connection was established";abortHandshake$1(this,this._req,msg)}}};Object.defineProperty(WebSocket$4,"CONNECTING",{enumerable:!0,value:readyStates.indexOf("CONNECTING")}),Object.defineProperty(WebSocket$4.prototype,"CONNECTING",{enumerable:!0,value:readyStates.indexOf("CONNECTING")}),Object.defineProperty(WebSocket$4,"OPEN",{enumerable:!0,value:readyStates.indexOf("OPEN")}),Object.defineProperty(WebSocket$4.prototype,"OPEN",{enumerable:!0,value:readyStates.indexOf("OPEN")}),Object.defineProperty(WebSocket$4,"CLOSING",{enumerable:!0,value:readyStates.indexOf("CLOSING")}),Object.defineProperty(WebSocket$4.prototype,"CLOSING",{enumerable:!0,value:readyStates.indexOf("CLOSING")}),Object.defineProperty(WebSocket$4,"CLOSED",{enumerable:!0,value:readyStates.indexOf("CLOSED")}),Object.defineProperty(WebSocket$4.prototype,"CLOSED",{enumerable:!0,value:readyStates.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((property=>{Object.defineProperty(WebSocket$4.prototype,property,{enumerable:!0})})),["open","error","close","message"].forEach((method=>{Object.defineProperty(WebSocket$4.prototype,`on${method}`,{enumerable:!0,get(){for(const listener of this.listeners(method))if(listener[kForOnEventAttribute])return listener[kListener];return null},set(handler){for(const listener of this.listeners(method))if(listener[kForOnEventAttribute]){this.removeListener(method,listener);break}"function"==typeof handler&&this.addEventListener(method,handler,{[kForOnEventAttribute]:!0})}})})),WebSocket$4.prototype.addEventListener=addEventListener,WebSocket$4.prototype.removeEventListener=removeEventListener;var websocket$1=WebSocket$4;function initAsClient(websocket,address,protocols,options){const opts={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:protocolVersions[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...options,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(websocket._autoPong=opts.autoPong,!protocolVersions.includes(opts.protocolVersion))throw new RangeError(`Unsupported protocol version: ${opts.protocolVersion} (supported versions: ${protocolVersions.join(", ")})`);let parsedUrl;if(address instanceof URL)parsedUrl=address;else try{parsedUrl=new URL(address)}catch(e){throw new SyntaxError(`Invalid URL: ${address}`)}"http:"===parsedUrl.protocol?parsedUrl.protocol="ws:":"https:"===parsedUrl.protocol&&(parsedUrl.protocol="wss:"),websocket._url=parsedUrl.href;const isSecure="wss:"===parsedUrl.protocol,isIpcUrl="ws+unix:"===parsedUrl.protocol;let invalidUrlMessage;if("ws:"===parsedUrl.protocol||isSecure||isIpcUrl?isIpcUrl&&!parsedUrl.pathname?invalidUrlMessage="The URL's pathname is empty":parsedUrl.hash&&(invalidUrlMessage="The URL contains a fragment identifier"):invalidUrlMessage='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',invalidUrlMessage){const err=new SyntaxError(invalidUrlMessage);if(0===websocket._redirects)throw err;return void emitErrorAndClose(websocket,err)}const defaultPort=isSecure?443:80,key=randomBytes(16).toString("base64"),request=isSecure?https.request:http$1.request,protocolSet=new Set;let perMessageDeflate,req;if(opts.createConnection=opts.createConnection||(isSecure?tlsConnect:netConnect),opts.defaultPort=opts.defaultPort||defaultPort,opts.port=parsedUrl.port||defaultPort,opts.host=parsedUrl.hostname.startsWith("[")?parsedUrl.hostname.slice(1,-1):parsedUrl.hostname,opts.headers={...opts.headers,"Sec-WebSocket-Version":opts.protocolVersion,"Sec-WebSocket-Key":key,Connection:"Upgrade",Upgrade:"websocket"},opts.path=parsedUrl.pathname+parsedUrl.search,opts.timeout=opts.handshakeTimeout,opts.perMessageDeflate&&(perMessageDeflate=new PerMessageDeflate$1(!0!==opts.perMessageDeflate?opts.perMessageDeflate:{},!1,opts.maxPayload),opts.headers["Sec-WebSocket-Extensions"]=format({[PerMessageDeflate$1.extensionName]:perMessageDeflate.offer()})),protocols.length){for(const protocol of protocols){if("string"!=typeof protocol||!subprotocolRegex.test(protocol)||protocolSet.has(protocol))throw new SyntaxError("An invalid or duplicated subprotocol was specified");protocolSet.add(protocol)}opts.headers["Sec-WebSocket-Protocol"]=protocols.join(",")}if(opts.origin&&(opts.protocolVersion<13?opts.headers["Sec-WebSocket-Origin"]=opts.origin:opts.headers.Origin=opts.origin),(parsedUrl.username||parsedUrl.password)&&(opts.auth=`${parsedUrl.username}:${parsedUrl.password}`),isIpcUrl){const parts=opts.path.split(":");opts.socketPath=parts[0],opts.path=parts[1]}if(opts.followRedirects){if(0===websocket._redirects){websocket._originalIpc=isIpcUrl,websocket._originalSecure=isSecure,websocket._originalHostOrSocketPath=isIpcUrl?opts.socketPath:parsedUrl.host;const headers=options&&options.headers;if(options={...options,headers:{}},headers)for(const[key,value]of Object.entries(headers))options.headers[key.toLowerCase()]=value}else if(0===websocket.listenerCount("redirect")){const isSameHost=isIpcUrl?!!websocket._originalIpc&&opts.socketPath===websocket._originalHostOrSocketPath:!websocket._originalIpc&&parsedUrl.host===websocket._originalHostOrSocketPath;(!isSameHost||websocket._originalSecure&&!isSecure)&&(delete opts.headers.authorization,delete opts.headers.cookie,isSameHost||delete opts.headers.host,opts.auth=void 0)}opts.auth&&!options.headers.authorization&&(options.headers.authorization="Basic "+Buffer.from(opts.auth).toString("base64")),req=websocket._req=request(opts),websocket._redirects&&websocket.emit("redirect",websocket.url,req)}else req=websocket._req=request(opts);opts.timeout&&req.on("timeout",(()=>{abortHandshake$1(websocket,req,"Opening handshake has timed out")})),req.on("error",(err=>{null===req||req[kAborted]||(req=websocket._req=null,emitErrorAndClose(websocket,err))})),req.on("response",(res=>{const location=res.headers.location,statusCode=res.statusCode;if(location&&opts.followRedirects&&statusCode>=300&&statusCode<400){if(++websocket._redirects>opts.maxRedirects)return void abortHandshake$1(websocket,req,"Maximum redirects exceeded");let addr;req.abort();try{addr=new URL(location,address)}catch(e){const err=new SyntaxError(`Invalid URL: ${location}`);return void emitErrorAndClose(websocket,err)}initAsClient(websocket,addr,protocols,options)}else websocket.emit("unexpected-response",req,res)||abortHandshake$1(websocket,req,`Unexpected server response: ${res.statusCode}`)})),req.on("upgrade",((res,socket,head)=>{if(websocket.emit("upgrade",res),websocket.readyState!==WebSocket$4.CONNECTING)return;req=websocket._req=null;const upgrade=res.headers.upgrade;if(void 0===upgrade||"websocket"!==upgrade.toLowerCase())return void abortHandshake$1(websocket,socket,"Invalid Upgrade header");const digest=createHash$1("sha1").update(key+GUID$1).digest("base64");if(res.headers["sec-websocket-accept"]!==digest)return void abortHandshake$1(websocket,socket,"Invalid Sec-WebSocket-Accept header");const serverProt=res.headers["sec-websocket-protocol"];let protError;if(void 0!==serverProt?protocolSet.size?protocolSet.has(serverProt)||(protError="Server sent an invalid subprotocol"):protError="Server sent a subprotocol but none was requested":protocolSet.size&&(protError="Server sent no subprotocol"),protError)return void abortHandshake$1(websocket,socket,protError);serverProt&&(websocket._protocol=serverProt);const secWebSocketExtensions=res.headers["sec-websocket-extensions"];if(void 0!==secWebSocketExtensions){if(!perMessageDeflate){return void abortHandshake$1(websocket,socket,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let extensions;try{extensions=parse$2(secWebSocketExtensions)}catch(err){return void abortHandshake$1(websocket,socket,"Invalid Sec-WebSocket-Extensions header")}const extensionNames=Object.keys(extensions);if(1!==extensionNames.length||extensionNames[0]!==PerMessageDeflate$1.extensionName){return void abortHandshake$1(websocket,socket,"Server indicated an extension that was not requested")}try{perMessageDeflate.accept(extensions[PerMessageDeflate$1.extensionName])}catch(err){return void abortHandshake$1(websocket,socket,"Invalid Sec-WebSocket-Extensions header")}websocket._extensions[PerMessageDeflate$1.extensionName]=perMessageDeflate}websocket.setSocket(socket,head,{allowSynchronousEvents:opts.allowSynchronousEvents,generateMask:opts.generateMask,maxPayload:opts.maxPayload,skipUTF8Validation:opts.skipUTF8Validation})})),opts.finishRequest?opts.finishRequest(req,websocket):req.end()}function emitErrorAndClose(websocket,err){websocket._readyState=WebSocket$4.CLOSING,websocket.emit("error",err),websocket.emitClose()}function netConnect(options){return options.path=options.socketPath,net.connect(options)}function tlsConnect(options){return options.path=void 0,options.servername||""===options.servername||(options.servername=net.isIP(options.host)?"":options.host),tls.connect(options)}function abortHandshake$1(websocket,stream,message){websocket._readyState=WebSocket$4.CLOSING;const err=new Error(message);Error.captureStackTrace(err,abortHandshake$1),stream.setHeader?(stream[kAborted]=!0,stream.abort(),stream.socket&&!stream.socket.destroyed&&stream.socket.destroy(),process.nextTick(emitErrorAndClose,websocket,err)):(stream.destroy(err),stream.once("error",websocket.emit.bind(websocket,"error")),stream.once("close",websocket.emitClose.bind(websocket)))}function sendAfterClose(websocket,data,cb){if(data){const length=toBuffer(data).length;websocket._socket?websocket._sender._bufferedBytes+=length:websocket._bufferedAmount+=length}if(cb){const err=new Error(`WebSocket is not open: readyState ${websocket.readyState} (${readyStates[websocket.readyState]})`);process.nextTick(cb,err)}}function receiverOnConclude(code,reason){const websocket=this[kWebSocket$1];websocket._closeFrameReceived=!0,websocket._closeMessage=reason,websocket._closeCode=code,void 0!==websocket._socket[kWebSocket$1]&&(websocket._socket.removeListener("data",socketOnData),process.nextTick(resume,websocket._socket),1005===code?websocket.close():websocket.close(code,reason))}function receiverOnDrain(){const websocket=this[kWebSocket$1];websocket.isPaused||websocket._socket.resume()}function receiverOnError(err){const websocket=this[kWebSocket$1];void 0!==websocket._socket[kWebSocket$1]&&(websocket._socket.removeListener("data",socketOnData),process.nextTick(resume,websocket._socket),websocket.close(err[kStatusCode])),websocket.emit("error",err)}function receiverOnFinish(){this[kWebSocket$1].emitClose()}function receiverOnMessage(data,isBinary){this[kWebSocket$1].emit("message",data,isBinary)}function receiverOnPing(data){const websocket=this[kWebSocket$1];websocket._autoPong&&websocket.pong(data,!this._isServer,NOOP),websocket.emit("ping",data)}function receiverOnPong(data){this[kWebSocket$1].emit("pong",data)}function resume(stream){stream.resume()}function socketOnClose(){const websocket=this[kWebSocket$1];let chunk;this.removeListener("close",socketOnClose),this.removeListener("data",socketOnData),this.removeListener("end",socketOnEnd),websocket._readyState=WebSocket$4.CLOSING,this._readableState.endEmitted||websocket._closeFrameReceived||websocket._receiver._writableState.errorEmitted||null===(chunk=websocket._socket.read())||websocket._receiver.write(chunk),websocket._receiver.end(),this[kWebSocket$1]=void 0,clearTimeout(websocket._closeTimer),websocket._receiver._writableState.finished||websocket._receiver._writableState.errorEmitted?websocket.emitClose():(websocket._receiver.on("error",receiverOnFinish),websocket._receiver.on("finish",receiverOnFinish))}function socketOnData(chunk){this[kWebSocket$1]._receiver.write(chunk)||this.pause()}function socketOnEnd(){const websocket=this[kWebSocket$1];websocket._readyState=WebSocket$4.CLOSING,websocket._receiver.end(),this.end()}function socketOnError$1(){const websocket=this[kWebSocket$1];this.removeListener("error",socketOnError$1),this.on("error",NOOP),websocket&&(websocket._readyState=WebSocket$4.CLOSING,this.destroy())}const{Duplex:Duplex}=require$$0$4;function emitClose$1(stream){stream.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(err){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",err)}var stream=function(ws,options){let terminateOnDestroy=!0;const duplex=new Duplex({...options,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return ws.on("message",(function(msg,isBinary){const data=!isBinary&&duplex._readableState.objectMode?msg.toString():msg;duplex.push(data)||ws.pause()})),ws.once("error",(function(err){duplex.destroyed||(terminateOnDestroy=!1,duplex.destroy(err))})),ws.once("close",(function(){duplex.destroyed||duplex.push(null)})),duplex._destroy=function(err,callback){if(ws.readyState===ws.CLOSED)return callback(err),void process.nextTick(emitClose$1,duplex);let called=!1;ws.once("error",(function(err){called=!0,callback(err)})),ws.once("close",(function(){called||callback(err),process.nextTick(emitClose$1,duplex)})),terminateOnDestroy&&ws.terminate()},duplex._final=function(callback){ws.readyState!==ws.CONNECTING?null!==ws._socket&&(ws._socket._writableState.finished?(callback(),duplex._readableState.endEmitted&&duplex.destroy()):(ws._socket.once("finish",(function(){callback()})),ws.close())):ws.once("open",(function(){duplex._final(callback)}))},duplex._read=function(){ws.isPaused&&ws.resume()},duplex._write=function(chunk,encoding,callback){ws.readyState!==ws.CONNECTING?ws.send(chunk,callback):ws.once("open",(function(){duplex._write(chunk,encoding,callback)}))},duplex.on("end",duplexOnEnd),duplex.on("error",duplexOnError),duplex};const{tokenChars:tokenChars}=validationExports;var subprotocol$1={parse:function(header){const protocols=new Set;let start=-1,end=-1,i=0;for(;i<header.length;i++){const code=header.charCodeAt(i);if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(0===i||32!==code&&9!==code){if(44!==code)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i);const protocol=header.slice(start,end);if(protocols.has(protocol))throw new SyntaxError(`The "${protocol}" subprotocol is duplicated`);protocols.add(protocol),start=end=-1}}else-1===end&&-1!==start&&(end=i)}if(-1===start||-1!==end)throw new SyntaxError("Unexpected end of input");const protocol=header.slice(start,i);if(protocols.has(protocol))throw new SyntaxError(`The "${protocol}" subprotocol is duplicated`);return protocols.add(protocol),protocols}};const EventEmitter=require$$0$6,http=require$$0$9,{createHash:createHash}=require$$0$7,extension=extension$1,PerMessageDeflate=permessageDeflate,subprotocol=subprotocol$1,WebSocket$3=websocket$1,{GUID:GUID,kWebSocket:kWebSocket}=constants,keyRegex=/^[+/0-9A-Za-z]{22}==$/;var websocketServer=class extends EventEmitter{constructor(options,callback){if(super(),null==(options={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:WebSocket$3,...options}).port&&!options.server&&!options.noServer||null!=options.port&&(options.server||options.noServer)||options.server&&options.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=options.port?(this._server=http.createServer(((req,res)=>{const body=http.STATUS_CODES[426];res.writeHead(426,{"Content-Length":body.length,"Content-Type":"text/plain"}),res.end(body)})),this._server.listen(options.port,options.host,options.backlog,callback)):options.server&&(this._server=options.server),this._server){const emitConnection=this.emit.bind(this,"connection");this._removeListeners=function(server,map){for(const event of Object.keys(map))server.on(event,map[event]);return function(){for(const event of Object.keys(map))server.removeListener(event,map[event])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(req,socket,head)=>{this.handleUpgrade(req,socket,head,emitConnection)}})}!0===options.perMessageDeflate&&(options.perMessageDeflate={}),options.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=options,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(cb){if(2===this._state)return cb&&this.once("close",(()=>{cb(new Error("The server is not running"))})),void process.nextTick(emitClose,this);if(cb&&this.once("close",cb),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(emitClose,this);else{const server=this._server;this._removeListeners(),this._removeListeners=this._server=null,server.close((()=>{emitClose(this)}))}}shouldHandle(req){if(this.options.path){const index=req.url.indexOf("?");if((-1!==index?req.url.slice(0,index):req.url)!==this.options.path)return!1}return!0}handleUpgrade(req,socket,head,cb){socket.on("error",socketOnError);const key=req.headers["sec-websocket-key"],upgrade=req.headers.upgrade,version=+req.headers["sec-websocket-version"];if("GET"!==req.method){return void abortHandshakeOrEmitwsClientError(this,req,socket,405,"Invalid HTTP method")}if(void 0===upgrade||"websocket"!==upgrade.toLowerCase()){return void abortHandshakeOrEmitwsClientError(this,req,socket,400,"Invalid Upgrade header")}if(void 0===key||!keyRegex.test(key)){return void abortHandshakeOrEmitwsClientError(this,req,socket,400,"Missing or invalid Sec-WebSocket-Key header")}if(8!==version&&13!==version){return void abortHandshakeOrEmitwsClientError(this,req,socket,400,"Missing or invalid Sec-WebSocket-Version header")}if(!this.shouldHandle(req))return void abortHandshake(socket,400);const secWebSocketProtocol=req.headers["sec-websocket-protocol"];let protocols=new Set;if(void 0!==secWebSocketProtocol)try{protocols=subprotocol.parse(secWebSocketProtocol)}catch(err){return void abortHandshakeOrEmitwsClientError(this,req,socket,400,"Invalid Sec-WebSocket-Protocol header")}const secWebSocketExtensions=req.headers["sec-websocket-extensions"],extensions={};if(this.options.perMessageDeflate&&void 0!==secWebSocketExtensions){const perMessageDeflate=new PerMessageDeflate(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const offers=extension.parse(secWebSocketExtensions);offers[PerMessageDeflate.extensionName]&&(perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]),extensions[PerMessageDeflate.extensionName]=perMessageDeflate)}catch(err){return void abortHandshakeOrEmitwsClientError(this,req,socket,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const info={origin:req.headers[""+(8===version?"sec-websocket-origin":"origin")],secure:!(!req.socket.authorized&&!req.socket.encrypted),req:req};if(2===this.options.verifyClient.length)return void this.options.verifyClient(info,((verified,code,message,headers)=>{if(!verified)return abortHandshake(socket,code||401,message,headers);this.completeUpgrade(extensions,key,protocols,req,socket,head,cb)}));if(!this.options.verifyClient(info))return abortHandshake(socket,401)}this.completeUpgrade(extensions,key,protocols,req,socket,head,cb)}completeUpgrade(extensions,key,protocols,req,socket,head,cb){if(!socket.readable||!socket.writable)return socket.destroy();if(socket[kWebSocket])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return abortHandshake(socket,503);const headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${createHash("sha1").update(key+GUID).digest("base64")}`],ws=new this.options.WebSocket(null,void 0,this.options);if(protocols.size){const protocol=this.options.handleProtocols?this.options.handleProtocols(protocols,req):protocols.values().next().value;protocol&&(headers.push(`Sec-WebSocket-Protocol: ${protocol}`),ws._protocol=protocol)}if(extensions[PerMessageDeflate.extensionName]){const params=extensions[PerMessageDeflate.extensionName].params,value=extension.format({[PerMessageDeflate.extensionName]:[params]});headers.push(`Sec-WebSocket-Extensions: ${value}`),ws._extensions=extensions}this.emit("headers",headers,req),socket.write(headers.concat("\r\n").join("\r\n")),socket.removeListener("error",socketOnError),ws.setSocket(socket,head,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(ws),ws.on("close",(()=>{this.clients.delete(ws),this._shouldEmitClose&&!this.clients.size&&process.nextTick(emitClose,this)}))),cb(ws,req)}};function emitClose(server){server._state=2,server.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(socket,code,message,headers){message=message||http.STATUS_CODES[code],headers={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(message),...headers},socket.once("finish",socket.destroy),socket.end(`HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\r\n`+Object.keys(headers).map((h=>`${h}: ${headers[h]}`)).join("\r\n")+"\r\n\r\n"+message)}function abortHandshakeOrEmitwsClientError(server,req,socket,code,message){if(server.listenerCount("wsClientError")){const err=new Error(message);Error.captureStackTrace(err,abortHandshakeOrEmitwsClientError),server.emit("wsClientError",err,socket,req)}else abortHandshake(socket,code,message)}const WebSocket$2=websocket$1;WebSocket$2.createWebSocketStream=stream,WebSocket$2.Server=websocketServer,WebSocket$2.Receiver=receiver,WebSocket$2.Sender=sender,WebSocket$2.WebSocket=WebSocket$2,WebSocket$2.WebSocketServer=WebSocket$2.Server;var ws=WebSocket$2,lib={exports:{}},getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;var objectAssign=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to},vary$1={exports:{}};vary$1.exports=function(res,field){if(!res||!res.getHeader||!res.setHeader)throw new TypeError("res argument is required");var val=res.getHeader("Vary")||"",header=Array.isArray(val)?val.join(", "):String(val);(val=append(header,field))&&res.setHeader("Vary",val)},vary$1.exports.append=append;var FIELD_NAME_REGEXP=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function append(header,field){if("string"!=typeof header)throw new TypeError("header argument is required");if(!field)throw new TypeError("field argument is required");for(var fields=Array.isArray(field)?field:parse(String(field)),j=0;j<fields.length;j++)if(!FIELD_NAME_REGEXP.test(fields[j]))throw new TypeError("field argument contains an invalid header name");if("*"===header)return header;var val=header,vals=parse(header.toLowerCase());if(-1!==fields.indexOf("*")||-1!==vals.indexOf("*"))return"*";for(var i=0;i<fields.length;i++){var fld=fields[i].toLowerCase();-1===vals.indexOf(fld)&&(vals.push(fld),val=val?val+", "+fields[i]:fields[i])}return val}function parse(header){for(var end=0,list=[],start=0,i=0,len=header.length;i<len;i++)switch(header.charCodeAt(i)){case 32:start===end&&(start=end=i+1);break;case 44:list.push(header.substring(start,end)),start=end=i+1;break;default:end=i+1}return list.push(header.substring(start,end)),list}var varyExports=vary$1.exports;!function(){var assign=objectAssign,vary=varyExports,defaults={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function isString(s){return"string"==typeof s||s instanceof String}function isOriginAllowed(origin,allowedOrigin){if(Array.isArray(allowedOrigin)){for(var i=0;i<allowedOrigin.length;++i)if(isOriginAllowed(origin,allowedOrigin[i]))return!0;return!1}return isString(allowedOrigin)?origin===allowedOrigin:allowedOrigin instanceof RegExp?allowedOrigin.test(origin):!!allowedOrigin}function configureOrigin(options,req){var isAllowed,requestOrigin=req.headers.origin,headers=[];return options.origin&&"*"!==options.origin?isString(options.origin)?(headers.push([{key:"Access-Control-Allow-Origin",value:options.origin}]),headers.push([{key:"Vary",value:"Origin"}])):(isAllowed=isOriginAllowed(requestOrigin,options.origin),headers.push([{key:"Access-Control-Allow-Origin",value:!!isAllowed&&requestOrigin}]),headers.push([{key:"Vary",value:"Origin"}])):headers.push([{key:"Access-Control-Allow-Origin",value:"*"}]),headers}function configureCredentials(options){return!0===options.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function configureExposedHeaders(options){var headers=options.exposedHeaders;return headers?(headers.join&&(headers=headers.join(",")),headers&&headers.length?{key:"Access-Control-Expose-Headers",value:headers}:null):null}function applyHeaders(headers,res){for(var i=0,n=headers.length;i<n;i++){var header=headers[i];header&&(Array.isArray(header)?applyHeaders(header,res):"Vary"===header.key&&header.value?vary(res,header.value):header.value&&res.setHeader(header.key,header.value))}}lib.exports=function(o){var optionsCallback=null;return optionsCallback="function"==typeof o?o:function(req,cb){cb(null,o)},function(req,res,next){optionsCallback(req,(function(err,options){if(err)next(err);else{var corsOptions=assign({},defaults,options),originCallback=null;corsOptions.origin&&"function"==typeof corsOptions.origin?originCallback=corsOptions.origin:corsOptions.origin&&(originCallback=function(origin,cb){cb(null,corsOptions.origin)}),originCallback?originCallback(req.headers.origin,(function(err2,origin){err2||!origin?next(err2):(corsOptions.origin=origin,function(options,req,res,next){var headers=[];"OPTIONS"===(req.method&&req.method.toUpperCase&&req.method.toUpperCase())?(headers.push(configureOrigin(options,req)),headers.push(configureCredentials(options)),headers.push(function(options){var methods=options.methods;return methods.join&&(methods=options.methods.join(",")),{key:"Access-Control-Allow-Methods",value:methods}}(options)),headers.push(function(options,req){var allowedHeaders=options.allowedHeaders||options.headers,headers=[];return allowedHeaders?allowedHeaders.join&&(allowedHeaders=allowedHeaders.join(",")):(allowedHeaders=req.headers["access-control-request-headers"],headers.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),allowedHeaders&&allowedHeaders.length&&headers.push([{key:"Access-Control-Allow-Headers",value:allowedHeaders}]),headers}(options,req)),headers.push(function(options){var maxAge=("number"==typeof options.maxAge||options.maxAge)&&options.maxAge.toString();return maxAge&&maxAge.length?{key:"Access-Control-Max-Age",value:maxAge}:null}(options)),headers.push(configureExposedHeaders(options)),applyHeaders(headers,res),options.preflightContinue?next():(res.statusCode=options.optionsSuccessStatus,res.setHeader("Content-Length","0"),res.end())):(headers.push(configureOrigin(options,req)),headers.push(configureCredentials(options)),headers.push(configureExposedHeaders(options)),applyHeaders(headers,res),next())}(corsOptions,req,res,next))})):next()}}))}}}();var libExports=lib.exports;Object.defineProperty(server,"__esModule",{value:!0}),server.Server=server.BaseServer=void 0;const qs=require$$1$2,url_1=require$$7,base64id=base64idExports,transports_1=transports,events_1$2=require$$0$6,socket_1=socket$1,cookie_1=cookie,ws_1=ws,webtransport_1=webtransport,engine_io_parser_1=cjs$1,debug$6=(0,srcExports.default)("engine"),kResponseHeaders=Symbol("responseHeaders");class BaseServer extends events_1$2.EventEmitter{constructor(opts={}){super(),this.middlewares=[],this.clients={},this.clientsCount=0,this.opts=Object.assign({wsEngine:ws_1.Server,pingTimeout:2e4,pingInterval:25e3,upgradeTimeout:1e4,maxHttpBufferSize:1e6,transports:["polling","websocket"],allowUpgrades:!0,httpCompression:{threshold:1024},cors:!1,allowEIO3:!1},opts),opts.cookie&&(this.opts.cookie=Object.assign({name:"io",path:"/",httpOnly:!1!==opts.cookie.path,sameSite:"lax"},opts.cookie)),this.opts.cors&&this.use(libExports(this.opts.cors)),opts.perMessageDeflate&&(this.opts.perMessageDeflate=Object.assign({threshold:1024},opts.perMessageDeflate)),this.init()}_computePath(options){let path=(options.path||"/engine.io").replace(/\/$/,"");return!1!==options.addTrailingSlash&&(path+="/"),path}upgrades(transport){return this.opts.allowUpgrades&&transports_1.default[transport].upgradesTo||[]}verify(req,upgrade,fn){const transport=req._query.transport;if(!~this.opts.transports.indexOf(transport)||"webtransport"===transport)return debug$6('unknown transport "%s"',transport),fn(Server$1.errors.UNKNOWN_TRANSPORT,{transport:transport});const isOriginInvalid=function(val){if((val+="").length<1)return!1;if(!validHdrChars[val.charCodeAt(0)])return debug$6('invalid header, index 0, char "%s"',val.charCodeAt(0)),!0;if(val.length<2)return!1;if(!validHdrChars[val.charCodeAt(1)])return debug$6('invalid header, index 1, char "%s"',val.charCodeAt(1)),!0;if(val.length<3)return!1;if(!validHdrChars[val.charCodeAt(2)])return debug$6('invalid header, index 2, char "%s"',val.charCodeAt(2)),!0;if(val.length<4)return!1;if(!validHdrChars[val.charCodeAt(3)])return debug$6('invalid header, index 3, char "%s"',val.charCodeAt(3)),!0;for(let i=4;i<val.length;++i)if(!validHdrChars[val.charCodeAt(i)])return debug$6('invalid header, index "%i", char "%s"',i,val.charCodeAt(i)),!0;return!1}(req.headers.origin);if(isOriginInvalid){const origin=req.headers.origin;return req.headers.origin=null,debug$6("origin header invalid"),fn(Server$1.errors.BAD_REQUEST,{name:"INVALID_ORIGIN",origin:origin})}const sid=req._query.sid;if(!sid)return"GET"!==req.method?fn(Server$1.errors.BAD_HANDSHAKE_METHOD,{method:req.method}):"websocket"!==transport||upgrade?this.opts.allowRequest?this.opts.allowRequest(req,((message,success)=>{if(!success)return fn(Server$1.errors.FORBIDDEN,{message:message});fn()})):fn():(debug$6("invalid transport upgrade"),fn(Server$1.errors.BAD_REQUEST,{name:"TRANSPORT_HANDSHAKE_ERROR"}));{if(!this.clients.hasOwnProperty(sid))return debug$6('unknown sid "%s"',sid),fn(Server$1.errors.UNKNOWN_SID,{sid:sid});const previousTransport=this.clients[sid].transport.name;if(!upgrade&&previousTransport!==transport)return debug$6("bad request: unexpected transport without upgrade"),fn(Server$1.errors.BAD_REQUEST,{name:"TRANSPORT_MISMATCH",transport:transport,previousTransport:previousTransport})}fn()}use(fn){this.middlewares.push(fn)}_applyMiddlewares(req,res,callback){if(0===this.middlewares.length)return debug$6("no middleware to apply, skipping"),callback();const apply=i=>{debug$6("applying middleware n°%d",i+1),this.middlewares[i](req,res,(err=>{if(err)return callback(err);i+1<this.middlewares.length?apply(i+1):callback()}))};apply(0)}close(){debug$6("closing all open clients");for(let i in this.clients)this.clients.hasOwnProperty(i)&&this.clients[i].close(!0);return this.cleanup(),this}generateId(req){return base64id.generateId()}async handshake(transportName,req,closeConnection){const protocol="4"===req._query.EIO?4:3;if(3===protocol&&!this.opts.allowEIO3)return debug$6("unsupported protocol version"),this.emit("connection_error",{req:req,code:Server$1.errors.UNSUPPORTED_PROTOCOL_VERSION,message:Server$1.errorMessages[Server$1.errors.UNSUPPORTED_PROTOCOL_VERSION],context:{protocol:protocol}}),void closeConnection(Server$1.errors.UNSUPPORTED_PROTOCOL_VERSION);let id;try{id=await this.generateId(req)}catch(e){return debug$6("error while generating an id"),this.emit("connection_error",{req:req,code:Server$1.errors.BAD_REQUEST,message:Server$1.errorMessages[Server$1.errors.BAD_REQUEST],context:{name:"ID_GENERATION_ERROR",error:e}}),void closeConnection(Server$1.errors.BAD_REQUEST)}debug$6('handshaking client "%s"',id);try{var transport=this.createTransport(transportName,req);"polling"===transportName?(transport.maxHttpBufferSize=this.opts.maxHttpBufferSize,transport.httpCompression=this.opts.httpCompression):"websocket"===transportName&&(transport.perMessageDeflate=this.opts.perMessageDeflate)}catch(e){return debug$6('error handshaking to transport "%s"',transportName),this.emit("connection_error",{req:req,code:Server$1.errors.BAD_REQUEST,message:Server$1.errorMessages[Server$1.errors.BAD_REQUEST],context:{name:"TRANSPORT_HANDSHAKE_ERROR",error:e}}),void closeConnection(Server$1.errors.BAD_REQUEST)}const socket=new socket_1.Socket(id,this,transport,req,protocol);return transport.on("headers",((headers,req)=>{!req._query.sid&&(this.opts.cookie&&(headers["Set-Cookie"]=[(0,cookie_1.serialize)(this.opts.cookie.name,id,this.opts.cookie)]),this.emit("initial_headers",headers,req)),this.emit("headers",headers,req)})),transport.onRequest(req),this.clients[id]=socket,this.clientsCount++,socket.once("close",(()=>{delete this.clients[id],this.clientsCount--})),this.emit("connection",socket),transport}async onWebTransportSession(session){const timeout=setTimeout((()=>{debug$6("the client failed to establish a bidirectional stream in the given period"),session.close()}),this.opts.upgradeTimeout),streamReader=session.incomingBidirectionalStreams.getReader(),result=await streamReader.read();if(result.done)return void debug$6("session is closed");const stream=result.value,transformStream=(0,engine_io_parser_1.createPacketDecoderStream)(this.opts.maxHttpBufferSize,"nodebuffer"),reader=stream.readable.pipeThrough(transformStream).getReader(),{value:value,done:done}=await reader.read();if(done)return void debug$6("stream is closed");if(clearTimeout(timeout),"open"!==value.type)return debug$6("invalid WebTransport handshake"),session.close();if(void 0===value.data){const transport=new webtransport_1.WebTransport(session,stream,reader),id=base64id.generateId();debug$6('handshaking client "%s" (WebTransport)',id);const socket=new socket_1.Socket(id,this,transport,null,4);return this.clients[id]=socket,this.clientsCount++,socket.once("close",(()=>{delete this.clients[id],this.clientsCount--})),void this.emit("connection",socket)}const sid=function(data){try{const parsed=JSON.parse(data);if("string"==typeof parsed.sid)return parsed.sid}catch(e){}}(value.data);if(!sid)return debug$6("invalid WebTransport handshake"),session.close();const client=this.clients[sid];if(client)if(client.upgrading)debug$6("transport has already been trying to upgrade"),session.close();else if(client.upgraded)debug$6("transport had already been upgraded"),session.close();else{debug$6("upgrading existing transport");const transport=new webtransport_1.WebTransport(session,stream,reader);client.maybeUpgrade(transport)}else debug$6("upgrade attempt for closed client"),session.close()}}server.BaseServer=BaseServer,BaseServer.errors={UNKNOWN_TRANSPORT:0,UNKNOWN_SID:1,BAD_HANDSHAKE_METHOD:2,BAD_REQUEST:3,FORBIDDEN:4,UNSUPPORTED_PROTOCOL_VERSION:5},BaseServer.errorMessages={0:"Transport unknown",1:"Session ID unknown",2:"Bad handshake method",3:"Bad request",4:"Forbidden",5:"Unsupported protocol version"};class WebSocketResponse{constructor(req,socket){this.req=req,this.socket=socket,req[kResponseHeaders]={}}setHeader(name,value){this.req[kResponseHeaders][name]=value}getHeader(name){return this.req[kResponseHeaders][name]}removeHeader(name){delete this.req[kResponseHeaders][name]}write(){}writeHead(){}end(){this.socket.destroy()}}let Server$1=class Server extends BaseServer{init(){~this.opts.transports.indexOf("websocket")&&(this.ws&&this.ws.close(),this.ws=new this.opts.wsEngine({noServer:!0,clientTracking:!1,perMessageDeflate:this.opts.perMessageDeflate,maxPayload:this.opts.maxHttpBufferSize}),"function"==typeof this.ws.on&&this.ws.on("headers",((headersArray,req)=>{const additionalHeaders=req[kResponseHeaders]||{};delete req[kResponseHeaders];!req._query.sid&&this.emit("initial_headers",additionalHeaders,req),this.emit("headers",additionalHeaders,req),debug$6("writing headers: %j",additionalHeaders),Object.keys(additionalHeaders).forEach((key=>{headersArray.push(`${key}: ${additionalHeaders[key]}`)}))})))}cleanup(){this.ws&&(debug$6("closing webSocketServer"),this.ws.close())}prepare(req){req._query||(req._query=~req.url.indexOf("?")?qs.parse((0,url_1.parse)(req.url).query):{})}createTransport(transportName,req){return new transports_1.default[transportName](req)}handleRequest(req,res){debug$6('handling "%s" http request "%s"',req.method,req.url),this.prepare(req),req.res=res;const callback=(errorCode,errorContext)=>{if(void 0!==errorCode)return this.emit("connection_error",{req:req,code:errorCode,message:Server.errorMessages[errorCode],context:errorContext}),void abortRequest(res,errorCode,errorContext);if(req._query.sid)debug$6("setting new request for existing client"),this.clients[req._query.sid].transport.onRequest(req);else{const closeConnection=(errorCode,errorContext)=>abortRequest(res,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}};this._applyMiddlewares(req,res,(err=>{err?callback(Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(req,!1,callback)}))}handleUpgrade(req,socket,upgradeHead){this.prepare(req);const res=new WebSocketResponse(req,socket),callback=(errorCode,errorContext)=>{if(void 0!==errorCode)return this.emit("connection_error",{req:req,code:errorCode,message:Server.errorMessages[errorCode],context:errorContext}),void abortUpgrade(socket,errorCode,errorContext);const head=Buffer.from(upgradeHead);upgradeHead=null,res.writeHead(),this.ws.handleUpgrade(req,socket,head,(websocket=>{this.onWebSocket(req,socket,websocket)}))};this._applyMiddlewares(req,res,(err=>{err?callback(Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(req,!0,callback)}))}onWebSocket(req,socket,websocket){if(websocket.on("error",onUpgradeError),void 0!==transports_1.default[req._query.transport]&&!transports_1.default[req._query.transport].prototype.handlesUpgrades)return debug$6("transport doesnt handle upgraded requests"),void websocket.close();const id=req._query.sid;if(req.websocket=websocket,id){const client=this.clients[id];if(client)if(client.upgrading)debug$6("transport has already been trying to upgrade"),websocket.close();else if(client.upgraded)debug$6("transport had already been upgraded"),websocket.close();else{debug$6("upgrading existing transport"),websocket.removeListener("error",onUpgradeError);const transport=this.createTransport(req._query.transport,req);transport.perMessageDeflate=this.opts.perMessageDeflate,client.maybeUpgrade(transport)}else debug$6("upgrade attempt for closed client"),websocket.close()}else{const closeConnection=(errorCode,errorContext)=>abortUpgrade(socket,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}function onUpgradeError(){debug$6("websocket error before upgrade")}}attach(server,options={}){const path=this._computePath(options),destroyUpgradeTimeout=options.destroyUpgradeTimeout||1e3;function check(req){return path===req.url.slice(0,path.length)}const listeners=server.listeners("request").slice(0);server.removeAllListeners("request"),server.on("close",this.close.bind(this)),server.on("listening",this.init.bind(this)),server.on("request",((req,res)=>{if(check(req))debug$6('intercepting request for path "%s"',path),this.handleRequest(req,res);else{let i=0;const l=listeners.length;for(;i<l;i++)listeners[i].call(server,req,res)}})),~this.opts.transports.indexOf("websocket")&&server.on("upgrade",((req,socket,head)=>{check(req)?this.handleUpgrade(req,socket,head):!1!==options.destroyUpgrade&&setTimeout((function(){if(socket.writable&&socket.bytesWritten<=0)return socket.on("error",(e=>{debug$6("error while destroying upgrade: %s",e.message)})),socket.end()}),destroyUpgradeTimeout)}))}};function abortRequest(res,errorCode,errorContext){const statusCode=errorCode===Server$1.errors.FORBIDDEN?403:400,message=errorContext&&errorContext.message?errorContext.message:Server$1.errorMessages[errorCode];res.writeHead(statusCode,{"Content-Type":"application/json"}),res.end(JSON.stringify({code:errorCode,message:message}))}function abortUpgrade(socket,errorCode,errorContext={}){if(socket.on("error",(()=>{debug$6("ignoring error from closed connection")})),socket.writable){const message=errorContext.message||Server$1.errorMessages[errorCode],length=Buffer.byteLength(message);socket.write("HTTP/1.1 400 Bad Request\r\nConnection: close\r\nContent-type: text/html\r\nContent-Length: "+length+"\r\n\r\n"+message)}socket.destroy()}server.Server=Server$1;const validHdrChars=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var userver={},transportsUws={},polling={};Object.defineProperty(polling,"__esModule",{value:!0}),polling.Polling=void 0;const transport_1$1=transport,zlib_1=require$$1$1,accepts=accepts$2,debug$5=(0,srcExports.default)("engine:polling"),compressionMethods={gzip:zlib_1.createGzip,deflate:zlib_1.createDeflate};class Polling extends transport_1$1.Transport{constructor(req){super(req),this.closeTimeout=3e4}get name(){return"polling"}get supportsFraming(){return!1}onRequest(req){const res=req.res;req.res=null,"get"===req.getMethod()?this.onPollRequest(req,res):"post"===req.getMethod()?this.onDataRequest(req,res):(res.writeStatus("500 Internal Server Error"),res.end())}onPollRequest(req,res){if(this.req)return debug$5("request overlap"),this.onError("overlap from client"),res.writeStatus("500 Internal Server Error"),void res.end();debug$5("setting request"),this.req=req,this.res=res;req.cleanup=()=>{this.req=this.res=null},res.onAborted((()=>{this.writable=!1,this.onError("poll connection closed prematurely")})),this.writable=!0,this.emit("drain"),this.writable&&this.shouldClose&&(debug$5("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(req,res){if(this.dataReq)return this.onError("data request overlap from client"),res.writeStatus("500 Internal Server Error"),void res.end();const expectedContentLength=Number(req.headers["content-length"]);if(!expectedContentLength)return this.onError("content-length header required"),void res.writeStatus("411 Length Required").end();if(expectedContentLength>this.maxHttpBufferSize)return this.onError("payload too large"),void res.writeStatus("413 Payload Too Large").end();if("application/octet-stream"===req.headers["content-type"]&&4===this.protocol)return this.onError("invalid content");let buffer;this.dataReq=req,this.dataRes=res;let offset=0;const headers={"Content-Type":"text/html"};this.headers(req,headers);for(let key in headers)res.writeHeader(key,String(headers[key]));const onEnd=buffer=>{this.onData(buffer.toString()),this.onDataRequestCleanup(),res.cork((()=>{res.end("ok")}))};res.onAborted((()=>{this.onDataRequestCleanup(),this.onError("data request connection closed prematurely")})),res.onData(((arrayBuffer,isLast)=>{const totalLength=offset+arrayBuffer.byteLength;if(totalLength>expectedContentLength)return this.onError("content-length mismatch"),void res.close();if(!buffer){if(isLast)return void onEnd(Buffer.from(arrayBuffer));buffer=Buffer.allocUnsafe(expectedContentLength)}if(Buffer.from(arrayBuffer).copy(buffer,offset),isLast)return totalLength!=expectedContentLength?(this.onError("content-length mismatch"),res.writeStatus("400 Content-Length Mismatch").end(),void this.onDataRequestCleanup()):void onEnd(buffer);offset=totalLength}))}onDataRequestCleanup(){this.dataReq=this.dataRes=null}onData(data){debug$5('received "%s"',data);const callback=packet=>{if("close"===packet.type)return debug$5("got xhr close packet"),this.onClose(),!1;this.onPacket(packet)};3===this.protocol?this.parser.decodePayload(data,callback):this.parser.decodePayload(data).forEach(callback)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(packets){this.writable=!1,this.shouldClose&&(debug$5("appending close packet to payload"),packets.push({type:"close"}),this.shouldClose(),this.shouldClose=null);const doWrite=data=>{const compress=packets.some((packet=>packet.options&&packet.options.compress));this.write(data,{compress:compress})};3===this.protocol?this.parser.encodePayload(packets,this.supportsBinary,doWrite):this.parser.encodePayload(packets,doWrite)}write(data,options){debug$5('writing "%s"',data),this.doWrite(data,options,(()=>{this.req.cleanup()}))}doWrite(data,options,callback){const isString="string"==typeof data,headers={"Content-Type":isString?"text/plain; charset=UTF-8":"application/octet-stream"},respond=data=>{this.headers(this.req,headers),this.res.cork((()=>{Object.keys(headers).forEach((key=>{this.res.writeHeader(key,String(headers[key]))})),this.res.end(data)})),callback()};if(!this.httpCompression||!options.compress)return void respond(data);if((isString?Buffer.byteLength(data):data.length)<this.httpCompression.threshold)return void respond(data);const encoding=accepts(this.req).encodings(["gzip","deflate"]);encoding?this.compress(data,encoding,((err,data)=>{if(err)return this.res.writeStatus("500 Internal Server Error"),this.res.end(),void callback(err);headers["Content-Encoding"]=encoding,respond(data)})):respond(data)}compress(data,encoding,callback){debug$5("compressing");const buffers=[];let nread=0;compressionMethods[encoding](this.httpCompression).on("error",callback).on("data",(function(chunk){buffers.push(chunk),nread+=chunk.length})).on("end",(function(){callback(null,Buffer.concat(buffers,nread))})).end(data)}doClose(fn){let closeTimeoutTimer;debug$5("closing");const onClose=()=>{clearTimeout(closeTimeoutTimer),fn(),this.onClose()};this.writable?(debug$5("transport writable - closing right away"),this.send([{type:"close"}]),onClose()):this.discarded?(debug$5("transport discarded - closing right away"),onClose()):(debug$5("transport not writable - buffering orderly close"),this.shouldClose=onClose,closeTimeoutTimer=setTimeout(onClose,this.closeTimeout))}headers(req,headers){headers=headers||{};const ua=req.headers["user-agent"];return ua&&(~ua.indexOf(";MSIE")||~ua.indexOf("Trident/"))&&(headers["X-XSS-Protection"]="0"),headers["cache-control"]="no-store",this.emit("headers",headers,req),headers}}polling.Polling=Polling;var websocket={};Object.defineProperty(websocket,"__esModule",{value:!0}),websocket.WebSocket=void 0;const transport_1=transport,debug$4=(0,srcExports.default)("engine:ws");let WebSocket$1=class extends transport_1.Transport{constructor(req){super(req),this.writable=!1,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}get supportsFraming(){return!0}send(packets){this.writable=!1;for(let i=0;i<packets.length;i++){const packet=packets[i],isLast=i+1===packets.length,send=data=>{const isBinary="string"!=typeof data,compress=this.perMessageDeflate&&Buffer.byteLength(data)>this.perMessageDeflate.threshold;debug$4('writing "%s"',data),this.socket.send(data,isBinary,compress),isLast&&(this.writable=!0,this.emit("drain"))};packet.options&&"string"==typeof packet.options.wsPreEncoded?send(packet.options.wsPreEncoded):this.parser.encodePacket(packet,this.supportsBinary,send)}}doClose(fn){debug$4("closing"),fn&&fn(),this.socket.end()}};websocket.WebSocket=WebSocket$1,Object.defineProperty(transportsUws,"__esModule",{value:!0});const polling_1=polling,websocket_1=websocket;transportsUws.default={polling:polling_1.Polling,websocket:websocket_1.WebSocket},Object.defineProperty(userver,"__esModule",{value:!0}),userver.uServer=void 0;const server_1=server,transports_uws_1=transportsUws,debug$3=(0,srcExports.default)("engine:uws");class uServer extends server_1.BaseServer{init(){}cleanup(){}prepare(req,res){req.method=req.getMethod().toUpperCase(),req.url=req.getUrl();const params=new URLSearchParams(req.getQuery());req._query=Object.fromEntries(params.entries()),req.headers={},req.forEach(((key,value)=>{req.headers[key]=value})),req.connection={remoteAddress:Buffer.from(res.getRemoteAddressAsText()).toString()},res.onAborted((()=>{debug$3("response has been aborted")}))}createTransport(transportName,req){return new transports_uws_1.default[transportName](req)}attach(app,options={}){const path=this._computePath(options);app.any(path,this.handleRequest.bind(this)).ws(path,{compression:options.compression,idleTimeout:options.idleTimeout,maxBackpressure:options.maxBackpressure,maxPayloadLength:this.opts.maxHttpBufferSize,upgrade:this.handleUpgrade.bind(this),open:ws=>{const transport=ws.getUserData().transport;transport.socket=ws,transport.writable=!0,transport.emit("drain")},message:(ws,message,isBinary)=>{ws.getUserData().transport.onData(isBinary?message:Buffer.from(message).toString())},close:(ws,code,message)=>{ws.getUserData().transport.onClose(code,message)}})}_applyMiddlewares(req,res,callback){if(0===this.middlewares.length)return callback();req.res=new ResponseWrapper(res),super._applyMiddlewares(req,req.res,(err=>{req.res.writeHead(),callback(err)}))}handleRequest(res,req){debug$3('handling "%s" http request "%s"',req.getMethod(),req.getUrl()),this.prepare(req,res),req.res=res;const callback=(errorCode,errorContext)=>{if(void 0!==errorCode)return this.emit("connection_error",{req:req,code:errorCode,message:server_1.Server.errorMessages[errorCode],context:errorContext}),void this.abortRequest(req.res,errorCode,errorContext);if(req._query.sid)debug$3("setting new request for existing client"),this.clients[req._query.sid].transport.onRequest(req);else{const closeConnection=(errorCode,errorContext)=>this.abortRequest(res,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}};this._applyMiddlewares(req,res,(err=>{err?callback(server_1.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(req,!1,callback)}))}handleUpgrade(res,req,context){debug$3("on upgrade"),this.prepare(req,res),req.res=res;const callback=async(errorCode,errorContext)=>{if(void 0!==errorCode)return this.emit("connection_error",{req:req,code:errorCode,message:server_1.Server.errorMessages[errorCode],context:errorContext}),void this.abortRequest(res,errorCode,errorContext);const id=req._query.sid;let transport;if(id){const client=this.clients[id];client?client.upgrading?(debug$3("transport has already been trying to upgrade"),res.close()):client.upgraded?(debug$3("transport had already been upgraded"),res.close()):(debug$3("upgrading existing transport"),transport=this.createTransport(req._query.transport,req),client.maybeUpgrade(transport)):(debug$3("upgrade attempt for closed client"),res.close())}else if(transport=await this.handshake(req._query.transport,req,((errorCode,errorContext)=>this.abortRequest(res,errorCode,errorContext))),!transport)return;req.res.writeStatus("101 Switching Protocols"),res.upgrade({transport:transport},req.getHeader("sec-websocket-key"),req.getHeader("sec-websocket-protocol"),req.getHeader("sec-websocket-extensions"),context)};this._applyMiddlewares(req,res,(err=>{err?callback(server_1.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(req,!0,callback)}))}abortRequest(res,errorCode,errorContext){const statusCode=errorCode===server_1.Server.errors.FORBIDDEN?"403 Forbidden":"400 Bad Request",message=errorContext&&errorContext.message?errorContext.message:server_1.Server.errorMessages[errorCode];res.writeStatus(statusCode),res.writeHeader("Content-Type","application/json"),res.end(JSON.stringify({code:errorCode,message:message}))}}userver.uServer=uServer;class ResponseWrapper{constructor(res){this.res=res,this.statusWritten=!1,this.headers=[],this.isAborted=!1}set statusCode(status){status&&this.writeStatus(200===status?"200 OK":"204 No Content")}writeHead(status){this.statusCode=status}setHeader(key,value){Array.isArray(value)?value.forEach((val=>{this.writeHeader(key,val)})):this.writeHeader(key,value)}removeHeader(){}getHeader(){}writeStatus(status){if(!this.isAborted)return this.res.writeStatus(status),this.statusWritten=!0,this.writeBufferedHeaders(),this}writeHeader(key,value){this.isAborted||"Content-Length"!==key&&(this.statusWritten?this.res.writeHeader(key,value):this.headers.push([key,value]))}writeBufferedHeaders(){this.headers.forEach((([key,value])=>{this.res.writeHeader(key,value)}))}end(data){this.isAborted||this.res.cork((()=>{this.statusWritten||this.writeBufferedHeaders(),this.res.end(data)}))}onData(fn){this.isAborted||this.res.onData(fn)}onAborted(fn){this.isAborted||this.res.onAborted((()=>{this.isAborted=!0,fn()}))}cork(fn){this.isAborted||this.res.cork(fn)}}!function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.protocol=exports.Transport=exports.Socket=exports.uServer=exports.parser=exports.attach=exports.listen=exports.transports=exports.Server=void 0;const http_1=require$$0$9,server_1=server;Object.defineProperty(exports,"Server",{enumerable:!0,get:function(){return server_1.Server}});const index_1=transports;exports.transports=index_1.default;const parser=cjs$1;exports.parser=parser;var userver_1=userver;Object.defineProperty(exports,"uServer",{enumerable:!0,get:function(){return userver_1.uServer}});var socket_1=socket$1;Object.defineProperty(exports,"Socket",{enumerable:!0,get:function(){return socket_1.Socket}});var transport_1=transport;function attach(server,options){const engine=new server_1.Server(options);return engine.attach(server,options),engine}Object.defineProperty(exports,"Transport",{enumerable:!0,get:function(){return transport_1.Transport}}),exports.protocol=parser.protocol,exports.listen=function(port,options,fn){"function"==typeof options&&(fn=options,options={});const server=(0,http_1.createServer)((function(req,res){res.writeHead(501),res.end("Not Implemented")})),engine=attach(server,options);return engine.httpServer=server,server.listen(port,fn),engine},exports.attach=attach}(engine_io);var client={},cjs={};function Emitter(obj){if(obj)return function(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}(obj)}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return 0===callbacks.length&&delete this._callbacks["$"+event],this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};for(var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event],i=1;i<arguments.length;i++)args[i-1]=arguments[i];if(callbacks){i=0;for(var len=(callbacks=callbacks.slice(0)).length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.emitReserved=Emitter.prototype.emit,Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length};var require$$0=getAugmentedNamespace(Object.freeze({__proto__:null,Emitter:Emitter})),binary={},isBinary$1={};Object.defineProperty(isBinary$1,"__esModule",{value:!0}),isBinary$1.hasBinary=isBinary$1.isBinary=void 0;const withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=obj=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(obj):obj.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString.call(File);function isBinary(obj){return withNativeArrayBuffer&&(obj instanceof ArrayBuffer||isView(obj))||withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File}isBinary$1.isBinary=isBinary,isBinary$1.hasBinary=function hasBinary(obj,toJSON){if(!obj||"object"!=typeof obj)return!1;if(Array.isArray(obj)){for(let i=0,l=obj.length;i<l;i++)if(hasBinary(obj[i]))return!0;return!1}if(isBinary(obj))return!0;if(obj.toJSON&&"function"==typeof obj.toJSON&&1===arguments.length)return hasBinary(obj.toJSON(),!0);for(const key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&hasBinary(obj[key]))return!0;return!1},Object.defineProperty(binary,"__esModule",{value:!0}),binary.reconstructPacket=binary.deconstructPacket=void 0;const is_binary_js_1=isBinary$1;function _deconstructPacket(data,buffers){if(!data)return data;if((0,is_binary_js_1.isBinary)(data)){const placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(Array.isArray(data)){const newData=new Array(data.length);for(let i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i],buffers);return newData}if("object"==typeof data&&!(data instanceof Date)){const newData={};for(const key in data)Object.prototype.hasOwnProperty.call(data,key)&&(newData[key]=_deconstructPacket(data[key],buffers));return newData}return data}function _reconstructPacket(data,buffers){if(!data)return data;if(data&&!0===data._placeholder){if("number"==typeof data.num&&data.num>=0&&data.num<buffers.length)return buffers[data.num];throw new Error("illegal attachments")}if(Array.isArray(data))for(let i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i],buffers);else if("object"==typeof data)for(const key in data)Object.prototype.hasOwnProperty.call(data,key)&&(data[key]=_reconstructPacket(data[key],buffers));return data}binary.deconstructPacket=function(packet){const buffers=[],packetData=packet.data,pack=packet;return pack.data=_deconstructPacket(packetData,buffers),pack.attachments=buffers.length,{packet:pack,buffers:buffers}},binary.reconstructPacket=function(packet,buffers){return packet.data=_reconstructPacket(packet.data,buffers),delete packet.attachments,packet},function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Decoder=exports.Encoder=exports.PacketType=exports.protocol=void 0;const component_emitter_1=require$$0,binary_js_1=binary,is_binary_js_1=isBinary$1,debug=(0,srcExports.default)("socket.io-parser"),RESERVED_EVENTS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var PacketType;exports.protocol=5,function(PacketType){PacketType[PacketType.CONNECT=0]="CONNECT",PacketType[PacketType.DISCONNECT=1]="DISCONNECT",PacketType[PacketType.EVENT=2]="EVENT",PacketType[PacketType.ACK=3]="ACK",PacketType[PacketType.CONNECT_ERROR=4]="CONNECT_ERROR",PacketType[PacketType.BINARY_EVENT=5]="BINARY_EVENT",PacketType[PacketType.BINARY_ACK=6]="BINARY_ACK"}(PacketType=exports.PacketType||(exports.PacketType={}));function isObject(value){return"[object Object]"===Object.prototype.toString.call(value)}exports.Encoder=class{constructor(replacer){this.replacer=replacer}encode(obj){return debug("encoding packet %j",obj),obj.type!==PacketType.EVENT&&obj.type!==PacketType.ACK||!(0,is_binary_js_1.hasBinary)(obj)?[this.encodeAsString(obj)]:this.encodeAsBinary({type:obj.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:obj.nsp,data:obj.data,id:obj.id})}encodeAsString(obj){let str=""+obj.type;return obj.type!==PacketType.BINARY_EVENT&&obj.type!==PacketType.BINARY_ACK||(str+=obj.attachments+"-"),obj.nsp&&"/"!==obj.nsp&&(str+=obj.nsp+","),null!=obj.id&&(str+=obj.id),null!=obj.data&&(str+=JSON.stringify(obj.data,this.replacer)),debug("encoded %j as %s",obj,str),str}encodeAsBinary(obj){const deconstruction=(0,binary_js_1.deconstructPacket)(obj),pack=this.encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;return buffers.unshift(pack),buffers}};class Decoder extends component_emitter_1.Emitter{constructor(reviver){super(),this.reviver=reviver}add(obj){let packet;if("string"==typeof obj){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");packet=this.decodeString(obj);const isBinaryEvent=packet.type===PacketType.BINARY_EVENT;isBinaryEvent||packet.type===PacketType.BINARY_ACK?(packet.type=isBinaryEvent?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(packet),0===packet.attachments&&super.emitReserved("decoded",packet)):super.emitReserved("decoded",packet)}else{if(!(0,is_binary_js_1.isBinary)(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");packet=this.reconstructor.takeBinaryData(obj),packet&&(this.reconstructor=null,super.emitReserved("decoded",packet))}}decodeString(str){let i=0;const p={type:Number(str.charAt(0))};if(void 0===PacketType[p.type])throw new Error("unknown packet type "+p.type);if(p.type===PacketType.BINARY_EVENT||p.type===PacketType.BINARY_ACK){const start=i+1;for(;"-"!==str.charAt(++i)&&i!=str.length;);const buf=str.substring(start,i);if(buf!=Number(buf)||"-"!==str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"===str.charAt(i+1)){const start=i+1;for(;++i;){if(","===str.charAt(i))break;if(i===str.length)break}p.nsp=str.substring(start,i)}else p.nsp="/";const next=str.charAt(i+1);if(""!==next&&Number(next)==next){const start=i+1;for(;++i;){const c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(i===str.length)break}p.id=Number(str.substring(start,i+1))}if(str.charAt(++i)){const payload=this.tryParse(str.substr(i));if(!Decoder.isPayloadValid(p.type,payload))throw new Error("invalid payload");p.data=payload}return debug("decoded %s as %j",str,p),p}tryParse(str){try{return JSON.parse(str,this.reviver)}catch(e){return!1}}static isPayloadValid(type,payload){switch(type){case PacketType.CONNECT:return isObject(payload);case PacketType.DISCONNECT:return void 0===payload;case PacketType.CONNECT_ERROR:return"string"==typeof payload||isObject(payload);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(payload)&&("number"==typeof payload[0]||"string"==typeof payload[0]&&-1===RESERVED_EVENTS.indexOf(payload[0]));case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(payload)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}exports.Decoder=Decoder;class BinaryReconstructor{constructor(packet){this.packet=packet,this.buffers=[],this.reconPack=packet}takeBinaryData(binData){if(this.buffers.push(binData),this.buffers.length===this.reconPack.attachments){const packet=(0,binary_js_1.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),packet}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}}(cjs),Object.defineProperty(client,"__esModule",{value:!0}),client.Client=void 0;const socket_io_parser_1=cjs,url=require$$7,debug$2=srcExports("socket.io:client");client.Client=class{constructor(server,conn){this.sockets=new Map,this.nsps=new Map,this.server=server,this.conn=conn,this.encoder=server.encoder,this.decoder=new server._parser.Decoder,this.id=conn.id,this.setup()}get request(){return this.conn.request}setup(){this.onclose=this.onclose.bind(this),this.ondata=this.ondata.bind(this),this.onerror=this.onerror.bind(this),this.ondecoded=this.ondecoded.bind(this),this.decoder.on("decoded",this.ondecoded),this.conn.on("data",this.ondata),this.conn.on("error",this.onerror),this.conn.on("close",this.onclose),this.connectTimeout=setTimeout((()=>{0===this.nsps.size?(debug$2("no namespace joined yet, close the client"),this.close()):debug$2("the client has already joined a namespace, nothing to do")}),this.server._connectTimeout)}connect(name,auth={}){if(this.server._nsps.has(name))return debug$2("connecting to namespace %s",name),this.doConnect(name,auth);this.server._checkNamespace(name,auth,(dynamicNspName=>{dynamicNspName?this.doConnect(name,auth):(debug$2("creation of namespace %s was denied",name),this._packet({type:socket_io_parser_1.PacketType.CONNECT_ERROR,nsp:name,data:{message:"Invalid namespace"}}))}))}doConnect(name,auth){const nsp=this.server.of(name);nsp._add(this,auth,(socket=>{this.sockets.set(socket.id,socket),this.nsps.set(nsp.name,socket),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)}))}_disconnect(){for(const socket of this.sockets.values())socket.disconnect();this.sockets.clear(),this.close()}_remove(socket){if(this.sockets.has(socket.id)){const nsp=this.sockets.get(socket.id).nsp.name;this.sockets.delete(socket.id),this.nsps.delete(nsp)}else debug$2("ignoring remove for %s",socket.id)}close(){"open"===this.conn.readyState&&(debug$2("forcing transport close"),this.conn.close(),this.onclose("forced server close"))}_packet(packet,opts={}){if("open"!==this.conn.readyState)return void debug$2("ignoring packet write %j",packet);const encodedPackets=opts.preEncoded?packet:this.encoder.encode(packet);this.writeToEngine(encodedPackets,opts)}writeToEngine(encodedPackets,opts){if(opts.volatile&&!this.conn.transport.writable)return void debug$2("volatile packet is discarded since the transport is not currently writable");const packets=Array.isArray(encodedPackets)?encodedPackets:[encodedPackets];for(const encodedPacket of packets)this.conn.write(encodedPacket,opts)}ondata(data){try{this.decoder.add(data)}catch(e){debug$2("invalid packet format"),this.onerror(e)}}ondecoded(packet){let namespace,authPayload;if(3===this.conn.protocol){const parsed=url.parse(packet.nsp,!0);namespace=parsed.pathname,authPayload=parsed.query}else namespace=packet.nsp,authPayload=packet.data;const socket=this.nsps.get(namespace);socket||packet.type!==socket_io_parser_1.PacketType.CONNECT?socket&&packet.type!==socket_io_parser_1.PacketType.CONNECT&&packet.type!==socket_io_parser_1.PacketType.CONNECT_ERROR?process.nextTick((function(){socket._onpacket(packet)})):(debug$2("invalid state (packet type: %s)",packet.type),this.close()):this.connect(namespace,authPayload)}onerror(err){for(const socket of this.sockets.values())socket._onerror(err);this.conn.close()}onclose(reason,description){debug$2("client close with reason %s",reason),this.destroy();for(const socket of this.sockets.values())socket._onclose(reason,description);this.sockets.clear(),this.decoder.destroy()}destroy(){this.conn.removeListener("data",this.ondata),this.conn.removeListener("error",this.onerror),this.conn.removeListener("close",this.onclose),this.decoder.removeListener("decoded",this.ondecoded),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)}};var namespace={},socket={},typedEvents={};Object.defineProperty(typedEvents,"__esModule",{value:!0}),typedEvents.StrictEventEmitter=void 0;const events_1$1=require$$0$6;class StrictEventEmitter extends events_1$1.EventEmitter{on(ev,listener){return super.on(ev,listener)}once(ev,listener){return super.once(ev,listener)}emit(ev,...args){return super.emit(ev,...args)}emitReserved(ev,...args){return super.emit(ev,...args)}emitUntyped(ev,...args){return super.emit(ev,...args)}listeners(event){return super.listeners(event)}}typedEvents.StrictEventEmitter=StrictEventEmitter;var hasRequiredBroadcastOperator,hasRequiredSocket,broadcastOperator={};function requireBroadcastOperator(){if(hasRequiredBroadcastOperator)return broadcastOperator;hasRequiredBroadcastOperator=1,Object.defineProperty(broadcastOperator,"__esModule",{value:!0}),broadcastOperator.RemoteSocket=broadcastOperator.BroadcastOperator=void 0;const socket_1=requireSocket(),socket_io_parser_1=cjs;class BroadcastOperator{constructor(adapter,rooms=new Set,exceptRooms=new Set,flags={}){this.adapter=adapter,this.rooms=rooms,this.exceptRooms=exceptRooms,this.flags=flags}to(room){const rooms=new Set(this.rooms);return Array.isArray(room)?room.forEach((r=>rooms.add(r))):rooms.add(room),new BroadcastOperator(this.adapter,rooms,this.exceptRooms,this.flags)}in(room){return this.to(room)}except(room){const exceptRooms=new Set(this.exceptRooms);return Array.isArray(room)?room.forEach((r=>exceptRooms.add(r))):exceptRooms.add(room),new BroadcastOperator(this.adapter,this.rooms,exceptRooms,this.flags)}compress(compress){const flags=Object.assign({},this.flags,{compress:compress});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}get volatile(){const flags=Object.assign({},this.flags,{volatile:!0});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}get local(){const flags=Object.assign({},this.flags,{local:!0});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}timeout(timeout){const flags=Object.assign({},this.flags,{timeout:timeout});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}emit(ev,...args){if(socket_1.RESERVED_EVENTS.has(ev))throw new Error(`"${String(ev)}" is a reserved event name`);const data=[ev,...args],packet={type:socket_io_parser_1.PacketType.EVENT,data:data};if(!("function"==typeof data[data.length-1]))return this.adapter.broadcast(packet,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags}),!0;const ack=data.pop();let timedOut=!1,responses=[];const timer=setTimeout((()=>{timedOut=!0,ack.apply(this,[new Error("operation has timed out"),this.flags.expectSingleResponse?null:responses])}),this.flags.timeout);let expectedServerCount=-1,actualServerCount=0,expectedClientCount=0;const checkCompleteness=()=>{timedOut||expectedServerCount!==actualServerCount||responses.length!==expectedClientCount||(clearTimeout(timer),ack.apply(this,[null,this.flags.expectSingleResponse?responses[0]:responses]))};return this.adapter.broadcastWithAck(packet,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags},(clientCount=>{expectedClientCount+=clientCount,actualServerCount++,checkCompleteness()}),(clientResponse=>{responses.push(clientResponse),checkCompleteness()})),this.adapter.serverCount().then((serverCount=>{expectedServerCount=serverCount,checkCompleteness()})),!0}emitWithAck(ev,...args){return new Promise(((resolve,reject)=>{args.push(((err,responses)=>err?(err.responses=responses,reject(err)):resolve(responses))),this.emit(ev,...args)}))}allSockets(){if(!this.adapter)throw new Error("No adapter for this namespace, are you trying to get the list of clients of a dynamic namespace?");return this.adapter.sockets(this.rooms)}fetchSockets(){return this.adapter.fetchSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags}).then((sockets=>sockets.map((socket=>socket instanceof socket_1.Socket?socket:new RemoteSocket(this.adapter,socket)))))}socketsJoin(room){this.adapter.addSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(room)?room:[room])}socketsLeave(room){this.adapter.delSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(room)?room:[room])}disconnectSockets(close=!1){this.adapter.disconnectSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},close)}}broadcastOperator.BroadcastOperator=BroadcastOperator;class RemoteSocket{constructor(adapter,details){this.id=details.id,this.handshake=details.handshake,this.rooms=new Set(details.rooms),this.data=details.data,this.operator=new BroadcastOperator(adapter,new Set([this.id]),new Set,{expectSingleResponse:!0})}timeout(timeout){return this.operator.timeout(timeout)}emit(ev,...args){return this.operator.emit(ev,...args)}join(room){return this.operator.socketsJoin(room)}leave(room){return this.operator.socketsLeave(room)}disconnect(close=!1){return this.operator.disconnectSockets(close),this}}return broadcastOperator.RemoteSocket=RemoteSocket,broadcastOperator}function requireSocket(){return hasRequiredSocket||(hasRequiredSocket=1,function(exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Socket=exports.RESERVED_EVENTS=void 0;const socket_io_parser_1=cjs,debug_1=__importDefault(srcExports),typed_events_1=typedEvents,base64id_1=__importDefault(base64idExports),broadcast_operator_1=requireBroadcastOperator(),debug=(0,debug_1.default)("socket.io:socket"),RECOVERABLE_DISCONNECT_REASONS=new Set(["transport error","transport close","forced close","ping timeout","server shutting down","forced server close"]);function noop(){}exports.RESERVED_EVENTS=new Set(["connect","connect_error","disconnect","disconnecting","newListener","removeListener"]);class Socket extends typed_events_1.StrictEventEmitter{constructor(nsp,client,auth,previousSession){super(),this.nsp=nsp,this.client=client,this.recovered=!1,this.data={},this.connected=!1,this.acks=new Map,this.fns=[],this.flags={},this.server=nsp.server,this.adapter=this.nsp.adapter,previousSession?(this.id=previousSession.sid,this.pid=previousSession.pid,previousSession.rooms.forEach((room=>this.join(room))),this.data=previousSession.data,previousSession.missedPackets.forEach((packet=>{this.packet({type:socket_io_parser_1.PacketType.EVENT,data:packet})})),this.recovered=!0):(3===client.conn.protocol?this.id="/"!==nsp.name?nsp.name+"#"+client.id:client.id:this.id=base64id_1.default.generateId(),this.server._opts.connectionStateRecovery&&(this.pid=base64id_1.default.generateId())),this.handshake=this.buildHandshake(auth),this.on("error",noop)}buildHandshake(auth){var _a,_b,_c,_d;return{headers:(null===(_a=this.request)||void 0===_a?void 0:_a.headers)||{},time:new Date+"",address:this.conn.remoteAddress,xdomain:!!(null===(_b=this.request)||void 0===_b?void 0:_b.headers.origin),secure:!this.request||!!this.request.connection.encrypted,issued:+new Date,url:null===(_c=this.request)||void 0===_c?void 0:_c.url,query:(null===(_d=this.request)||void 0===_d?void 0:_d._query)||{},auth:auth}}emit(ev,...args){if(exports.RESERVED_EVENTS.has(ev))throw new Error(`"${String(ev)}" is a reserved event name`);const data=[ev,...args],packet={type:socket_io_parser_1.PacketType.EVENT,data:data};if("function"==typeof data[data.length-1]){const id=this.nsp._ids++;debug("emitting packet with ack id %d",id),this.registerAckCallback(id,data.pop()),packet.id=id}const flags=Object.assign({},this.flags);return this.flags={},this.nsp.server.opts.connectionStateRecovery?this.adapter.broadcast(packet,{rooms:new Set([this.id]),except:new Set,flags:flags}):(this.notifyOutgoingListeners(packet),this.packet(packet,flags)),!0}emitWithAck(ev,...args){const withErr=void 0!==this.flags.timeout;return new Promise(((resolve,reject)=>{args.push(((arg1,arg2)=>withErr?arg1?reject(arg1):resolve(arg2):resolve(arg1))),this.emit(ev,...args)}))}registerAckCallback(id,ack){const timeout=this.flags.timeout;if(void 0===timeout)return void this.acks.set(id,ack);const timer=setTimeout((()=>{debug("event with ack id %d has timed out after %d ms",id,timeout),this.acks.delete(id),ack.call(this,new Error("operation has timed out"))}),timeout);this.acks.set(id,((...args)=>{clearTimeout(timer),ack.apply(this,[null,...args])}))}to(room){return this.newBroadcastOperator().to(room)}in(room){return this.newBroadcastOperator().in(room)}except(room){return this.newBroadcastOperator().except(room)}send(...args){return this.emit("message",...args),this}write(...args){return this.emit("message",...args),this}packet(packet,opts={}){packet.nsp=this.nsp.name,opts.compress=!1!==opts.compress,this.client._packet(packet,opts)}join(rooms){return debug("join room %s",rooms),this.adapter.addAll(this.id,new Set(Array.isArray(rooms)?rooms:[rooms]))}leave(room){return debug("leave room %s",room),this.adapter.del(this.id,room)}leaveAll(){this.adapter.delAll(this.id)}_onconnect(){debug("socket connected - writing packet"),this.connected=!0,this.join(this.id),3===this.conn.protocol?this.packet({type:socket_io_parser_1.PacketType.CONNECT}):this.packet({type:socket_io_parser_1.PacketType.CONNECT,data:{sid:this.id,pid:this.pid}})}_onpacket(packet){switch(debug("got packet %j",packet),packet.type){case socket_io_parser_1.PacketType.EVENT:case socket_io_parser_1.PacketType.BINARY_EVENT:this.onevent(packet);break;case socket_io_parser_1.PacketType.ACK:case socket_io_parser_1.PacketType.BINARY_ACK:this.onack(packet);break;case socket_io_parser_1.PacketType.DISCONNECT:this.ondisconnect()}}onevent(packet){const args=packet.data||[];if(debug("emitting event %j",args),null!=packet.id&&(debug("attaching ack callback to event"),args.push(this.ack(packet.id))),this._anyListeners&&this._anyListeners.length){const listeners=this._anyListeners.slice();for(const listener of listeners)listener.apply(this,args)}this.dispatch(args)}ack(id){const self=this;let sent=!1;return function(){if(sent)return;const args=Array.prototype.slice.call(arguments);debug("sending ack %j",args),self.packet({id:id,type:socket_io_parser_1.PacketType.ACK,data:args}),sent=!0}}onack(packet){const ack=this.acks.get(packet.id);"function"==typeof ack?(debug("calling ack %s with %j",packet.id,packet.data),ack.apply(this,packet.data),this.acks.delete(packet.id)):debug("bad ack %s",packet.id)}ondisconnect(){debug("got disconnect packet"),this._onclose("client namespace disconnect")}_onerror(err){this.emitReserved("error",err)}_onclose(reason,description){if(!this.connected)return this;debug("closing socket - reason %s",reason),this.emitReserved("disconnecting",reason,description),this.server._opts.connectionStateRecovery&&RECOVERABLE_DISCONNECT_REASONS.has(reason)&&(debug("connection state recovery is enabled for sid %s",this.id),this.adapter.persistSession({sid:this.id,pid:this.pid,rooms:[...this.rooms],data:this.data})),this._cleanup(),this.client._remove(this),this.connected=!1,this.emitReserved("disconnect",reason,description)}_cleanup(){this.leaveAll(),this.nsp._remove(this),this.join=noop}_error(err){this.packet({type:socket_io_parser_1.PacketType.CONNECT_ERROR,data:err})}disconnect(close=!1){return this.connected?(close?this.client._disconnect():(this.packet({type:socket_io_parser_1.PacketType.DISCONNECT}),this._onclose("server namespace disconnect")),this):this}compress(compress){return this.flags.compress=compress,this}get volatile(){return this.flags.volatile=!0,this}get broadcast(){return this.newBroadcastOperator()}get local(){return this.newBroadcastOperator().local}timeout(timeout){return this.flags.timeout=timeout,this}dispatch(event){debug("dispatching an event %j",event),this.run(event,(err=>{process.nextTick((()=>{if(err)return this._onerror(err);this.connected?super.emitUntyped.apply(this,event):debug("ignore packet received after disconnection")}))}))}use(fn){return this.fns.push(fn),this}run(event,fn){const fns=this.fns.slice(0);if(!fns.length)return fn(null);!function run(i){fns[i](event,(function(err){return err?fn(err):fns[i+1]?void run(i+1):fn(null)}))}(0)}get disconnected(){return!this.connected}get request(){return this.client.request}get conn(){return this.client.conn}get rooms(){return this.adapter.socketRooms(this.id)||new Set}onAny(listener){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(listener),this}prependAny(listener){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(listener),this}offAny(listener){if(!this._anyListeners)return this;if(listener){const listeners=this._anyListeners;for(let i=0;i<listeners.length;i++)if(listener===listeners[i])return listeners.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(listener){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(listener),this}prependAnyOutgoing(listener){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(listener),this}offAnyOutgoing(listener){if(!this._anyOutgoingListeners)return this;if(listener){const listeners=this._anyOutgoingListeners;for(let i=0;i<listeners.length;i++)if(listener===listeners[i])return listeners.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(packet){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const listeners=this._anyOutgoingListeners.slice();for(const listener of listeners)listener.apply(this,packet.data)}}newBroadcastOperator(){const flags=Object.assign({},this.flags);return this.flags={},new broadcast_operator_1.BroadcastOperator(this.adapter,new Set,new Set([this.id]),flags)}}exports.Socket=Socket}(socket)),socket}!function(exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Namespace=exports.RESERVED_EVENTS=void 0;const socket_1=requireSocket(),typed_events_1=typedEvents,debug_1=__importDefault(srcExports),broadcast_operator_1=requireBroadcastOperator(),debug=(0,debug_1.default)("socket.io:namespace");exports.RESERVED_EVENTS=new Set(["connect","connection","new_namespace"]);class Namespace extends typed_events_1.StrictEventEmitter{constructor(server,name){super(),this.sockets=new Map,this._fns=[],this._ids=0,this.server=server,this.name=name,this._initAdapter()}_initAdapter(){this.adapter=new(this.server.adapter())(this)}use(fn){return this._fns.push(fn),this}run(socket,fn){const fns=this._fns.slice(0);if(!fns.length)return fn(null);!function run(i){fns[i](socket,(function(err){return err?fn(err):fns[i+1]?void run(i+1):fn(null)}))}(0)}to(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).to(room)}in(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).in(room)}except(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).except(room)}async _add(client,auth,fn){var _a;debug("adding socket to nsp %s",this.name);const socket=await this._createSocket(client,auth);if((null===(_a=this.server.opts.connectionStateRecovery)||void 0===_a?void 0:_a.skipMiddlewares)&&socket.recovered&&"open"===client.conn.readyState)return this._doConnect(socket,fn);this.run(socket,(err=>{process.nextTick((()=>"open"!==client.conn.readyState?(debug("next called after client was closed - ignoring socket"),void socket._cleanup()):err?(debug("middleware error, sending CONNECT_ERROR packet to the client"),socket._cleanup(),3===client.conn.protocol?socket._error(err.data||err.message):socket._error({message:err.message,data:err.data})):void this._doConnect(socket,fn)))}))}async _createSocket(client,auth){const sessionId=auth.pid,offset=auth.offset;if(this.server.opts.connectionStateRecovery&&"string"==typeof sessionId&&"string"==typeof offset){let session;try{session=await this.adapter.restoreSession(sessionId,offset)}catch(e){debug("error while restoring session: %s",e)}if(session)return debug("connection state recovered for sid %s",session.sid),new socket_1.Socket(this,client,auth,session)}return new socket_1.Socket(this,client,auth)}_doConnect(socket,fn){this.sockets.set(socket.id,socket),socket._onconnect(),fn&&fn(socket),this.emitReserved("connect",socket),this.emitReserved("connection",socket)}_remove(socket){this.sockets.has(socket.id)?this.sockets.delete(socket.id):debug("ignoring remove for %s",socket.id)}emit(ev,...args){return new broadcast_operator_1.BroadcastOperator(this.adapter).emit(ev,...args)}send(...args){return this.emit("message",...args),this}write(...args){return this.emit("message",...args),this}serverSideEmit(ev,...args){if(exports.RESERVED_EVENTS.has(ev))throw new Error(`"${String(ev)}" is a reserved event name`);return args.unshift(ev),this.adapter.serverSideEmit(args),!0}serverSideEmitWithAck(ev,...args){return new Promise(((resolve,reject)=>{args.push(((err,responses)=>err?(err.responses=responses,reject(err)):resolve(responses))),this.serverSideEmit(ev,...args)}))}_onServerSideEmit(args){super.emitUntyped.apply(this,args)}allSockets(){return new broadcast_operator_1.BroadcastOperator(this.adapter).allSockets()}compress(compress){return new broadcast_operator_1.BroadcastOperator(this.adapter).compress(compress)}get volatile(){return new broadcast_operator_1.BroadcastOperator(this.adapter).volatile}get local(){return new broadcast_operator_1.BroadcastOperator(this.adapter).local}timeout(timeout){return new broadcast_operator_1.BroadcastOperator(this.adapter).timeout(timeout)}fetchSockets(){return new broadcast_operator_1.BroadcastOperator(this.adapter).fetchSockets()}socketsJoin(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).socketsJoin(room)}socketsLeave(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).socketsLeave(room)}disconnectSockets(close=!1){return new broadcast_operator_1.BroadcastOperator(this.adapter).disconnectSockets(close)}}exports.Namespace=Namespace}(namespace);var parentNamespace={},dist={},inMemoryAdapter={},yeast$1={};Object.defineProperty(yeast$1,"__esModule",{value:!0}),yeast$1.yeast=yeast$1.decode=yeast$1.encode=void 0;const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let prev,seed=0,i=0;function encode(num){let encoded="";do{encoded=alphabet[num%length]+encoded,num=Math.floor(num/length)}while(num>0);return encoded}for(yeast$1.encode=encode,yeast$1.decode=function(str){let decoded=0;for(i=0;i<str.length;i++)decoded=decoded*length+map[str.charAt(i)];return decoded},yeast$1.yeast=function(){const now=encode(+new Date);return now!==prev?(seed=0,prev=now):now+"."+encode(seed++)};i<length;i++)map[alphabet[i]]=i;var _a;Object.defineProperty(inMemoryAdapter,"__esModule",{value:!0}),inMemoryAdapter.SessionAwareAdapter=inMemoryAdapter.Adapter=void 0;const events_1=require$$0$6,yeast_1=yeast$1,WebSocket=ws,canPreComputeFrame="function"==typeof(null===(_a=null==WebSocket?void 0:WebSocket.Sender)||void 0===_a?void 0:_a.frame);class Adapter extends events_1.EventEmitter{constructor(nsp){super(),this.nsp=nsp,this.rooms=new Map,this.sids=new Map,this.encoder=nsp.server.encoder}init(){}close(){}serverCount(){return Promise.resolve(1)}addAll(id,rooms){this.sids.has(id)||this.sids.set(id,new Set);for(const room of rooms)this.sids.get(id).add(room),this.rooms.has(room)||(this.rooms.set(room,new Set),this.emit("create-room",room)),this.rooms.get(room).has(id)||(this.rooms.get(room).add(id),this.emit("join-room",room,id))}del(id,room){this.sids.has(id)&&this.sids.get(id).delete(room),this._del(room,id)}_del(room,id){const _room=this.rooms.get(room);if(null!=_room){_room.delete(id)&&this.emit("leave-room",room,id),0===_room.size&&this.rooms.delete(room)&&this.emit("delete-room",room)}}delAll(id){if(this.sids.has(id)){for(const room of this.sids.get(id))this._del(room,id);this.sids.delete(id)}}broadcast(packet,opts){const flags=opts.flags||{},packetOpts={preEncoded:!0,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name;const encodedPackets=this._encode(packet,packetOpts);this.apply(opts,(socket=>{"function"==typeof socket.notifyOutgoingListeners&&socket.notifyOutgoingListeners(packet),socket.client.writeToEngine(encodedPackets,packetOpts)}))}broadcastWithAck(packet,opts,clientCountCallback,ack){const flags=opts.flags||{},packetOpts={preEncoded:!0,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name,packet.id=this.nsp._ids++;const encodedPackets=this._encode(packet,packetOpts);let clientCount=0;this.apply(opts,(socket=>{clientCount++,socket.acks.set(packet.id,ack),"function"==typeof socket.notifyOutgoingListeners&&socket.notifyOutgoingListeners(packet),socket.client.writeToEngine(encodedPackets,packetOpts)})),clientCountCallback(clientCount)}_encode(packet,packetOpts){const encodedPackets=this.encoder.encode(packet);if(canPreComputeFrame&&1===encodedPackets.length&&"string"==typeof encodedPackets[0]){const data=Buffer.from("4"+encodedPackets[0]);packetOpts.wsPreEncodedFrame=WebSocket.Sender.frame(data,{readOnly:!1,mask:!1,rsv1:!1,opcode:1,fin:!0})}return encodedPackets}sockets(rooms){const sids=new Set;return this.apply({rooms:rooms},(socket=>{sids.add(socket.id)})),Promise.resolve(sids)}socketRooms(id){return this.sids.get(id)}fetchSockets(opts){const sockets=[];return this.apply(opts,(socket=>{sockets.push(socket)})),Promise.resolve(sockets)}addSockets(opts,rooms){this.apply(opts,(socket=>{socket.join(rooms)}))}delSockets(opts,rooms){this.apply(opts,(socket=>{rooms.forEach((room=>socket.leave(room)))}))}disconnectSockets(opts,close){this.apply(opts,(socket=>{socket.disconnect(close)}))}apply(opts,callback){const rooms=opts.rooms,except=this.computeExceptSids(opts.except);if(rooms.size){const ids=new Set;for(const room of rooms)if(this.rooms.has(room))for(const id of this.rooms.get(room)){if(ids.has(id)||except.has(id))continue;const socket=this.nsp.sockets.get(id);socket&&(callback(socket),ids.add(id))}}else for(const[id]of this.sids){if(except.has(id))continue;const socket=this.nsp.sockets.get(id);socket&&callback(socket)}}computeExceptSids(exceptRooms){const exceptSids=new Set;if(exceptRooms&&exceptRooms.size>0)for(const room of exceptRooms)this.rooms.has(room)&&this.rooms.get(room).forEach((sid=>exceptSids.add(sid)));return exceptSids}serverSideEmit(packet){console.warn("this adapter does not support the serverSideEmit() functionality")}persistSession(session){}restoreSession(pid,offset){return null}}inMemoryAdapter.Adapter=Adapter;function shouldIncludePacket(sessionRooms,opts){const included=0===opts.rooms.size||sessionRooms.some((room=>opts.rooms.has(room))),notExcluded=sessionRooms.every((room=>!opts.except.has(room)));return included&&notExcluded}inMemoryAdapter.SessionAwareAdapter=class extends Adapter{constructor(nsp){super(nsp),this.nsp=nsp,this.sessions=new Map,this.packets=[],this.maxDisconnectionDuration=nsp.server.opts.connectionStateRecovery.maxDisconnectionDuration;const timer=setInterval((()=>{const threshold=Date.now()-this.maxDisconnectionDuration;this.sessions.forEach(((session,sessionId)=>{session.disconnectedAt<threshold&&this.sessions.delete(sessionId)}));for(let i=this.packets.length-1;i>=0;i--){if(this.packets[i].emittedAt<threshold){this.packets.splice(0,i+1);break}}}),6e4);timer.unref()}persistSession(session){session.disconnectedAt=Date.now(),this.sessions.set(session.pid,session)}restoreSession(pid,offset){const session=this.sessions.get(pid);if(!session)return null;if(session.disconnectedAt+this.maxDisconnectionDuration<Date.now())return this.sessions.delete(pid),null;const index=this.packets.findIndex((packet=>packet.id===offset));if(-1===index)return null;const missedPackets=[];for(let i=index+1;i<this.packets.length;i++){const packet=this.packets[i];shouldIncludePacket(session.rooms,packet.opts)&&missedPackets.push(packet.data)}return Promise.resolve(Object.assign(Object.assign({},session),{missedPackets:missedPackets}))}broadcast(packet,opts){var _a;const isEventPacket=2===packet.type,withoutAcknowledgement=void 0===packet.id,notVolatile=void 0===(null===(_a=opts.flags)||void 0===_a?void 0:_a.volatile);if(isEventPacket&&withoutAcknowledgement&&notVolatile){const id=(0,yeast_1.yeast)();packet.data.push(id),this.packets.push({id:id,opts:opts,data:packet.data,emittedAt:Date.now()})}super.broadcast(packet,opts)}};var clusterAdapter={};!function(exports){var __rest=commonjsGlobal&&commonjsGlobal.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClusterAdapterWithHeartbeat=exports.ClusterAdapter=exports.MessageType=void 0;const in_memory_adapter_1=inMemoryAdapter,crypto_1=require$$0$7,debug=(0,srcExports.debug)("socket.io-adapter");function randomId(){return(0,crypto_1.randomBytes)(8).toString("hex")}var MessageType;function encodeOptions(opts){return{rooms:[...opts.rooms],except:[...opts.except],flags:opts.flags}}function decodeOptions(opts){return{rooms:new Set(opts.rooms),except:new Set(opts.except),flags:opts.flags}}!function(MessageType){MessageType[MessageType.INITIAL_HEARTBEAT=1]="INITIAL_HEARTBEAT",MessageType[MessageType.HEARTBEAT=2]="HEARTBEAT",MessageType[MessageType.BROADCAST=3]="BROADCAST",MessageType[MessageType.SOCKETS_JOIN=4]="SOCKETS_JOIN",MessageType[MessageType.SOCKETS_LEAVE=5]="SOCKETS_LEAVE",MessageType[MessageType.DISCONNECT_SOCKETS=6]="DISCONNECT_SOCKETS",MessageType[MessageType.FETCH_SOCKETS=7]="FETCH_SOCKETS",MessageType[MessageType.FETCH_SOCKETS_RESPONSE=8]="FETCH_SOCKETS_RESPONSE",MessageType[MessageType.SERVER_SIDE_EMIT=9]="SERVER_SIDE_EMIT",MessageType[MessageType.SERVER_SIDE_EMIT_RESPONSE=10]="SERVER_SIDE_EMIT_RESPONSE",MessageType[MessageType.BROADCAST_CLIENT_COUNT=11]="BROADCAST_CLIENT_COUNT",MessageType[MessageType.BROADCAST_ACK=12]="BROADCAST_ACK",MessageType[MessageType.ADAPTER_CLOSE=13]="ADAPTER_CLOSE"}(MessageType=exports.MessageType||(exports.MessageType={}));class ClusterAdapter extends in_memory_adapter_1.Adapter{constructor(nsp){super(nsp),this.requests=new Map,this.ackRequests=new Map,this.uid=randomId()}onMessage(message,offset){if(message.uid===this.uid)return debug("[%s] ignore message from self",this.uid);switch(debug("[%s] new event of type %d from %s",this.uid,message.type,message.uid),message.type){case MessageType.BROADCAST:if(void 0!==message.data.requestId)super.broadcastWithAck(message.data.packet,decodeOptions(message.data.opts),(clientCount=>{debug("[%s] waiting for %d client acknowledgements",this.uid,clientCount),this.publishResponse(message.uid,{type:MessageType.BROADCAST_CLIENT_COUNT,data:{requestId:message.data.requestId,clientCount:clientCount}})}),(arg=>{debug("[%s] received acknowledgement with value %j",this.uid,arg),this.publishResponse(message.uid,{type:MessageType.BROADCAST_ACK,data:{requestId:message.data.requestId,packet:arg}})}));else{const packet=message.data.packet,opts=decodeOptions(message.data.opts);this.addOffsetIfNecessary(packet,opts,offset),super.broadcast(packet,opts)}break;case MessageType.SOCKETS_JOIN:super.addSockets(decodeOptions(message.data.opts),message.data.rooms);break;case MessageType.SOCKETS_LEAVE:super.delSockets(decodeOptions(message.data.opts),message.data.rooms);break;case MessageType.DISCONNECT_SOCKETS:super.disconnectSockets(decodeOptions(message.data.opts),message.data.close);break;case MessageType.FETCH_SOCKETS:debug("[%s] calling fetchSockets with opts %j",this.uid,message.data.opts),super.fetchSockets(decodeOptions(message.data.opts)).then((localSockets=>{this.publishResponse(message.uid,{type:MessageType.FETCH_SOCKETS_RESPONSE,data:{requestId:message.data.requestId,sockets:localSockets.map((socket=>{const _a=socket.handshake,handshake=__rest(_a,["sessionStore"]);return{id:socket.id,handshake:handshake,rooms:[...socket.rooms],data:socket.data}}))}})}));break;case MessageType.SERVER_SIDE_EMIT:{const packet=message.data.packet;if(!(void 0!==message.data.requestId))return void this.nsp._onServerSideEmit(packet);let called=!1;const callback=arg=>{called||(called=!0,debug("[%s] calling acknowledgement with %j",this.uid,arg),this.publishResponse(message.uid,{type:MessageType.SERVER_SIDE_EMIT_RESPONSE,data:{requestId:message.data.requestId,packet:arg}}))};this.nsp._onServerSideEmit([...packet,callback]);break}case MessageType.BROADCAST_CLIENT_COUNT:case MessageType.BROADCAST_ACK:case MessageType.FETCH_SOCKETS_RESPONSE:case MessageType.SERVER_SIDE_EMIT_RESPONSE:this.onResponse(message);break;default:debug("[%s] unknown message type: %s",this.uid,message.type)}}onResponse(response){var _a,_b;const requestId=response.data.requestId;switch(debug("[%s] received response %s to request %s",this.uid,response.type,requestId),response.type){case MessageType.BROADCAST_CLIENT_COUNT:null===(_a=this.ackRequests.get(requestId))||void 0===_a||_a.clientCountCallback(response.data.clientCount);break;case MessageType.BROADCAST_ACK:null===(_b=this.ackRequests.get(requestId))||void 0===_b||_b.ack(response.data.packet);break;case MessageType.FETCH_SOCKETS_RESPONSE:{const request=this.requests.get(requestId);if(!request)return;request.current++,response.data.sockets.forEach((socket=>request.responses.push(socket))),request.current===request.expected&&(clearTimeout(request.timeout),request.resolve(request.responses),this.requests.delete(requestId));break}case MessageType.SERVER_SIDE_EMIT_RESPONSE:{const request=this.requests.get(requestId);if(!request)return;request.current++,request.responses.push(response.data.packet),request.current===request.expected&&(clearTimeout(request.timeout),request.resolve(null,request.responses),this.requests.delete(requestId));break}default:debug("[%s] unknown response type: %s",this.uid,response.type)}}async broadcast(packet,opts){var _a;if(!(null===(_a=opts.flags)||void 0===_a?void 0:_a.local))try{const offset=await this.publishAndReturnOffset({type:MessageType.BROADCAST,data:{packet:packet,opts:encodeOptions(opts)}});this.addOffsetIfNecessary(packet,opts,offset)}catch(e){return debug("[%s] error while broadcasting message: %s",this.uid,e.message)}super.broadcast(packet,opts)}addOffsetIfNecessary(packet,opts,offset){var _a;if(!this.nsp.server.opts.connectionStateRecovery)return;const isEventPacket=2===packet.type,withoutAcknowledgement=void 0===packet.id,notVolatile=void 0===(null===(_a=opts.flags)||void 0===_a?void 0:_a.volatile);isEventPacket&&withoutAcknowledgement&&notVolatile&&packet.data.push(offset)}broadcastWithAck(packet,opts,clientCountCallback,ack){var _a;if(!(null===(_a=null==opts?void 0:opts.flags)||void 0===_a?void 0:_a.local)){const requestId=randomId();this.ackRequests.set(requestId,{clientCountCallback:clientCountCallback,ack:ack}),this.publish({type:MessageType.BROADCAST,data:{packet:packet,requestId:requestId,opts:encodeOptions(opts)}}),setTimeout((()=>{this.ackRequests.delete(requestId)}),opts.flags.timeout)}super.broadcastWithAck(packet,opts,clientCountCallback,ack)}async addSockets(opts,rooms){var _a;if(!(null===(_a=opts.flags)||void 0===_a?void 0:_a.local))try{await this.publishAndReturnOffset({type:MessageType.SOCKETS_JOIN,data:{opts:encodeOptions(opts),rooms:rooms}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}super.addSockets(opts,rooms)}async delSockets(opts,rooms){var _a;if(!(null===(_a=opts.flags)||void 0===_a?void 0:_a.local))try{await this.publishAndReturnOffset({type:MessageType.SOCKETS_LEAVE,data:{opts:encodeOptions(opts),rooms:rooms}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}super.delSockets(opts,rooms)}async disconnectSockets(opts,close){var _a;if(!(null===(_a=opts.flags)||void 0===_a?void 0:_a.local))try{await this.publishAndReturnOffset({type:MessageType.DISCONNECT_SOCKETS,data:{opts:encodeOptions(opts),close:close}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}super.disconnectSockets(opts,close)}async fetchSockets(opts){var _a;const[localSockets,serverCount]=await Promise.all([super.fetchSockets(opts),this.serverCount()]),expectedResponseCount=serverCount-1;if((null===(_a=opts.flags)||void 0===_a?void 0:_a.local)||expectedResponseCount<=0)return localSockets;const requestId=randomId();return new Promise(((resolve,reject)=>{const timeout=setTimeout((()=>{const storedRequest=this.requests.get(requestId);storedRequest&&(reject(new Error(`timeout reached: only ${storedRequest.current} responses received out of ${storedRequest.expected}`)),this.requests.delete(requestId))}),opts.flags.timeout||5e3),storedRequest={type:MessageType.FETCH_SOCKETS,resolve:resolve,timeout:timeout,current:0,expected:expectedResponseCount,responses:localSockets};this.requests.set(requestId,storedRequest),this.publish({type:MessageType.FETCH_SOCKETS,data:{opts:encodeOptions(opts),requestId:requestId}})}))}async serverSideEmit(packet){if(!("function"==typeof packet[packet.length-1]))return this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{packet:packet}});const ack=packet.pop(),expectedResponseCount=await this.serverCount()-1;if(debug('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,expectedResponseCount),expectedResponseCount<=0)return ack(null,[]);const requestId=randomId(),timeout=setTimeout((()=>{const storedRequest=this.requests.get(requestId);storedRequest&&(ack(new Error(`timeout reached: only ${storedRequest.current} responses received out of ${storedRequest.expected}`),storedRequest.responses),this.requests.delete(requestId))}),5e3),storedRequest={type:MessageType.SERVER_SIDE_EMIT,resolve:ack,timeout:timeout,current:0,expected:expectedResponseCount,responses:[]};this.requests.set(requestId,storedRequest),this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{requestId:requestId,packet:packet}})}publish(message){this.publishAndReturnOffset(message).catch((err=>{debug("[%s] error while publishing message: %s",this.uid,err)}))}publishAndReturnOffset(message){return message.uid=this.uid,message.nsp=this.nsp.name,this.doPublish(message)}publishResponse(requesterUid,response){response.uid=this.uid,response.nsp=this.nsp.name,this.doPublishResponse(requesterUid,response).catch((err=>{debug("[%s] error while publishing response: %s",this.uid,err)}))}}exports.ClusterAdapter=ClusterAdapter;exports.ClusterAdapterWithHeartbeat=class extends ClusterAdapter{constructor(nsp,opts){super(nsp),this.nodesMap=new Map,this.customRequests=new Map,this._opts=Object.assign({heartbeatInterval:5e3,heartbeatTimeout:1e4},opts),this.cleanupTimer=setInterval((()=>{const now=Date.now();this.nodesMap.forEach(((lastSeen,uid)=>{now-lastSeen>this._opts.heartbeatTimeout&&(debug("[%s] node %s seems down",this.uid,uid),this.removeNode(uid))}))}),1e3)}init(){this.publish({type:MessageType.INITIAL_HEARTBEAT})}scheduleHeartbeat(){this.heartbeatTimer?this.heartbeatTimer.refresh():this.heartbeatTimer=setTimeout((()=>{this.publish({type:MessageType.HEARTBEAT})}),this._opts.heartbeatInterval)}close(){this.publish({type:MessageType.ADAPTER_CLOSE}),clearTimeout(this.heartbeatTimer),this.cleanupTimer&&clearInterval(this.cleanupTimer)}onMessage(message,offset){if(message.uid===this.uid)return debug("[%s] ignore message from self",this.uid);switch(message.uid&&"emitter"!==message.uid&&this.nodesMap.set(message.uid,Date.now()),debug("[%s] new event of type %d from %s",this.uid,message.type,message.uid),message.type){case MessageType.INITIAL_HEARTBEAT:this.publish({type:MessageType.HEARTBEAT});break;case MessageType.HEARTBEAT:break;case MessageType.ADAPTER_CLOSE:this.removeNode(message.uid);break;default:super.onMessage(message,offset)}}serverCount(){return Promise.resolve(1+this.nodesMap.size)}publish(message){return this.scheduleHeartbeat(),super.publish(message)}async serverSideEmit(packet){if(!("function"==typeof packet[packet.length-1]))return this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{packet:packet}});const ack=packet.pop(),expectedResponseCount=this.nodesMap.size;if(debug('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,expectedResponseCount),expectedResponseCount<=0)return ack(null,[]);const requestId=randomId(),timeout=setTimeout((()=>{const storedRequest=this.customRequests.get(requestId);storedRequest&&(ack(new Error(`timeout reached: missing ${storedRequest.missingUids.size} responses`),storedRequest.responses),this.customRequests.delete(requestId))}),5e3),storedRequest={type:MessageType.SERVER_SIDE_EMIT,resolve:ack,timeout:timeout,missingUids:new Set([...this.nodesMap.keys()]),responses:[]};this.customRequests.set(requestId,storedRequest),this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{requestId:requestId,packet:packet}})}async fetchSockets(opts){var _a;const[localSockets,serverCount]=await Promise.all([super.fetchSockets({rooms:opts.rooms,except:opts.except,flags:{local:!0}}),this.serverCount()]),expectedResponseCount=serverCount-1;if((null===(_a=opts.flags)||void 0===_a?void 0:_a.local)||expectedResponseCount<=0)return localSockets;const requestId=randomId();return new Promise(((resolve,reject)=>{const timeout=setTimeout((()=>{const storedRequest=this.customRequests.get(requestId);storedRequest&&(reject(new Error(`timeout reached: missing ${storedRequest.missingUids.size} responses`)),this.customRequests.delete(requestId))}),opts.flags.timeout||5e3),storedRequest={type:MessageType.FETCH_SOCKETS,resolve:resolve,timeout:timeout,missingUids:new Set([...this.nodesMap.keys()]),responses:localSockets};this.customRequests.set(requestId,storedRequest),this.publish({type:MessageType.FETCH_SOCKETS,data:{opts:encodeOptions(opts),requestId:requestId}})}))}onResponse(response){const requestId=response.data.requestId;switch(debug("[%s] received response %s to request %s",this.uid,response.type,requestId),response.type){case MessageType.FETCH_SOCKETS_RESPONSE:{const request=this.customRequests.get(requestId);if(!request)return;response.data.sockets.forEach((socket=>request.responses.push(socket))),request.missingUids.delete(response.uid),0===request.missingUids.size&&(clearTimeout(request.timeout),request.resolve(request.responses),this.customRequests.delete(requestId));break}case MessageType.SERVER_SIDE_EMIT_RESPONSE:{const request=this.customRequests.get(requestId);if(!request)return;request.responses.push(response.data.packet),request.missingUids.delete(response.uid),0===request.missingUids.size&&(clearTimeout(request.timeout),request.resolve(null,request.responses),this.customRequests.delete(requestId));break}default:super.onResponse(response)}}removeNode(uid){this.customRequests.forEach(((request,requestId)=>{request.missingUids.delete(uid),0===request.missingUids.size&&(clearTimeout(request.timeout),request.type===MessageType.FETCH_SOCKETS?request.resolve(request.responses):request.type===MessageType.SERVER_SIDE_EMIT&&request.resolve(null,request.responses),this.customRequests.delete(requestId))})),this.nodesMap.delete(uid)}}}(clusterAdapter),function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageType=exports.ClusterAdapterWithHeartbeat=exports.ClusterAdapter=exports.SessionAwareAdapter=exports.Adapter=void 0;var in_memory_adapter_1=inMemoryAdapter;Object.defineProperty(exports,"Adapter",{enumerable:!0,get:function(){return in_memory_adapter_1.Adapter}}),Object.defineProperty(exports,"SessionAwareAdapter",{enumerable:!0,get:function(){return in_memory_adapter_1.SessionAwareAdapter}});var cluster_adapter_1=clusterAdapter;Object.defineProperty(exports,"ClusterAdapter",{enumerable:!0,get:function(){return cluster_adapter_1.ClusterAdapter}}),Object.defineProperty(exports,"ClusterAdapterWithHeartbeat",{enumerable:!0,get:function(){return cluster_adapter_1.ClusterAdapterWithHeartbeat}}),Object.defineProperty(exports,"MessageType",{enumerable:!0,get:function(){return cluster_adapter_1.MessageType}})}(dist);var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(parentNamespace,"__esModule",{value:!0}),parentNamespace.ParentNamespace=void 0;const namespace_1=namespace,socket_io_adapter_1$1=dist,debug$1=(0,__importDefault$1(srcExports).default)("socket.io:parent-namespace");class ParentNamespace extends namespace_1.Namespace{constructor(server){super(server,"/_"+ParentNamespace.count++),this.children=new Set}_initAdapter(){this.adapter=new ParentBroadcastAdapter(this,this.children)}emit(ev,...args){return this.children.forEach((nsp=>{nsp.emit(ev,...args)})),!0}createChild(name){debug$1("creating child namespace %s",name);const namespace=new namespace_1.Namespace(this.server,name);if(namespace._fns=this._fns.slice(0),this.listeners("connect").forEach((listener=>namespace.on("connect",listener))),this.listeners("connection").forEach((listener=>namespace.on("connection",listener))),this.children.add(namespace),this.server._opts.cleanupEmptyChildNamespaces){const remove=namespace._remove;namespace._remove=socket=>{remove.call(namespace,socket),0===namespace.sockets.size&&(debug$1("closing child namespace %s",name),namespace.adapter.close(),this.server._nsps.delete(namespace.name),this.children.delete(namespace))}}return this.server._nsps.set(name,namespace),this.server.sockets.emitReserved("new_namespace",namespace),namespace}fetchSockets(){throw new Error("fetchSockets() is not supported on parent namespaces")}}parentNamespace.ParentNamespace=ParentNamespace,ParentNamespace.count=0;class ParentBroadcastAdapter extends socket_io_adapter_1$1.Adapter{constructor(parentNsp,children){super(parentNsp),this.children=children}broadcast(packet,opts){this.children.forEach((nsp=>{nsp.adapter.broadcast(packet,opts)}))}}var uws={},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(uws,"__esModule",{value:!0}),uws.serveFile=uws.restoreAdapter=uws.patchAdapter=void 0;const socket_io_adapter_1=dist,fs_1=require$$0$5,debug=(0,__importDefault(srcExports).default)("socket.io:adapter-uws"),SEPARATOR="",{addAll:addAll,del:del,broadcast:broadcast}=socket_io_adapter_1.Adapter.prototype;function subscribe(namespaceName,socket,isNew,rooms){const sessionId=socket.conn.id,websocket=socket.conn.transport.socket;isNew&&(debug("subscribe connection %s to topic %s",sessionId,namespaceName),websocket.subscribe(namespaceName)),rooms.forEach((room=>{const topic=`${namespaceName}${SEPARATOR}${room}`;debug("subscribe connection %s to topic %s",sessionId,topic),websocket.subscribe(topic)}))}uws.patchAdapter=function(app){socket_io_adapter_1.Adapter.prototype.addAll=function(id,rooms){const isNew=!this.sids.has(id);addAll.call(this,id,rooms);const socket=this.nsp.sockets.get(id);socket&&("websocket"!==socket.conn.transport.name?isNew&&socket.conn.on("upgrade",(()=>{const rooms=this.sids.get(id);rooms&&subscribe(this.nsp.name,socket,isNew,rooms)})):subscribe(this.nsp.name,socket,isNew,rooms))},socket_io_adapter_1.Adapter.prototype.del=function(id,room){del.call(this,id,room);const socket=this.nsp.sockets.get(id);if(socket&&"websocket"===socket.conn.transport.name){const sessionId=socket.conn.id,websocket=socket.conn.transport.socket,topic=`${this.nsp.name}${SEPARATOR}${room}`;debug("unsubscribe connection %s from topic %s",sessionId,topic),websocket.unsubscribe(topic)}},socket_io_adapter_1.Adapter.prototype.broadcast=function(packet,opts){if(!(opts.rooms.size<=1&&0===opts.except.size))return void broadcast.call(this,packet,opts);const flags=opts.flags||{},basePacketOpts={preEncoded:!0,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name;const encodedPackets=this.encoder.encode(packet),topic=0===opts.rooms.size?this.nsp.name:`${this.nsp.name}${SEPARATOR}${opts.rooms.keys().next().value}`;debug("fast publish to %s",topic),encodedPackets.forEach((encodedPacket=>{const isBinary="string"!=typeof encodedPacket;app.publish(topic,isBinary?encodedPacket:"4"+encodedPacket,isBinary)})),this.apply(opts,(socket=>{"websocket"!==socket.conn.transport.name&&socket.client.writeToEngine(encodedPackets,basePacketOpts)}))}},uws.restoreAdapter=function(){socket_io_adapter_1.Adapter.prototype.addAll=addAll,socket_io_adapter_1.Adapter.prototype.del=del,socket_io_adapter_1.Adapter.prototype.broadcast=broadcast};uws.serveFile=function(res,filepath){const{size:size}=(0,fs_1.statSync)(filepath),readStream=(0,fs_1.createReadStream)(filepath),destroyReadStream=()=>!readStream.destroyed&&readStream.destroy();res.onAborted(destroyReadStream),readStream.on("data",(chunk=>{const arrayBufferChunk=(buffer=>{const{buffer:arrayBuffer,byteOffset:byteOffset,byteLength:byteLength}=buffer;return arrayBuffer.slice(byteOffset,byteOffset+byteLength)})(chunk),lastOffset=res.getWriteOffset(),[ok,done]=res.tryEnd(arrayBufferChunk,size);done||ok||(readStream.pause(),res.onWritable((offset=>{const[ok,done]=res.tryEnd(arrayBufferChunk.slice(offset-lastOffset),size);return!done&&ok&&readStream.resume(),ok})))})).on("error",(error=>{throw destroyReadStream(),error})).on("end",destroyReadStream)};var require$$18_version="4.7.5";!function(module,exports){var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Namespace=exports.Socket=exports.Server=void 0;const http=require$$0$9,fs_1=require$$0$5,zlib_1=require$$1$1,accepts=accepts$2,stream_1=require$$0$4,path=require$$1,engine_io_1=engine_io,client_1=client,events_1=require$$0$6,namespace_1=namespace;Object.defineProperty(exports,"Namespace",{enumerable:!0,get:function(){return namespace_1.Namespace}});const parent_namespace_1=parentNamespace,socket_io_adapter_1=dist,parser=__importStar(cjs),debug_1=__importDefault(srcExports),socket_1=requireSocket();Object.defineProperty(exports,"Socket",{enumerable:!0,get:function(){return socket_1.Socket}});const typed_events_1=typedEvents,uws_1=uws,cors_1=__importDefault(libExports),debug=(0,debug_1.default)("socket.io:server"),clientVersion=require$$18_version,dotMapRegex=/\.map/;class Server extends typed_events_1.StrictEventEmitter{constructor(srv,opts={}){super(),this._nsps=new Map,this.parentNsps=new Map,this.parentNamespacesFromRegExp=new Map,"object"==typeof srv&&srv instanceof Object&&!srv.listen&&(opts=srv,srv=void 0),this.path(opts.path||"/socket.io"),this.connectTimeout(opts.connectTimeout||45e3),this.serveClient(!1!==opts.serveClient),this._parser=opts.parser||parser,this.encoder=new this._parser.Encoder,this.opts=opts,opts.connectionStateRecovery?(opts.connectionStateRecovery=Object.assign({maxDisconnectionDuration:12e4,skipMiddlewares:!0},opts.connectionStateRecovery),this.adapter(opts.adapter||socket_io_adapter_1.SessionAwareAdapter)):this.adapter(opts.adapter||socket_io_adapter_1.Adapter),opts.cleanupEmptyChildNamespaces=!!opts.cleanupEmptyChildNamespaces,this.sockets=this.of("/"),(srv||"number"==typeof srv)&&this.attach(srv),this.opts.cors&&(this._corsMiddleware=(0,cors_1.default)(this.opts.cors))}get _opts(){return this.opts}serveClient(v){return arguments.length?(this._serveClient=v,this):this._serveClient}_checkNamespace(name,auth,fn){if(0===this.parentNsps.size)return fn(!1);const keysIterator=this.parentNsps.keys(),run=()=>{const nextFn=keysIterator.next();if(nextFn.done)return fn(!1);nextFn.value(name,auth,((err,allow)=>{if(err||!allow)return run();if(this._nsps.has(name))return debug("dynamic namespace %s already exists",name),fn(this._nsps.get(name));const namespace=this.parentNsps.get(nextFn.value).createChild(name);debug("dynamic namespace %s was created",name),fn(namespace)}))};run()}path(v){if(!arguments.length)return this._path;this._path=v.replace(/\/$/,"");const escapedPath=this._path.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return this.clientPathRegex=new RegExp("^"+escapedPath+"/socket\\.io(\\.msgpack|\\.esm)?(\\.min)?\\.js(\\.map)?(?:\\?|$)"),this}connectTimeout(v){return void 0===v?this._connectTimeout:(this._connectTimeout=v,this)}adapter(v){if(!arguments.length)return this._adapter;this._adapter=v;for(const nsp of this._nsps.values())nsp._initAdapter();return this}listen(srv,opts={}){return this.attach(srv,opts)}attach(srv,opts={}){if("function"==typeof srv){throw new Error("You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.")}if(Number(srv)==srv&&(srv=Number(srv)),"number"==typeof srv){debug("creating http server and binding to %d",srv);const port=srv;(srv=http.createServer(((req,res)=>{res.writeHead(404),res.end()}))).listen(port)}return Object.assign(opts,this.opts),opts.path=opts.path||this._path,this.initEngine(srv,opts),this}attachApp(app,opts={}){Object.assign(opts,this.opts),opts.path=opts.path||this._path,debug("creating uWebSockets.js-based engine with opts %j",opts);const engine=new engine_io_1.uServer(opts);engine.attach(app,opts),this.bind(engine),this._serveClient&&app.get(`${this._path}/*`,((res,req)=>{if(!this.clientPathRegex.test(req.getUrl()))return void req.setYield(!0);const filename=req.getUrl().replace(this._path,"").replace(/\?.*$/,"").replace(/^\//,""),isMap=dotMapRegex.test(filename),type=isMap?"map":"source",expectedEtag='"'+clientVersion+'"',weakEtag="W/"+expectedEtag,etag=req.getHeader("if-none-match");if(etag&&(expectedEtag===etag||weakEtag===etag))return debug("serve client %s 304",type),res.writeStatus("304 Not Modified"),void res.end();debug("serve client %s",type),res.writeHeader("cache-control","public, max-age=0"),res.writeHeader("content-type","application/"+(isMap?"json":"javascript")+"; charset=utf-8"),res.writeHeader("etag",expectedEtag);const filepath=path.join(__dirname,"../client-dist/",filename);(0,uws_1.serveFile)(res,filepath)})),(0,uws_1.patchAdapter)(app)}initEngine(srv,opts){debug("creating engine.io instance with opts %j",opts),this.eio=(0,engine_io_1.attach)(srv,opts),this._serveClient&&this.attachServe(srv),this.httpServer=srv,this.bind(this.eio)}attachServe(srv){debug("attaching client serving req handler");const evs=srv.listeners("request").slice(0);srv.removeAllListeners("request"),srv.on("request",((req,res)=>{if(this.clientPathRegex.test(req.url))this._corsMiddleware?this._corsMiddleware(req,res,(()=>{this.serve(req,res)})):this.serve(req,res);else for(let i=0;i<evs.length;i++)evs[i].call(srv,req,res)}))}serve(req,res){const filename=req.url.replace(this._path,"").replace(/\?.*$/,""),isMap=dotMapRegex.test(filename),type=isMap?"map":"source",expectedEtag='"'+clientVersion+'"',weakEtag="W/"+expectedEtag,etag=req.headers["if-none-match"];if(etag&&(expectedEtag===etag||weakEtag===etag))return debug("serve client %s 304",type),res.writeHead(304),void res.end();debug("serve client %s",type),res.setHeader("Cache-Control","public, max-age=0"),res.setHeader("Content-Type","application/"+(isMap?"json":"javascript")+"; charset=utf-8"),res.setHeader("ETag",expectedEtag),Server.sendFile(filename,req,res)}static sendFile(filename,req,res){const readStream=(0,fs_1.createReadStream)(path.join(__dirname,"../client-dist/",filename)),onError=err=>{err&&res.end()};switch(accepts(req).encodings(["br","gzip","deflate"])){case"br":res.writeHead(200,{"content-encoding":"br"}),(0,stream_1.pipeline)(readStream,(0,zlib_1.createBrotliCompress)(),res,onError);break;case"gzip":res.writeHead(200,{"content-encoding":"gzip"}),(0,stream_1.pipeline)(readStream,(0,zlib_1.createGzip)(),res,onError);break;case"deflate":res.writeHead(200,{"content-encoding":"deflate"}),(0,stream_1.pipeline)(readStream,(0,zlib_1.createDeflate)(),res,onError);break;default:res.writeHead(200),(0,stream_1.pipeline)(readStream,res,onError)}}bind(engine){return this.engine=engine,this.engine.on("connection",this.onconnection.bind(this)),this}onconnection(conn){debug("incoming connection with id %s",conn.id);const client=new client_1.Client(this,conn);return 3===conn.protocol&&client.connect("/"),this}of(name,fn){if("function"==typeof name||name instanceof RegExp){const parentNsp=new parent_namespace_1.ParentNamespace(this);return debug("initializing parent namespace %s",parentNsp.name),"function"==typeof name?this.parentNsps.set(name,parentNsp):(this.parentNsps.set(((nsp,conn,next)=>next(null,name.test(nsp))),parentNsp),this.parentNamespacesFromRegExp.set(name,parentNsp)),fn&&parentNsp.on("connect",fn),parentNsp}"/"!==String(name)[0]&&(name="/"+name);let nsp=this._nsps.get(name);if(!nsp){for(const[regex,parentNamespace]of this.parentNamespacesFromRegExp)if(regex.test(name))return debug("attaching namespace %s to parent namespace %s",name,regex),parentNamespace.createChild(name);debug("initializing namespace %s",name),nsp=new namespace_1.Namespace(this,name),this._nsps.set(name,nsp),"/"!==name&&this.sockets.emitReserved("new_namespace",nsp)}return fn&&nsp.on("connect",fn),nsp}close(fn){this._nsps.forEach((nsp=>{nsp.sockets.forEach((socket=>{socket._onclose("server shutting down")})),nsp.adapter.close()})),this.engine.close(),(0,uws_1.restoreAdapter)(),this.httpServer?this.httpServer.close(fn):fn&&fn()}use(fn){return this.sockets.use(fn),this}to(room){return this.sockets.to(room)}in(room){return this.sockets.in(room)}except(room){return this.sockets.except(room)}send(...args){return this.sockets.emit("message",...args),this}write(...args){return this.sockets.emit("message",...args),this}serverSideEmit(ev,...args){return this.sockets.serverSideEmit(ev,...args)}serverSideEmitWithAck(ev,...args){return this.sockets.serverSideEmitWithAck(ev,...args)}allSockets(){return this.sockets.allSockets()}compress(compress){return this.sockets.compress(compress)}get volatile(){return this.sockets.volatile}get local(){return this.sockets.local}timeout(timeout){return this.sockets.timeout(timeout)}fetchSockets(){return this.sockets.fetchSockets()}socketsJoin(room){return this.sockets.socketsJoin(room)}socketsLeave(room){return this.sockets.socketsLeave(room)}disconnectSockets(close=!1){return this.sockets.disconnectSockets(close)}}exports.Server=Server;Object.keys(events_1.EventEmitter.prototype).filter((function(key){return"function"==typeof events_1.EventEmitter.prototype[key]})).forEach((function(fn){Server.prototype[fn]=function(){return this.sockets[fn].apply(this.sockets,arguments)}})),module.exports=(srv,opts)=>new Server(srv,opts),module.exports.Server=Server,module.exports.Namespace=namespace_1.Namespace,module.exports.Socket=socket_1.Socket,requireSocket()}(dist$1,dist$1.exports);var io=getDefaultExportFromCjs(dist$1.exports);const{Server:Server,Namespace:Namespace,Socket:Socket}=io,childProcess=require$$0$a;const sh=function(cmd="",opts={}){let child;Array.isArray(cmd)&&(cmd=cmd.join(";")),opts=Object.assign({stdio:"pipe",cwd:process.cwd()},opts);const shell="win32"===process.platform?{cmd:"cmd",arg:"/C"}:{cmd:"sh",arg:"-c"};try{child=childProcess.spawn(shell.cmd,[shell.arg,cmd],opts)}catch(error){return Promise.reject(error)}return new Promise((resolve=>{let stdout="",stderr="";child.stdout&&child.stdout.on("data",(data=>{stdout+=data})),child.stderr&&child.stderr.on("data",(data=>{stderr+=data})),child.on("error",(error=>{resolve({error:error,stdout:stdout,stderr:stderr,cmd:cmd})})),child.on("close",(code=>{resolve({stdout:stdout,stderr:stderr,cmd:cmd,code:code})}))}))};var kill=getDefaultExportFromCjs((function(port,method="tcp"){return(port=Number.parseInt(port))?"win32"===process.platform?sh("netstat -nao").then((res=>{const{stdout:stdout}=res;if(!stdout)return res;const lines=stdout.split("\n"),lineWithLocalPortRegEx=new RegExp(`^ *${method.toUpperCase()} *[^ ]*:${port}`,"gm"),pids=lines.filter((line=>line.match(lineWithLocalPortRegEx))).reduce(((acc,line)=>{const match=line.match(/(\d*)\w*(\n|$)/gm);return match&&match[0]&&!acc.includes(match[0])?acc.concat(match[0]):acc}),[]);return sh(`TaskKill /F /PID ${pids.join(" /PID ")}`)})):sh("lsof -i -P").then((res=>{const{stdout:stdout}=res;if(!stdout)return res;return stdout.split("\n").filter((line=>line.match(new RegExp(`:*${port}`)))).length>0?sh(`lsof -i ${"udp"===method?"udp":"tcp"}:${port} | grep ${"udp"===method?"UDP":"LISTEN"} | awk '{print $2}' | xargs kill -9`):Promise.reject(new Error("No process running on port"))})):Promise.reject(new Error("Invalid port number provided"))}));const{env:env={},argv:argv=[],platform:platform=""}="undefined"==typeof process?{}:process,isDisabled="NO_COLOR"in env||argv.includes("--no-color"),isForced="FORCE_COLOR"in env||argv.includes("--color"),isWindows="win32"===platform,isDumbTerminal="dumb"===env.TERM,isCompatibleTerminal=tty__namespace&&tty__namespace.isatty&&tty__namespace.isatty(1)&&env.TERM&&!isDumbTerminal,isColorSupported=!isDisabled&&(isForced||isWindows&&!isDumbTerminal||isCompatibleTerminal||"CI"in env&&("GITHUB_ACTIONS"in env||"GITLAB_CI"in env||"CIRCLECI"in env)),replaceClose=(index,string,close,replace,head=string.substring(0,index)+replace,tail=string.substring(index+close.length),next=tail.indexOf(close))=>head+(next<0?tail:replaceClose(next,tail,close,replace)),filterEmpty=(open,close,replace=open,at=open.length+1)=>string=>string||""!==string&&void 0!==string?((index,string,open,close,replace)=>index<0?open+string+close:open+replaceClose(index,string,close,replace)+close)((""+string).indexOf(close,at),string,open,close,replace):"",init=(open,close,replace)=>filterEmpty(`[${open}m`,`[${close}m`,replace),colors={reset:init(0,0),bold:init(1,22,"[22m[1m"),dim:init(2,22,"[22m[2m"),italic:init(3,23),underline:init(4,24),inverse:init(7,27),hidden:init(8,28),strikethrough:init(9,29),black:init(30,39),red:init(31,39),green:init(32,39),yellow:init(33,39),blue:init(34,39),magenta:init(35,39),cyan:init(36,39),white:init(37,39),gray:init(90,39),bgBlack:init(40,49),bgRed:init(41,49),bgGreen:init(42,49),bgYellow:init(43,49),bgBlue:init(44,49),bgMagenta:init(45,49),bgCyan:init(46,49),bgWhite:init(47,49),blackBright:init(90,39),redBright:init(91,39),greenBright:init(92,39),yellowBright:init(93,39),blueBright:init(94,39),magentaBright:init(95,39),cyanBright:init(96,39),whiteBright:init(97,39),bgBlackBright:init(100,49),bgRedBright:init(101,49),bgGreenBright:init(102,49),bgYellowBright:init(103,49),bgBlueBright:init(104,49),bgMagentaBright:init(105,49),bgCyanBright:init(106,49),bgWhiteBright:init(107,49)},{reset:reset,bold:bold,dim:dim,italic:italic,underline:underline,inverse:inverse,hidden:hidden,strikethrough:strikethrough,black:black,red:red,green:green,yellow:yellow,blue:blue,magenta:magenta,cyan:cyan,white:white,gray:gray,bgBlack:bgBlack,bgRed:bgRed,bgGreen:bgGreen,bgYellow:bgYellow,bgBlue:bgBlue,bgMagenta:bgMagenta,bgCyan:bgCyan,bgWhite:bgWhite,blackBright:blackBright,redBright:redBright,greenBright:greenBright,yellowBright:yellowBright,blueBright:blueBright,magentaBright:magentaBright,cyanBright:cyanBright,whiteBright:whiteBright,bgBlackBright:bgBlackBright,bgRedBright:bgRedBright,bgGreenBright:bgGreenBright,bgYellowBright:bgYellowBright,bgBlueBright:bgBlueBright,bgMagentaBright:bgMagentaBright,bgCyanBright:bgCyanBright,bgWhiteBright:bgWhiteBright}=(({useColor:useColor=isColorSupported}={})=>useColor?colors:Object.keys(colors).reduce(((colors,key)=>({...colors,[key]:String})),{}))(),allowed_advanced_extension_reloader_origins=["hmhmmmajoblhmohkmfjeoamhdpodihlg","hagknokdofkmojolcpbddjfdjhnjdkae","bcpgohifjmmcoiemghdamamlkbcbgifg"].map((id=>`chrome-extension://${id}`));return class{constructor(options){this.port=7220,this.watch_dir="src",this.httpserver=require$$0$9.createServer(),this.io=new Server(this.httpserver,{cors:{origin:allowed_advanced_extension_reloader_origins}}),this.changed_files=[],this.first_reload_completed=!1,this.reload_attempts=0,this.listening=!1,this.attempted_to_reload_once_while_listening=!1,this.reload_delay=750,this.listen=()=>{this.httpserver.listen(this.port,(()=>{this.listening=!0,setTimeout((()=>{this.reload_delay=100}),this.reload_delay)})).on("error",(error=>{console.log(redBright(`[Advanced Extension Reloader Watch 2 error] Unable to connect to port ${this.port}.`)),console.log(error),process.exit(1)}))},this.watch=({callback:callback}={})=>{try{const watch_callback=file_path=>{isNil$1(file_path)||(this.changed_files.push(require$$1.resolve(file_path)),isNil$1(callback)||callback())};chokidar.watch(this.watch_dir,{ignoreInitial:!0}).on("add",watch_callback).on("change",watch_callback).on("unlink",watch_callback)}catch(_a){console.log(redBright("[Advanced Extension Reloader Watch 2 error] Directory provided in the watch_dir property doesn't exist.")),process.exit(1)}},this.reload=({extension_id:extension_id,hard:hard=!0,all_tabs:all_tabs=!1,always_open_popup:always_open_popup=!1,play_notifications:play_notifications=!1,min_interval_between_extension_reloads:min_interval_between_extension_reloads=500,delay_after_extension_reload:delay_after_extension_reload=1e3,delay_after_tab_reload:delay_after_tab_reload=2e3,listen_message_response_timeout:listen_message_response_timeout=400,manifest_path:manifest_path=!1,hard_paths:hard_paths=[],soft_paths:soft_paths=[],all_tabs_paths:all_tabs_paths=[],one_tab_paths:one_tab_paths=[],always_open_popup_paths:always_open_popup_paths=[]}={},reloading_from_advanced_extension_reloader_watch_1=!1)=>{let manifest_json_is_valid=!1;if(!reloading_from_advanced_extension_reloader_watch_1&&this.reload_attempts<=50&&(isEmpty$1(this.changed_files)&&this.first_reload_completed||!this.listening||!this.attempted_to_reload_once_while_listening))this.reload_attempts+=1,this.attempted_to_reload_once_while_listening=this.listening,setTimeout((()=>{this.reload({extension_id:extension_id,hard:hard,all_tabs:all_tabs,always_open_popup:always_open_popup,play_notifications:play_notifications,min_interval_between_extension_reloads:min_interval_between_extension_reloads,delay_after_extension_reload:delay_after_extension_reload,delay_after_tab_reload:delay_after_tab_reload,listen_message_response_timeout:listen_message_response_timeout,manifest_path:manifest_path,hard_paths:hard_paths,soft_paths:soft_paths,all_tabs_paths:all_tabs_paths,one_tab_paths:one_tab_paths,always_open_popup_paths:always_open_popup_paths})}),this.reload_delay);else{this.first_reload_completed=!0,this.reload_attempts=0;const check_if_manifest_json_is_valid=()=>{let manifest_json_is_valid_2=!0;if(!1!==manifest_path){const manifest_path_absolute="string"==typeof manifest_path?require$$1.normalize(manifest_path):require$$1.resolve(this.watch_dir,"manifest.json");manifest_json_is_valid_2=null!==fs$4.readJsonSync(manifest_path_absolute,{throws:!1}),manifest_json_is_valid_2||(play_notifications&&this.play_manifest_error_notification({extension_id:extension_id}),console.log(redBright("[Advanced Extension Reloader Watch 2 error] manifest.json is not valid. Extension was not reloaded.")))}return manifest_json_is_valid_2},hard_final=hard?this.check_if_matched_filename({val:hard,paths:soft_paths}):this.check_if_matched_filename({val:hard,paths:hard_paths}),all_tabs_final=all_tabs?this.check_if_matched_filename({val:all_tabs,paths:one_tab_paths}):this.check_if_matched_filename({val:all_tabs,paths:all_tabs_paths}),always_open_popup_final=this.check_if_need_to_open_popup({val:always_open_popup,paths:always_open_popup_paths});manifest_json_is_valid=check_if_manifest_json_is_valid(),manifest_json_is_valid&&this.io.sockets.emit("reload_app",{extension_id:extension_id,hard:hard_final,all_tabs:all_tabs_final,always_open_popup:always_open_popup_final,play_notifications:play_notifications,min_interval_between_extension_reloads:min_interval_between_extension_reloads,delay_after_extension_reload:delay_after_extension_reload,delay_after_tab_reload:delay_after_tab_reload,listen_message_response_timeout:listen_message_response_timeout}),this.changed_files=[]}return manifest_json_is_valid},this.play_error_notification=({extension_id:extension_id}={})=>{this.io.sockets.emit("play_error_notification",{extension_id:extension_id})},this.play_manifest_error_notification=({extension_id:extension_id}={})=>{this.io.sockets.emit("play_manifest_error_notification",{extension_id:extension_id})},this.check_if_matched_filename=({val:val,paths:paths})=>this.match_val({paths_1:this.changed_files,paths_2:paths})&&0!==paths.length?!val:val,this.check_if_need_to_open_popup=({val:val,paths:paths})=>{const match_val=this.match_val({paths_1:this.changed_files,paths_2:paths});return val&&0!==paths.length?val&&match_val&&0!==paths.length:val},this.match_val=({paths_1:paths_1,paths_2:paths_2})=>paths_1.some((path_1=>paths_2.some((path_2=>require$$1.normalize(path_1).includes(require$$1.normalize(path_2)))))),this.port=options&&options.port?options.port:this.port,this.watch_dir=options&&options.watch_dir?options.watch_dir:this.watch_dir,kill(this.port,"tcp").then((()=>{this.listen()})).catch((()=>{this.listen()}))}}}));
